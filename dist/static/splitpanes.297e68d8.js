import{N as Xu,o as Zi,h as Mo,O as Yu,P as Wu,Q as _u,d as Do,r as $r,R as Tu,s as Hl,S as Mu,u as Lt,U as qu,g as Rs,W as Zu,c as Hu,X as Qu,e as Ju,Y as ju,Z as Vu,_ as $u,$ as zu,i as Lu,b as jr,w as Vr,a0 as ef,a1 as Bs,C as tf,a2 as rf,a3 as nf,a4 as lf,a5 as of,a6 as af}from"./vendor.a9c2ed88.js";/* empty css                 */import{F as sf}from"./FileSaver.min.7dbbc610.js";import{_ as Iu}from"./index.6b1f6cda.js";var uf=Object.defineProperty,ff=Object.defineProperties,hf=Object.getOwnPropertyDescriptors,Is=Object.getOwnPropertySymbols,Ru=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,Ou=(W,O,b)=>O in W?uf(W,O,{enumerable:!0,configurable:!0,writable:!0,value:b}):W[O]=b,cf=(W,O)=>{for(var b in O||(O={}))Ru.call(O,b)&&Ou(W,b,O[b]);if(Is)for(var b of Is(O))Bu.call(O,b)&&Ou(W,b,O[b]);return W},df=(W,O)=>ff(W,hf(O)),pf=(W,O)=>{var b={};for(var _ in W)Ru.call(W,_)&&O.indexOf(_)<0&&(b[_]=W[_]);if(W!=null&&Is)for(var _ of Is(W))O.indexOf(_)<0&&Bu.call(W,_)&&(b[_]=W[_]);return b};const vf={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((W,O)=>(W[O.id]=O)&&W,{})}},methods:{updatePaneComponents(){this.panes.forEach(W=>{W.update&&W.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[W.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(W,O){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=O},onMouseMove(W){this.touch.mouseDown&&(W.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(W)),this.$emit("resize",this.panes.map(O=>({min:O.min,max:O.max,size:O.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(W=>({min:W.min,max:W.max,size:W.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(W,O){"ontouchstart"in window&&(W.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===O?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(W,O),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=O,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[O])},onSplitterDblClick(W,O){let b=0;this.panes=this.panes.map((_,A)=>(_.size=A===O?_.max:_.min,A!==O&&(b+=_.min),_)),this.panes[O].size-=b,this.$emit("pane-maximize",this.panes[O])},onPaneClick(W,O){this.$emit("pane-click",this.indexedPanes[O])},getCurrentMouseDrag(W){const O=this.container.getBoundingClientRect(),{clientX:b,clientY:_}="ontouchstart"in window&&W.touches?W.touches[0]:W;return{x:b-O.left,y:_-O.top}},getCurrentDragPercentage(W){W=W[this.horizontal?"y":"x"];const O=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(W=O-W),W*100/O},calculatePanesSize(W){const O=this.touch.activeSplitter;let b={prevPanesSize:this.sumPrevPanesSize(O),nextPanesSize:this.sumNextPanesSize(O),prevReachedMinPanes:0,nextReachedMinPanes:0};const _=0+(this.pushOtherPanes?0:b.prevPanesSize),A=100-(this.pushOtherPanes?0:b.nextPanesSize),p=Math.max(Math.min(this.getCurrentDragPercentage(W),A),_);let g=[O,O+1],y=this.panes[g[0]]||null,m=this.panes[g[1]]||null;const S=y.max<100&&p>=y.max+b.prevPanesSize,x=m.max<100&&p<=100-(m.max+this.sumNextPanesSize(O+1));if(S||x){S?(y.size=y.max,m.size=Math.max(100-y.max-b.prevPanesSize-b.nextPanesSize,0)):(y.size=Math.max(100-m.max-b.prevPanesSize-this.sumNextPanesSize(O+1),0),m.size=m.max);return}if(this.pushOtherPanes){const N=this.doPushOtherPanes(b,p);if(!N)return;({sums:b,panesToResize:g}=N),y=this.panes[g[0]]||null,m=this.panes[g[1]]||null}y!==null&&(y.size=Math.min(Math.max(p-b.prevPanesSize-b.prevReachedMinPanes,y.min),y.max)),m!==null&&(m.size=Math.min(Math.max(100-p-b.nextPanesSize-b.nextReachedMinPanes,m.min),m.max))},doPushOtherPanes(W,O){const b=this.touch.activeSplitter,_=[b,b+1];return O<W.prevPanesSize+this.panes[_[0]].min&&(_[0]=this.findPrevExpandedPane(b).index,W.prevReachedMinPanes=0,_[0]<b&&this.panes.forEach((A,p)=>{p>_[0]&&p<=b&&(A.size=A.min,W.prevReachedMinPanes+=A.min)}),W.prevPanesSize=this.sumPrevPanesSize(_[0]),_[0]===void 0)?(W.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((A,p)=>{p>0&&p<=b&&(A.size=A.min,W.prevReachedMinPanes+=A.min)}),this.panes[_[1]].size=100-W.prevReachedMinPanes-this.panes[0].min-W.prevPanesSize-W.nextPanesSize,null):O>100-W.nextPanesSize-this.panes[_[1]].min&&(_[1]=this.findNextExpandedPane(b).index,W.nextReachedMinPanes=0,_[1]>b+1&&this.panes.forEach((A,p)=>{p>b&&p<_[1]&&(A.size=A.min,W.nextReachedMinPanes+=A.min)}),W.nextPanesSize=this.sumNextPanesSize(_[1]-1),_[1]===void 0)?(W.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((A,p)=>{p<this.panesCount-1&&p>=b+1&&(A.size=A.min,W.nextReachedMinPanes+=A.min)}),this.panes[_[0]].size=100-W.prevPanesSize-W.nextReachedMinPanes-this.panes[this.panesCount-1].min-W.nextPanesSize,null):{sums:W,panesToResize:_}},sumPrevPanesSize(W){return this.panes.reduce((O,b,_)=>O+(_<W?b.size:0),0)},sumNextPanesSize(W){return this.panes.reduce((O,b,_)=>O+(_>W+1?b.size:0),0)},findPrevExpandedPane(W){return[...this.panes].reverse().find(b=>b.index<W&&b.size>b.min)||{}},findNextExpandedPane(W){return this.panes.find(b=>b.index>W+1&&b.size>b.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(O=>{const b=O.classList.contains("splitpanes__pane"),_=O.classList.contains("splitpanes__splitter");if(!b&&!_){O.parentNode.removeChild(O),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(W,O,b=!1){const _=W-1,A=document.createElement("div");A.classList.add("splitpanes__splitter"),b||(A.onmousedown=p=>this.onMouseDown(p,_),typeof window!="undefined"&&"ontouchstart"in window&&(A.ontouchstart=p=>this.onMouseDown(p,_)),A.onclick=p=>this.onSplitterClick(p,_+1)),this.dblClickSplitter&&(A.ondblclick=p=>this.onSplitterDblClick(p,_+1)),O.parentNode.insertBefore(A,O)},removeSplitter(W){W.onmousedown=void 0,W.onclick=void 0,W.ondblclick=void 0,W.parentNode.removeChild(W)},redoSplitters(){const W=Array.from(this.container.children);W.forEach(b=>{b.className.includes("splitpanes__splitter")&&this.removeSplitter(b)});let O=0;W.forEach(b=>{b.className.includes("splitpanes__pane")&&(!O&&this.firstSplitter?this.addSplitter(O,b,!0):O&&this.addSplitter(O,b),O++)})},requestUpdate(W){var O=W,{target:b}=O,_=pf(O,["target"]);const A=this.indexedPanes[b._.uid];Object.entries(_).forEach(([p,g])=>A[p]=g)},onPaneAdd(W){let O=-1;Array.from(W.$el.parentNode.children).some(A=>(A.className.includes("splitpanes__pane")&&O++,A===W.$el));const b=parseFloat(W.minSize),_=parseFloat(W.maxSize);this.panes.splice(O,0,{id:W._.uid,index:O,min:isNaN(b)?0:b,max:isNaN(_)?100:_,size:W.size===null?null:parseFloat(W.size),givenSize:W.size,update:W.update}),this.panes.forEach((A,p)=>A.index=p),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[O]}),this.$emit("pane-add",{index:O,panes:this.panes.map(A=>({min:A.min,max:A.max,size:A.size}))})})},onPaneRemove(W){const O=this.panes.findIndex(_=>_.id===W._.uid),b=this.panes.splice(O,1)[0];this.panes.forEach((_,A)=>_.index=A),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:df(cf({},b),{index:O})}),this.$emit("pane-remove",{removed:b,panes:this.panes.map(_=>({min:_.min,max:_.max,size:_.size}))})})},resetPaneSizes(W={}){!W.addedPane&&!W.removedPane?this.initialPanesSizing():this.panes.some(O=>O.givenSize!==null||O.min||O.max<100)?this.equalizeAfterAddOrRemove(W):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(O=>({min:O.min,max:O.max,size:O.size})))},equalize(){const W=100/this.panesCount;let O=0,b=[],_=[];this.panes.forEach(A=>{A.size=Math.max(Math.min(W,A.max),A.min),O-=A.size,A.size>=A.max&&b.push(A.id),A.size<=A.min&&_.push(A.id)}),O>.1&&this.readjustSizes(O,b,_)},initialPanesSizing(){100/this.panesCount;let W=100,O=[],b=[],_=0;this.panes.forEach(p=>{W-=p.size,p.size!==null&&_++,p.size>=p.max&&O.push(p.id),p.size<=p.min&&b.push(p.id)});let A=100;W>.1&&(this.panes.forEach(p=>{p.size===null&&(p.size=Math.max(Math.min(W/(this.panesCount-_),p.max),p.min)),A-=p.size}),A>.1&&this.readjustSizes(W,O,b))},equalizeAfterAddOrRemove({addedPane:W,removedPane:O}={}){let b=100/this.panesCount,_=0,A=[],p=[];W&&W.givenSize!==null&&(b=(100-W.givenSize)/(this.panesCount-1)),this.panes.forEach(g=>{_-=g.size,g.size>=g.max&&A.push(g.id),g.size<=g.min&&p.push(g.id)}),!(Math.abs(_)<.1)&&(this.panes.forEach(g=>{W&&W.givenSize!==null&&W.id===g.id||(g.size=Math.max(Math.min(b,g.max),g.min)),_-=g.size,g.size>=g.max&&A.push(g.id),g.size<=g.min&&p.push(g.id)}),_>.1&&this.readjustSizes(_,A,p))},readjustSizes(W,O,b){let _;W>0?_=W/(this.panesCount-O.length):_=W/(this.panesCount-b.length),this.panes.forEach((A,p)=>{if(W>0&&!O.includes(A.id)){const g=Math.max(Math.min(A.size+_,A.max),A.min);W-=g-A.size,A.size=g}else if(!b.includes(A.id)){const g=Math.max(Math.min(A.size+_,A.max),A.min);W-=g-A.size,A.size=g}A.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[A.id].size}%`})}),Math.abs(W)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(W){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((b,_)=>{b.ondblclick=W?A=>this.onSplitterDblClick(A,_):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return Xu("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}};var gf=(W,O)=>{const b=W.__vccOpts||W;for(const[_,A]of O)b[_]=A;return b};const yf={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(W){this.style=W}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(W){this.requestUpdate({target:this,size:W})},minSizeNumber(W){this.requestUpdate({target:this,min:W})},maxSizeNumber(W){this.requestUpdate({target:this,max:W})}}};function mf(W,O,b,_,A,p){return Zi(),Mo("div",{class:"splitpanes__pane",onClick:O[0]||(O[0]=g=>p.onPaneClick(g,W._.uid)),style:Wu(W.style)},[Yu(W.$slots,"default")],4)}var Nu=gf(yf,[["render",mf]]);var Us={exports:{}};(function(W,O){(function(b,_){W.exports=_()})(_u,function(){var b=navigator.userAgent,_=navigator.platform,A=/gecko\/\d/i.test(b),p=/MSIE \d/.test(b),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(b),y=/Edge\/(\d+)/.exec(b),m=p||g||y,S=m&&(p?document.documentMode||6:+(y||g)[1]),x=!y&&/WebKit\//.test(b),N=x&&/Qt\/\d+\.\d+/.test(b),D=!y&&/Chrome\/(\d+)/.exec(b),R=D&&+D[1],F=/Opera\//.test(b),E=/Apple Computer/.test(navigator.vendor),J=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(b),ee=/PhantomJS/.test(b),z=E&&(/Mobile\/\w+/.test(b)||navigator.maxTouchPoints>2),X=/Android/.test(b),te=z||X||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(b),V=z||/Mac/.test(_),le=/\bCrOS\b/.test(b),ae=/win/i.test(_),M=F&&b.match(/Version\/(\d*\.\d*)/);M&&(M=Number(M[1])),M&&M>=15&&(F=!1,x=!0);var j=V&&(N||F&&(M==null||M<12.11)),he=A||m&&S>=9;function de(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var ue=function(e,t){var n=e.className,i=de(t).exec(n);if(i){var o=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(o?i[1]+o:"")}};function G(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function fe(e,t){return G(e).appendChild(t)}function L(e,t,n,i){var o=document.createElement(e);if(n&&(o.className=n),i&&(o.style.cssText=i),typeof t=="string")o.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)o.appendChild(t[a]);return o}function Ae(e,t,n,i){var o=L(e,t,n,i);return o.setAttribute("role","presentation"),o}var Re;document.createRange?Re=function(e,t,n,i){var o=document.createRange();return o.setEnd(i||e,n),o.setStart(e,t),o}:Re=function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};function Je(e,t){if(t.nodeType==3&&(t=t.parentNode),e.contains)return e.contains(t);do if(t.nodeType==11&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function Fe(e){var t;try{t=e.activeElement}catch{t=e.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function je(e,t){var n=e.className;de(t).test(n)||(e.className+=(n?" ":"")+t)}function sr(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!de(n[i]).test(t)&&(t+=" "+n[i]);return t}var ur=function(e){e.select()};z?ur=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:m&&(ur=function(e){try{e.select()}catch{}});function kt(e){return e.display.wrapper.ownerDocument}function Yt(e){return kt(e).defaultView}function Be(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Ce(e,t,n){t||(t={});for(var i in e)e.hasOwnProperty(i)&&(n!==!1||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function me(e,t,n,i,o){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var a=i||0,s=o||0;;){var u=e.indexOf("	",a);if(u<0||u>=t)return s+(t-a);s+=u-a,s+=n-s%n,a=u+1}}var Oe=function(){this.id=null,this.f=null,this.time=0,this.handler=Be(this.onTimeout,this)};Oe.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Oe.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};function Pe(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}var Qt=50,ze={toString:function(){return"CodeMirror.Pass"}},ot={scroll:!1},fr={origin:"*mouse"},hr={origin:"+move"};function rr(e,t,n){for(var i=0,o=0;;){var a=e.indexOf("	",i);a==-1&&(a=e.length);var s=a-i;if(a==e.length||o+s>=t)return i+Math.min(s,t-o);if(o+=a-i,o+=n-o%n,i=a+1,o>=t)return i}}var Ee=[""];function jt(e){for(;Ee.length<=e;)Ee.push(Ue(Ee)+" ");return Ee[e]}function Ue(e){return e[e.length-1]}function Gr(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function w(e,t,n){for(var i=0,o=n(t);i<e.length&&n(e[i])<=o;)i++;e.splice(i,0,t)}function P(){}function U(e,t){var n;return Object.create?n=Object.create(e):(P.prototype=e,n=new P),t&&Ce(t,n),n}var Y=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Y.test(e))}function Q(e,t){return t?t.source.indexOf("\\w")>-1&&Z(e)?!0:t.test(e):Z(e)}function oe(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ce=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function pe(e){return e.charCodeAt(0)>=768&&ce.test(e)}function Le(e,t,n){for(;(n<0?t>0:t<e.length)&&pe(e.charAt(t));)t+=n;return t}function be(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var o=(t+n)/2,a=i<0?Math.ceil(o):Math.floor(o);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}function We(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var o=!1,a=0;a<e.length;++a){var s=e[a];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),s.level==1?"rtl":"ltr",a),o=!0)}o||i(t,n,"ltr")}var tt=null;function Ne(e,t,n){var i;tt=null;for(var o=0;o<e.length;++o){var a=e[o];if(a.from<t&&a.to>t)return o;a.to==t&&(a.from!=a.to&&n=="before"?i=o:tt=o),a.from==t&&(a.from!=a.to&&n!="before"?i=o:tt=o)}return i!=null?i:tt}var mt=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(h){return h<=247?e.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?t.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":h==8204?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,u=/[1n]/;function f(h,d,v){this.level=h,this.from=d,this.to=v}return function(h,d){var v=d=="ltr"?"L":"R";if(h.length==0||d=="ltr"&&!i.test(h))return!1;for(var C=h.length,k=[],H=0;H<C;++H)k.push(n(h.charCodeAt(H)));for(var B=0,K=v;B<C;++B){var q=k[B];q=="m"?k[B]=K:K=q}for(var $=0,ne=v;$<C;++$){var ie=k[$];ie=="1"&&ne=="r"?k[$]="n":a.test(ie)&&(ne=ie,ie=="r"&&(k[$]="R"))}for(var ve=1,ge=k[0];ve<C-1;++ve){var ke=k[ve];ke=="+"&&ge=="1"&&k[ve+1]=="1"?k[ve]="1":ke==","&&ge==k[ve+1]&&(ge=="1"||ge=="n")&&(k[ve]=ge),ge=ke}for(var Me=0;Me<C;++Me){var ut=k[Me];if(ut==",")k[Me]="N";else if(ut=="%"){var Ke=void 0;for(Ke=Me+1;Ke<C&&k[Ke]=="%";++Ke);for(var it=Me&&k[Me-1]=="!"||Ke<C&&k[Ke]=="1"?"1":"N",pt=Me;pt<Ke;++pt)k[pt]=it;Me=Ke-1}}for(var Xe=0,lt=v;Xe<C;++Xe){var Ye=k[Xe];lt=="L"&&Ye=="1"?k[Xe]="L":a.test(Ye)&&(lt=Ye)}for(var _e=0;_e<C;++_e)if(o.test(k[_e])){var $e=void 0;for($e=_e+1;$e<C&&o.test(k[$e]);++$e);for(var yt=(_e?k[_e-1]:v)=="L",Nt=($e<C?k[$e]:v)=="L",At=yt==Nt?yt?"L":"R":v,Zt=_e;Zt<$e;++Zt)k[Zt]=At;_e=$e-1}for(var et=[],Nr,wt=0;wt<C;)if(s.test(k[wt])){var Sn=wt;for(++wt;wt<C&&s.test(k[wt]);++wt);et.push(new f(0,Sn,wt))}else{var tr=wt,Pt=et.length,Ar=d=="rtl"?1:0;for(++wt;wt<C&&k[wt]!="L";++wt);for(var Xt=tr;Xt<wt;)if(u.test(k[Xt])){tr<Xt&&(et.splice(Pt,0,new f(1,tr,Xt)),Pt+=Ar);var To=Xt;for(++Xt;Xt<wt&&u.test(k[Xt]);++Xt);et.splice(Pt,0,new f(2,To,Xt)),Pt+=Ar,tr=Xt}else++Xt;tr<wt&&et.splice(Pt,0,new f(1,tr,wt))}return d=="ltr"&&(et[0].level==1&&(Nr=h.match(/^\s+/))&&(et[0].from=Nr[0].length,et.unshift(new f(0,0,Nr[0].length))),Ue(et).level==1&&(Nr=h.match(/\s+$/))&&(Ue(et).to-=Nr[0].length,et.push(new f(0,C-Nr[0].length,C)))),d=="rtl"?et.reverse():et}}();function ye(e,t){var n=e.order;return n==null&&(n=e.order=mt(e.text,t)),n}var Rt=[],se=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||Rt).concat(n)}};function vt(e,t){return e._handlers&&e._handlers[t]||Rt}function Ge(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,o=i&&i[t];if(o){var a=Pe(o,n);a>-1&&(i[t]=o.slice(0,a).concat(o.slice(a+1)))}}}function ft(e,t){var n=vt(e,t);if(!!n.length)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function qe(e,t,n){return typeof t=="string"&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ft(e,n||t.type,e,t),cr(t)||t.codemirrorIgnore}function br(e){var t=e._handlers&&e._handlers.cursorActivity;if(!!t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)Pe(n,t[i])==-1&&n.push(t[i])}function rt(e,t){return vt(e,t).length>0}function Tt(e){e.prototype.on=function(t,n){se(this,t,n)},e.prototype.off=function(t,n){Ge(this,t,n)}}function xt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function nr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function cr(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Kr(e){xt(e),nr(e)}function Vt(e){return e.target||e.srcElement}function Kn(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),V&&e.ctrlKey&&t==1&&(t=3),t}var Oo=function(){if(m&&S<9)return!1;var e=L("div");return"draggable"in e||"dragDrop"in e}(),ir;function No(e){if(ir==null){var t=L("span","\u200B");fe(e,L("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ir=t.offsetWidth<=1&&t.offsetHeight>2&&!(m&&S<8))}var n=ir?L("span","\u200B"):L("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}var Cn;function Il(e){if(Cn!=null)return Cn;var t=fe(e,document.createTextNode("A\u062EA")),n=Re(t,0,1).getBoundingClientRect(),i=Re(t,1,2).getBoundingClientRect();return G(e),!n||n.left==n.right?!1:Cn=i.right-n.right<3}var Qi=`

b`.split(/\n/).length!=3?function(e){for(var t=0,n=[],i=e.length;t<=i;){var o=e.indexOf(`
`,t);o==-1&&(o=e.length);var a=e.slice(t,e.charAt(o-1)=="\r"?o-1:o),s=a.indexOf("\r");s!=-1?(n.push(a.slice(0,s)),t+=s+1):(n.push(a),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Xr=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Yr=function(){var e=L("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),wr=null;function en(e){if(wr!=null)return wr;var t=fe(e,L("span","x")),n=t.getBoundingClientRect(),i=Re(t,0,1).getBoundingClientRect();return wr=Math.abs(n.left-i.left)>1}var Pr={},kn={};function Xn(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Pr[e]=t}function Ln(e,t){kn[e]=t}function _t(e){if(typeof e=="string"&&kn.hasOwnProperty(e))e=kn[e];else if(e&&typeof e.name=="string"&&kn.hasOwnProperty(e.name)){var t=kn[e.name];typeof t=="string"&&(t={name:t}),e=U(t,e),e.name=t.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return _t("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return _t("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function tn(e,t){t=_t(t);var n=Pr[t.name];if(!n)return tn(e,"text/plain");var i=n(e,t);if(lr.hasOwnProperty(t.name)){var o=lr[t.name];for(var a in o)!o.hasOwnProperty(a)||(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var lr={};function bi(e,t){var n=lr.hasOwnProperty(e)?lr[e]:lr[e]={};Ce(t,n)}function qr(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var o=t[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function gt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),!(!n||n.mode==e));)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Se(e,t,n){return e.startState?e.startState(t,n):!0}var ct=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};ct.prototype.eol=function(){return this.pos>=this.string.length},ct.prototype.sol=function(){return this.pos==this.lineStart},ct.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ct.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ct.prototype.eat=function(e){var t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e.test?e.test(t):e(t)),n)return++this.pos,t},ct.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ct.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ct.prototype.skipToEnd=function(){this.pos=this.string.length},ct.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ct.prototype.backUp=function(e){this.pos-=e},ct.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=me(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},ct.prototype.indentation=function(){return me(this.string,null,this.tabSize)-(this.lineStart?me(this.string,this.lineStart,this.tabSize):0)},ct.prototype.match=function(e,t,n){if(typeof e=="string"){var i=function(s){return n?s.toLowerCase():s},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return t!==!1&&(this.pos+=e.length),!0}else{var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&t!==!1&&(this.pos+=a[0].length),a)}},ct.prototype.current=function(){return this.string.slice(this.start,this.pos)},ct.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ct.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ct.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function we(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var o=n.children[i],a=o.chunkSize();if(t<a){n=o;break}t-=a}return n.lines[t]}function Bt(e,t,n){var i=[],o=t.line;return e.iter(t.line,n.line+1,function(a){var s=a.text;o==n.line&&(s=s.slice(0,n.ch)),o==t.line&&(s=s.slice(t.ch)),i.push(s),++o}),i}function Ve(e,t,n){var i=[];return e.iter(t,n,function(o){i.push(o.text)}),i}function Ut(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Qe(e){if(e.parent==null)return null;for(var t=e.parent,n=Pe(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var o=0;i.children[o]!=t;++o)n+=i.children[o].chunkSize();return n+t.first}function xr(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var o=e.children[i],a=o.height;if(t<a){e=o;continue e}t-=a,n+=o.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var u=e.lines[s],f=u.height;if(t<f)break;t-=f}return n+s}function c(e,t){return t>=e.first&&t<e.first+e.size}function T(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function I(e,t,n){if(n===void 0&&(n=null),!(this instanceof I))return new I(e,t,n);this.line=e,this.ch=t,this.sticky=n}function re(e,t){return e.line-t.line||e.ch-t.ch}function Te(e,t){return e.sticky==t.sticky&&re(e,t)==0}function He(e){return I(e.line,e.ch)}function nt(e,t){return re(e,t)<0?t:e}function xe(e,t){return re(e,t)<0?e:t}function dr(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function De(e,t){if(t.line<e.first)return I(e.first,0);var n=e.first+e.size-1;return t.line>n?I(n,we(e,n).text.length):Rl(t,we(e,t.line).text.length)}function Rl(e,t){var n=e.ch;return n==null||n>t?I(e.line,t):n<0?I(e.line,0):e}function Er(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=De(e,t[i]);return n}var Ji=function(e,t){this.state=e,this.lookAhead=t},Fr=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};Fr.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return t!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Fr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Fr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Fr.fromSaved=function(e,t,n){return t instanceof Ji?new Fr(e,qr(e.mode,t.state),n,t.lookAhead):new Fr(e,qr(e.mode,t),n)},Fr.prototype.save=function(e){var t=e!==!1?qr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ji(t,this.maxLookAhead):t};function wi(e,t,n,i){var o=[e.state.modeGen],a={};Pa(e,t.text,e.doc.mode,n,function(h,d){return o.push(h,d)},a,i);for(var s=n.state,u=function(h){n.baseTokens=o;var d=e.state.overlays[h],v=1,C=0;n.state=!0,Pa(e,t.text,d.mode,n,function(k,H){for(var B=v;C<k;){var K=o[v];K>k&&o.splice(v,1,k,o[v+1],K),v+=2,C=Math.min(k,K)}if(!!H)if(d.opaque)o.splice(B,v-B,k,"overlay "+H),v=B+2;else for(;B<v;B+=2){var q=o[B+1];o[B+1]=(q?q+" ":"")+"overlay "+H}},a),n.state=s,n.baseTokens=null,n.baseTokenPos=1},f=0;f<e.state.overlays.length;++f)u(f);return{styles:o,classes:a.bgClass||a.textClass?a:null}}function Bl(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=xi(e,Qe(t)),o=t.text.length>e.options.maxHighlightLength&&qr(e.doc.mode,i.state),a=wi(e,t,i);o&&(i.state=o),t.stateAfter=i.save(!o),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function xi(e,t,n){var i=e.doc,o=e.display;if(!i.mode.startState)return new Fr(i,!0,t);var a=Ea(e,t,n),s=a>i.first&&we(i,a-1).stateAfter,u=s?Fr.fromSaved(i,s,a):new Fr(i,Se(i.mode),a);return i.iter(a,t,function(f){ji(e,f.text,u);var h=u.line;f.stateAfter=h==t-1||h%5==0||h>=o.viewFrom&&h<o.viewTo?u.save():null,u.nextLine()}),n&&(i.modeFrontier=u.line),u}function ji(e,t,n,i){var o=e.doc.mode,a=new ct(t,e.options.tabSize,n);for(a.start=a.pos=i||0,t==""&&Ao(o,n.state);!a.eol();)Ul(o,a,n.state),a.start=a.pos}function Ao(e,t){if(e.blankLine)return e.blankLine(t);if(!!e.innerMode){var n=gt(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Ul(e,t,n,i){for(var o=0;o<10;o++){i&&(i[0]=gt(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}var Po=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Eo(e,t,n,i){var o=e.doc,a=o.mode,s;t=De(o,t);var u=we(o,t.line),f=xi(e,t.line,n),h=new ct(u.text,e.options.tabSize,f),d;for(i&&(d=[]);(i||h.pos<t.ch)&&!h.eol();)h.start=h.pos,s=Ul(a,h,f.state),i&&d.push(new Po(h,s,qr(o.mode,f.state)));return i?d:new Po(h,s,f.state)}function Aa(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";t[i]==null?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Pa(e,t,n,i,o,a,s){var u=n.flattenSpans;u==null&&(u=e.options.flattenSpans);var f=0,h=null,d=new ct(t,e.options.tabSize,i),v,C=e.options.addModeClass&&[null];for(t==""&&Aa(Ao(n,i.state),a);!d.eol();){if(d.pos>e.options.maxHighlightLength?(u=!1,s&&ji(e,t,i,d.pos),d.pos=t.length,v=null):v=Aa(Ul(n,d,i.state,C),a),C){var k=C[0].name;k&&(v="m-"+(v?k+" "+v:k))}if(!u||h!=v){for(;f<d.start;)f=Math.min(d.start,f+5e3),o(f,h);h=v}d.start=d.pos}for(;f<d.pos;){var H=Math.min(d.pos,f+5e3);o(H,h),f=H}}function Ea(e,t,n){for(var i,o,a=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>s;--u){if(u<=a.first)return a.first;var f=we(a,u-1),h=f.stateAfter;if(h&&(!n||u+(h instanceof Ji?h.lookAhead:0)<=a.modeFrontier))return u;var d=me(f.text,null,e.options.tabSize);(o==null||i>d)&&(o=u-1,i=d)}return o}function rn(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var o=we(e,i).stateAfter;if(o&&(!(o instanceof Ji)||i+o.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}var Fa=!1,nn=!1;function Gl(){Fa=!0}function Vi(){nn=!0}function Kl(e,t,n){this.marker=e,this.from=t,this.to=n}function $i(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Gs(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Ks(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&e.markedSpans&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}function Fo(e,t,n){var i;if(e)for(var o=0;o<e.length;++o){var a=e[o],s=a.marker,u=a.from==null||(s.inclusiveLeft?a.from<=t:a.from<t);if(u||a.from==t&&s.type=="bookmark"&&(!n||!a.marker.insertLeft)){var f=a.to==null||(s.inclusiveRight?a.to>=t:a.to>t);(i||(i=[])).push(new Kl(s,a.from,f?null:a.to))}}return i}function Wa(e,t,n){var i;if(e)for(var o=0;o<e.length;++o){var a=e[o],s=a.marker,u=a.to==null||(s.inclusiveRight?a.to>=t:a.to>t);if(u||a.from==t&&s.type=="bookmark"&&(!n||a.marker.insertLeft)){var f=a.from==null||(s.inclusiveLeft?a.from<=t:a.from<t);(i||(i=[])).push(new Kl(s,f?null:a.from-t,a.to==null?null:a.to-t))}}return i}function Wo(e,t){if(t.full)return null;var n=c(e,t.from.line)&&we(e,t.from.line).markedSpans,i=c(e,t.to.line)&&we(e,t.to.line).markedSpans;if(!n&&!i)return null;var o=t.from.ch,a=t.to.ch,s=re(t.from,t.to)==0,u=Fo(n,o,s),f=Wa(i,a,s),h=t.text.length==1,d=Ue(t.text).length+(h?o:0);if(u)for(var v=0;v<u.length;++v){var C=u[v];if(C.to==null){var k=$i(f,C.marker);k?h&&(C.to=k.to==null?null:k.to+d):C.to=o}}if(f)for(var H=0;H<f.length;++H){var B=f[H];if(B.to!=null&&(B.to+=d),B.from==null){var K=$i(u,B.marker);K||(B.from=d,h&&(u||(u=[])).push(B))}else B.from+=d,h&&(u||(u=[])).push(B)}u&&(u=_o(u)),f&&f!=u&&(f=_o(f));var q=[u];if(!h){var $=t.text.length-2,ne;if($>0&&u)for(var ie=0;ie<u.length;++ie)u[ie].to==null&&(ne||(ne=[])).push(new Kl(u[ie].marker,null,null));for(var ve=0;ve<$;++ve)q.push(ne);q.push(f)}return q}function _o(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function _a(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(k){if(k.markedSpans)for(var H=0;H<k.markedSpans.length;++H){var B=k.markedSpans[H].marker;B.readOnly&&(!i||Pe(i,B)==-1)&&(i||(i=[])).push(B)}}),!i)return null;for(var o=[{from:t,to:n}],a=0;a<i.length;++a)for(var s=i[a],u=s.find(0),f=0;f<o.length;++f){var h=o[f];if(!(re(h.to,u.from)<0||re(h.from,u.to)>0)){var d=[f,1],v=re(h.from,u.from),C=re(h.to,u.to);(v<0||!s.inclusiveLeft&&!v)&&d.push({from:h.from,to:u.from}),(C>0||!s.inclusiveRight&&!C)&&d.push({from:u.to,to:h.to}),o.splice.apply(o,d),f+=d.length-3}}return o}function el(e){var t=e.markedSpans;if(!!t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function tl(e,t){if(!!t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Si(e){return e.inclusiveLeft?-1:0}function rl(e){return e.inclusiveRight?1:0}function Xl(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var i=e.find(),o=t.find(),a=re(i.from,o.from)||Si(e)-Si(t);if(a)return-a;var s=re(i.to,o.to)||rl(e)-rl(t);return s||t.id-e.id}function nl(e,t){var n=nn&&e.markedSpans,i;if(n)for(var o=void 0,a=0;a<n.length;++a)o=n[a],o.marker.collapsed&&(t?o.from:o.to)==null&&(!i||Xl(i,o.marker)<0)&&(i=o.marker);return i}function Ha(e){return nl(e,!0)}function il(e){return nl(e,!1)}function Wr(e,t){var n=nn&&e.markedSpans,i;if(n)for(var o=0;o<n.length;++o){var a=n[o];a.marker.collapsed&&(a.from==null||a.from<t)&&(a.to==null||a.to>t)&&(!i||Xl(i,a.marker)<0)&&(i=a.marker)}return i}function za(e,t,n,i,o){var a=we(e,t),s=nn&&a.markedSpans;if(s)for(var u=0;u<s.length;++u){var f=s[u];if(!!f.marker.collapsed){var h=f.marker.find(0),d=re(h.from,n)||Si(f.marker)-Si(o),v=re(h.to,i)||rl(f.marker)-rl(o);if(!(d>=0&&v<=0||d<=0&&v>=0)&&(d<=0&&(f.marker.inclusiveRight&&o.inclusiveLeft?re(h.to,n)>=0:re(h.to,n)>0)||d>=0&&(f.marker.inclusiveRight&&o.inclusiveLeft?re(h.from,i)<=0:re(h.from,i)<0)))return!0}}}function _r(e){for(var t;t=Ha(e);)e=t.find(-1,!0).line;return e}function Ho(e){for(var t;t=il(e);)e=t.find(1,!0).line;return e}function Ia(e){for(var t,n;t=il(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Zr(e,t){var n=we(e,t),i=_r(n);return n==i?t:Qe(i)}function Yl(e,t){if(t>e.lastLine())return t;var n=we(e,t),i;if(!Jt(e,n))return t;for(;i=il(n);)n=i.find(1,!0).line;return Qe(n)+1}function Jt(e,t){var n=nn&&t.markedSpans;if(n){for(var i=void 0,o=0;o<n.length;++o)if(i=n[o],!!i.marker.collapsed){if(i.from==null)return!0;if(!i.marker.widgetNode&&i.from==0&&i.marker.inclusiveLeft&&Ci(e,t,i))return!0}}}function Ci(e,t,n){if(n.to==null){var i=n.marker.find(1,!0);return Ci(e,i.line,$i(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o=void 0,a=0;a<t.markedSpans.length;++a)if(o=t.markedSpans[a],o.marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(o.to==null||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ci(e,t,o))return!0}function Hr(e){e=_r(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;t+=o.height}for(var a=n.parent;a;n=a,a=n.parent)for(var s=0;s<a.children.length;++s){var u=a.children[s];if(u==n)break;t+=u.height}return t}function ln(e){if(e.height==0)return 0;for(var t=e.text.length,n,i=e;n=Ha(i);){var o=n.find(0,!0);i=o.from.line,t+=o.from.ch-o.to.ch}for(i=e;n=il(i);){var a=n.find(0,!0);t-=i.text.length-a.from.ch,i=a.to.line,t+=i.text.length-a.to.ch}return t}function zo(e){var t=e.display,n=e.doc;t.maxLine=we(n,n.first),t.maxLineLength=ln(t.maxLine),t.maxLineChanged=!0,n.iter(function(i){var o=ln(i);o>t.maxLineLength&&(t.maxLineLength=o,t.maxLine=i)})}var ki=function(e,t,n){this.text=e,tl(this,t),this.height=n?n(this):1};ki.prototype.lineNo=function(){return Qe(this)},Tt(ki);function Xs(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),el(e),tl(e,n);var o=i?i(e):1;o!=e.height&&Ut(e,o)}function Ys(e){e.parent=null,el(e)}var Ra={},Ba={};function Ua(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ba:Ra;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ga(e,t){var n=Ae("span",null,null,x?"padding-right: .1px":null),i={pre:Ae("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var a=o?t.rest[o-1]:t.line,s=void 0;i.pos=0,i.addToken=Zs,Il(e.display.measure)&&(s=ye(a,e.doc.direction))&&(i.addToken=Qs(i.addToken,s)),i.map=[];var u=t!=e.display.externalMeasured&&Qe(a);ql(a,i,Bl(e,a,u)),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=sr(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=sr(a.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(No(e.display.measure))),o==0?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var f=i.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return ft(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=sr(i.pre.className,i.textClass||"")),i}function qs(e){var t=L("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Zs(e,t,n,i,o,a,s){if(!!t){var u=e.splitSpaces?Ka(t,e.trailingSpace):t,f=e.cm.state.specialChars,h=!1,d;if(!f.test(t))e.col+=t.length,d=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,d),m&&S<9&&(h=!0),e.pos+=t.length;else{d=document.createDocumentFragment();for(var v=0;;){f.lastIndex=v;var C=f.exec(t),k=C?C.index-v:t.length-v;if(k){var H=document.createTextNode(u.slice(v,v+k));m&&S<9?d.appendChild(L("span",[H])):d.appendChild(H),e.map.push(e.pos,e.pos+k,H),e.col+=k,e.pos+=k}if(!C)break;v+=k+1;var B=void 0;if(C[0]=="	"){var K=e.cm.options.tabSize,q=K-e.col%K;B=d.appendChild(L("span",jt(q),"cm-tab")),B.setAttribute("role","presentation"),B.setAttribute("cm-text","	"),e.col+=q}else C[0]=="\r"||C[0]==`
`?(B=d.appendChild(L("span",C[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),B.setAttribute("cm-text",C[0]),e.col+=1):(B=e.cm.options.specialCharPlaceholder(C[0]),B.setAttribute("cm-text",C[0]),m&&S<9?d.appendChild(L("span",[B])):d.appendChild(B),e.col+=1);e.map.push(e.pos,e.pos+1,B),e.pos++}}if(e.trailingSpace=u.charCodeAt(t.length-1)==32,n||i||o||h||a||s){var $=n||"";i&&($+=i),o&&($+=o);var ne=L("span",[d],$,a);if(s)for(var ie in s)s.hasOwnProperty(ie)&&ie!="style"&&ie!="class"&&ne.setAttribute(ie,s[ie]);return e.content.appendChild(ne)}e.content.appendChild(d)}}function Ka(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",o=0;o<e.length;o++){var a=e.charAt(o);a==" "&&n&&(o==e.length-1||e.charCodeAt(o+1)==32)&&(a="\xA0"),i+=a,n=a==" "}return i}function Qs(e,t){return function(n,i,o,a,s,u,f){o=o?o+" cm-force-border":"cm-force-border";for(var h=n.pos,d=h+i.length;;){for(var v=void 0,C=0;C<t.length&&(v=t[C],!(v.to>h&&v.from<=h));C++);if(v.to>=d)return e(n,i,o,a,s,u,f);e(n,i.slice(0,v.to-h),o,a,null,u,f),a=null,i=i.slice(v.to-h),h=v.to}}}function Io(e,t,n,i){var o=!i&&n.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!i&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function ql(e,t,n){var i=e.markedSpans,o=e.text,a=0;if(!i){for(var s=1;s<n.length;s+=2)t.addToken(t,o.slice(a,a=n[s]),Ua(n[s+1],t.cm.options));return}for(var u=o.length,f=0,h=1,d="",v,C,k=0,H,B,K,q,$;;){if(k==f){H=B=K=C="",$=null,q=null,k=1/0;for(var ne=[],ie=void 0,ve=0;ve<i.length;++ve){var ge=i[ve],ke=ge.marker;if(ke.type=="bookmark"&&ge.from==f&&ke.widgetNode)ne.push(ke);else if(ge.from<=f&&(ge.to==null||ge.to>f||ke.collapsed&&ge.to==f&&ge.from==f)){if(ge.to!=null&&ge.to!=f&&k>ge.to&&(k=ge.to,B=""),ke.className&&(H+=" "+ke.className),ke.css&&(C=(C?C+";":"")+ke.css),ke.startStyle&&ge.from==f&&(K+=" "+ke.startStyle),ke.endStyle&&ge.to==k&&(ie||(ie=[])).push(ke.endStyle,ge.to),ke.title&&(($||($={})).title=ke.title),ke.attributes)for(var Me in ke.attributes)($||($={}))[Me]=ke.attributes[Me];ke.collapsed&&(!q||Xl(q.marker,ke)<0)&&(q=ge)}else ge.from>f&&k>ge.from&&(k=ge.from)}if(ie)for(var ut=0;ut<ie.length;ut+=2)ie[ut+1]==k&&(B+=" "+ie[ut]);if(!q||q.from==f)for(var Ke=0;Ke<ne.length;++Ke)Io(t,0,ne[Ke]);if(q&&(q.from||0)==f){if(Io(t,(q.to==null?u+1:q.to)-f,q.marker,q.from==null),q.to==null)return;q.to==f&&(q=!1)}}if(f>=u)break;for(var it=Math.min(u,k);;){if(d){var pt=f+d.length;if(!q){var Xe=pt>it?d.slice(0,it-f):d;t.addToken(t,Xe,v?v+H:H,K,f+Xe.length==k?B:"",C,$)}if(pt>=it){d=d.slice(it-f),f=it;break}f=pt,K=""}d=o.slice(a,a=n[h++]),v=Ua(n[h++],t.cm.options)}}}function Yn(e,t,n){this.line=t,this.rest=Ia(t),this.size=this.rest?Qe(Ue(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Jt(e,t)}function Zl(e,t,n){for(var i=[],o,a=t;a<n;a=o){var s=new Yn(e.doc,we(e.doc,a),a);o=a+s.size,i.push(s)}return i}var Li=null;function Js(e){Li?Li.ops.push(e):e.ownsGroup=Li={ops:[e],delayedCallbacks:[]}}function ll(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var o=e.ops[i];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<t.length)}function Ht(e,t){var n=e.ownsGroup;if(!!n)try{ll(n)}finally{Li=null,t(n)}}var ol=null;function Ft(e,t){var n=vt(e,t);if(!!n.length){var i=Array.prototype.slice.call(arguments,2),o;Li?o=Li.delayedCallbacks:ol?o=ol:(o=ol=[],setTimeout(al,0));for(var a=function(u){o.push(function(){return n[u].apply(null,i)})},s=0;s<n.length;++s)a(s)}}function al(){var e=ol;ol=null;for(var t=0;t<e.length;++t)e[t]()}function Xa(e,t,n,i){for(var o=0;o<t.changes.length;o++){var a=t.changes[o];a=="text"?Ya(e,t):a=="gutter"?qa(e,t,n,i):a=="class"?Ro(e,t):a=="widget"&&Za(e,t,i)}t.changes=null}function Ti(e){return e.node==e.text&&(e.node=L("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),m&&S<8&&(e.node.style.zIndex=2)),e.node}function js(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Ti(t);t.background=i.insertBefore(L("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}function Ql(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ga(e,t)}function Ya(e,t){var n=t.text.className,i=Ql(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Ro(e,t)):n&&(t.text.className=n)}function Ro(e,t){js(e,t),t.line.wrapClass?Ti(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function qa(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Ti(t);t.gutterBackground=L("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Ti(t),u=t.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(u.setAttribute("aria-hidden","true"),e.display.input.setUneditable(u),s.insertBefore(u,t.text),t.line.gutterClass&&(u.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=u.appendChild(L("div",T(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var f=0;f<e.display.gutterSpecs.length;++f){var h=e.display.gutterSpecs[f].className,d=a.hasOwnProperty(h)&&a[h];d&&u.appendChild(L("div",[d],"CodeMirror-gutter-elt","left: "+i.gutterLeft[h]+"px; width: "+i.gutterWidth[h]+"px"))}}}function Za(e,t,n){t.alignable&&(t.alignable=null);for(var i=de("CodeMirror-linewidget"),o=t.node.firstChild,a=void 0;o;o=a)a=o.nextSibling,i.test(o.className)&&t.node.removeChild(o);Ja(e,t,n)}function Qa(e,t,n,i){var o=Ql(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),Ro(e,t),qa(e,t,n,i),Ja(e,t,i),t.node}function Ja(e,t,n){if(Mi(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)Mi(e,t.rest[i],t,n,!1)}function Mi(e,t,n,i,o){if(!!t.widgets)for(var a=Ti(n),s=0,u=t.widgets;s<u.length;++s){var f=u[s],h=L("div",[f.node],"CodeMirror-linewidget"+(f.className?" "+f.className:""));f.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),on(f,h,n,i),e.display.input.setUneditable(h),o&&f.above?a.insertBefore(h,n.gutter||n.text):a.appendChild(h),Ft(f,"redraw")}}function on(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(o-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function Tn(e){if(e.height!=null)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Je(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),fe(t.display.measure,L("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function zr(e,t){for(var n=Vt(t);n!=e.wrapper;n=n.parentNode)if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==e.sizer&&n!=e.mover)return!0}function sl(e){return e.lineSpace.offsetTop}function Sr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Mn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=fe(e.measure,L("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function Cr(e){return Qt-e.display.nativeBarWidth}function qn(e){return e.display.scroller.clientWidth-Cr(e)-e.display.barWidth}function Jl(e){return e.display.scroller.clientHeight-Cr(e)-e.display.barHeight}function Vs(e,t,n){var i=e.options.lineWrapping,o=i&&qn(e);if(!t.measure.heights||i&&t.measure.width!=o){var a=t.measure.heights=[];if(i){t.measure.width=o;for(var s=t.text.firstChild.getClientRects(),u=0;u<s.length-1;u++){var f=s[u],h=s[u+1];Math.abs(f.bottom-h.bottom)>2&&a.push((f.bottom+h.top)/2-n.top)}}a.push(n.bottom-n.top)}}function Bo(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var o=0;o<e.rest.length;o++)if(Qe(e.rest[o])>n)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}}function Uo(e,t){t=_r(t);var n=Qe(t),i=e.display.externalMeasured=new Yn(e.doc,t,n);i.lineN=n;var o=i.built=Ga(e,i);return i.text=o.pre,fe(e.display.lineMeasure,o.pre),i}function Zn(e,t,n,i){return Ir(e,Qn(e,t),n,i)}function kr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[or(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function Qn(e,t){var n=Qe(t),i=kr(e,n);i&&!i.text?i=null:i&&i.changes&&(Xa(e,i,n,no(e)),e.curOp.forceUpdate=!0),i||(i=Uo(e,t));var o=Bo(i,t,n);return{line:t,view:i,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Ir(e,t,n,i,o){t.before&&(n=-1);var a=n+(i||""),s;return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Vs(e,t.view,t.rect),t.hasHeights=!0),s=$a(e,t,n,i),s.bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:o?s.rtop:s.top,bottom:o?s.rbottom:s.bottom}}var ja={left:0,right:0,top:0,bottom:0};function Va(e,t,n){for(var i,o,a,s,u,f,h=0;h<e.length;h+=3)if(u=e[h],f=e[h+1],t<u?(o=0,a=1,s="left"):t<f?(o=t-u,a=o+1):(h==e.length-3||t==f&&e[h+3]>t)&&(a=f-u,o=a-1,t>=f&&(s="right")),o!=null){if(i=e[h+2],u==f&&n==(i.insertLeft?"left":"right")&&(s=n),n=="left"&&o==0)for(;h&&e[h-2]==e[h-3]&&e[h-1].insertLeft;)i=e[(h-=3)+2],s="left";if(n=="right"&&o==f-u)for(;h<e.length-3&&e[h+3]==e[h+4]&&!e[h+5].insertLeft;)i=e[(h+=3)+2],s="right";break}return{node:i,start:o,end:a,collapse:s,coverStart:u,coverEnd:f}}function $s(e,t){var n=ja;if(t=="left")for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var o=e.length-1;o>=0&&(n=e[o]).left==n.right;o--);return n}function $a(e,t,n,i){var o=Va(t.map,n,i),a=o.node,s=o.start,u=o.end,f=o.collapse,h;if(a.nodeType==3){for(var d=0;d<4;d++){for(;s&&pe(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+u<o.coverEnd&&pe(t.line.text.charAt(o.coverStart+u));)++u;if(m&&S<9&&s==0&&u==o.coverEnd-o.coverStart?h=a.parentNode.getBoundingClientRect():h=$s(Re(a,s,u).getClientRects(),i),h.left||h.right||s==0)break;u=s,s=s-1,f="right"}m&&S<11&&(h=es(e.display.measure,h))}else{s>0&&(f=i="right");var v;e.options.lineWrapping&&(v=a.getClientRects()).length>1?h=v[i=="right"?v.length-1:0]:h=a.getBoundingClientRect()}if(m&&S<9&&!s&&(!h||!h.left&&!h.right)){var C=a.parentNode.getClientRects()[0];C?h={left:C.left,right:C.left+On(e.display),top:C.top,bottom:C.bottom}:h=ja}for(var k=h.top-t.rect.top,H=h.bottom-t.rect.top,B=(k+H)/2,K=t.view.measure.heights,q=0;q<K.length-1&&!(B<K[q]);q++);var $=q?K[q-1]:0,ne=K[q],ie={left:(f=="right"?h.right:h.left)-t.rect.left,right:(f=="left"?h.left:h.right)-t.rect.left,top:$,bottom:ne};return!h.left&&!h.right&&(ie.bogus=!0),e.options.singleCursorHeightPerLine||(ie.rtop=k,ie.rbottom=H),ie}function es(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!en(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function Di(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Go(e){e.display.externalMeasure=null,G(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Di(e.display.view[t])}function Oi(e){Go(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function jl(e){return D&&X?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function ul(e){return D&&X?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Vl(e){var t=_r(e),n=t.widgets,i=0;if(n)for(var o=0;o<n.length;++o)n[o].above&&(i+=Tn(n[o]));return i}function Jn(e,t,n,i,o){if(!o){var a=Vl(t);n.top+=a,n.bottom+=a}if(i=="line")return n;i||(i="local");var s=Hr(t);if(i=="local"?s+=sl(e.display):s-=e.display.viewOffset,i=="page"||i=="window"){var u=e.display.lineSpace.getBoundingClientRect();s+=u.top+(i=="window"?0:ul(kt(e)));var f=u.left+(i=="window"?0:jl(kt(e)));n.left+=f,n.right+=f}return n.top+=s,n.bottom+=s,n}function Lr(e,t,n){if(n=="div")return t;var i=t.left,o=t.top;if(n=="page")i-=jl(kt(e)),o-=ul(kt(e));else if(n=="local"||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,o+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:o-s.top}}function fl(e,t,n,i,o){return i||(i=we(e.doc,t.line)),Jn(e,i,Zn(e,i,t.ch,o),n)}function pr(e,t,n,i,o,a){i=i||we(e.doc,t.line),o||(o=Qn(e,i));function s(H,B){var K=Ir(e,o,H,B?"right":"left",a);return B?K.left=K.right:K.right=K.left,Jn(e,i,K,n)}var u=ye(i,e.doc.direction),f=t.ch,h=t.sticky;if(f>=i.text.length?(f=i.text.length,h="before"):f<=0&&(f=0,h="after"),!u)return s(h=="before"?f-1:f,h=="before");function d(H,B,K){var q=u[B],$=q.level==1;return s(K?H-1:H,$!=K)}var v=Ne(u,f,h),C=tt,k=d(f,v,h=="before");return C!=null&&(k.other=d(f,C,h!="before")),k}function $l(e,t){var n=0;t=De(e.doc,t),e.options.lineWrapping||(n=On(e.display)*t.ch);var i=we(e.doc,t.line),o=Hr(i)+sl(e.display);return{left:n,right:n,top:o,bottom:o+i.height}}function eo(e,t,n,i,o){var a=I(e,t,n);return a.xRel=o,i&&(a.outside=i),a}function to(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,n<0)return eo(i.first,0,null,-1,-1);var o=xr(i,n),a=i.first+i.size-1;if(o>a)return eo(i.first+i.size-1,we(i,a).text.length,null,1,1);t<0&&(t=0);for(var s=we(i,o);;){var u=eu(e,s,o,t,n),f=Wr(s,u.ch+(u.xRel>0||u.outside>0?1:0));if(!f)return u;var h=f.find(1);if(h.line==o)return h;s=we(i,o=h.line)}}function ro(e,t,n,i){i-=Vl(t);var o=t.text.length,a=be(function(s){return Ir(e,n,s-1).bottom<=i},o,0);return o=be(function(s){return Ir(e,n,s).top>i},a,o),{begin:a,end:o}}function ts(e,t,n,i){n||(n=Qn(e,t));var o=Jn(e,t,Ir(e,n,i),"line").top;return ro(e,t,n,o)}function Ko(e,t,n,i){return e.bottom<=n?!1:e.top>n?!0:(i?e.left:e.right)>t}function eu(e,t,n,i,o){o-=Hr(t);var a=Qn(e,t),s=Vl(t),u=0,f=t.text.length,h=!0,d=ye(t,e.doc.direction);if(d){var v=(e.options.lineWrapping?Ni:jn)(e,t,n,a,d,i,o);h=v.level!=1,u=h?v.from:v.to-1,f=h?v.to:v.from-1}var C=null,k=null,H=be(function(ve){var ge=Ir(e,a,ve);return ge.top+=s,ge.bottom+=s,Ko(ge,i,o,!1)?(ge.top<=o&&ge.left<=i&&(C=ve,k=ge),!0):!1},u,f),B,K,q=!1;if(k){var $=i-k.left<k.right-i,ne=$==h;H=C+(ne?0:1),K=ne?"after":"before",B=$?k.left:k.right}else{!h&&(H==f||H==u)&&H++,K=H==0?"after":H==t.text.length?"before":Ir(e,a,H-(h?1:0)).bottom+s<=o==h?"after":"before";var ie=pr(e,I(n,H,K),"line",t,a);B=ie.left,q=o<ie.top?-1:o>=ie.bottom?1:0}return H=Le(t.text,H,1),eo(n,H,K,q,i-B)}function jn(e,t,n,i,o,a,s){var u=be(function(v){var C=o[v],k=C.level!=1;return Ko(pr(e,I(n,k?C.to:C.from,k?"before":"after"),"line",t,i),a,s,!0)},0,o.length-1),f=o[u];if(u>0){var h=f.level!=1,d=pr(e,I(n,h?f.from:f.to,h?"after":"before"),"line",t,i);Ko(d,a,s,!0)&&d.top>s&&(f=o[u-1])}return f}function Ni(e,t,n,i,o,a,s){var u=ro(e,t,i,s),f=u.begin,h=u.end;/\s/.test(t.text.charAt(h-1))&&h--;for(var d=null,v=null,C=0;C<o.length;C++){var k=o[C];if(!(k.from>=h||k.to<=f)){var H=k.level!=1,B=Ir(e,i,H?Math.min(h,k.to)-1:Math.max(f,k.from)).right,K=B<a?a-B+1e9:B-a;(!d||v>K)&&(d=k,v=K)}}return d||(d=o[o.length-1]),d.from<f&&(d={from:f,to:d.to,level:d.level}),d.to>h&&(d={from:d.from,to:h,level:d.level}),d}var Tr;function Dn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Tr==null){Tr=L("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Tr.appendChild(document.createTextNode("x")),Tr.appendChild(L("br"));Tr.appendChild(document.createTextNode("x"))}fe(e.measure,Tr);var n=Tr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),G(e.measure),n||1}function On(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=L("span","xxxxxxxxxx"),n=L("pre",[t],"CodeMirror-line-like");fe(e.measure,n);var i=t.getBoundingClientRect(),o=(i.right-i.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function no(e){for(var t=e.display,n={},i={},o=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s){var u=e.display.gutterSpecs[s].className;n[u]=a.offsetLeft+a.clientLeft+o,i[u]=a.clientWidth}return{fixedPos:hl(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function hl(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Nn(e){var t=Dn(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/On(e.display)-3);return function(o){if(Jt(e.doc,o))return 0;var a=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(a+=o.widgets[s].height);return n?a+(Math.ceil(o.text.length/i)||1)*t:a+t}}function an(e){var t=e.doc,n=Nn(e);t.iter(function(i){var o=n(i);o!=i.height&&Ut(i,o)})}function Et(e,t,n,i){var o=e.display;if(!n&&Vt(t).getAttribute("cm-not-content")=="true")return null;var a,s,u=o.lineSpace.getBoundingClientRect();try{a=t.clientX-u.left,s=t.clientY-u.top}catch{return null}var f=to(e,a,s),h;if(i&&f.xRel>0&&(h=we(e.doc,f.line).text).length==f.ch){var d=me(h,h.length,e.options.tabSize)-h.length;f=I(f.line,Math.max(0,Math.round((a-Mn(e.display).left)/On(e.display))-d))}return f}function or(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom,t<0))return null;for(var n=e.display.view,i=0;i<n.length;i++)if(t-=n[i].size,t<0)return i}function Dt(e,t,n,i){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),i||(i=0);var o=e.display;if(i&&n<o.viewTo&&(o.updateLineNumbers==null||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)nn&&Zr(e.doc,t)<o.viewTo&&An(e);else if(n<=o.viewFrom)nn&&Yl(e.doc,n+i)>o.viewFrom?An(e):(o.viewFrom+=i,o.viewTo+=i);else if(t<=o.viewFrom&&n>=o.viewTo)An(e);else if(t<=o.viewFrom){var a=cl(e,n,n+i,1);a?(o.view=o.view.slice(a.index),o.viewFrom=a.lineN,o.viewTo+=i):An(e)}else if(n>=o.viewTo){var s=cl(e,t,t,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):An(e)}else{var u=cl(e,t,t,-1),f=cl(e,n,n+i,1);u&&f?(o.view=o.view.slice(0,u.index).concat(Zl(e,u.lineN,f.lineN)).concat(o.view.slice(f.index)),o.viewTo+=i):An(e)}var h=o.externalMeasured;h&&(n<h.lineN?h.lineN+=i:t<h.lineN+h.size&&(o.externalMeasured=null))}function Rr(e,t,n){e.curOp.viewChanged=!0;var i=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[or(e,t)];if(a.node!=null){var s=a.changes||(a.changes=[]);Pe(s,n)==-1&&s.push(n)}}}function An(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function cl(e,t,n,i){var o=or(e,t),a,s=e.display.view;if(!nn||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var u=e.display.viewFrom,f=0;f<o;f++)u+=s[f].size;if(u!=t){if(i>0){if(o==s.length-1)return null;a=u+s[o].size-t,o++}else a=u-t;t+=a,n+=a}for(;Zr(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function dl(e,t,n){var i=e.display,o=i.view;o.length==0||t>=i.viewTo||n<=i.viewFrom?(i.view=Zl(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=Zl(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(or(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(Zl(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,or(e,n)))),i.viewTo=n}function Xo(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var o=t[i];!o.hidden&&(!o.node||o.changes)&&++n}return n}function Vn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function pl(e,t){t===void 0&&(t=!0);var n=e.doc,i={},o=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var u=0;u<n.sel.ranges.length;u++)if(!(!t&&u==n.sel.primIndex)){var f=n.sel.ranges[u];if(!(f.from().line>=e.display.viewTo||f.to().line<e.display.viewFrom)){var h=f.empty();if(s){var d=s(e,f);d&&Yo(e,d,o)}else(h||e.options.showCursorWhenSelecting)&&Yo(e,f.head,o);h||rs(e,f,a)}}return i}function Yo(e,t,n){var i=pr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=n.appendChild(L("div","\xA0","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=fl(e,t,"div",null,null),s=a.right-a.left;o.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var u=n.appendChild(L("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));u.style.display="",u.style.left=i.other.left+"px",u.style.top=i.other.top+"px",u.style.height=(i.other.bottom-i.other.top)*.85+"px"}}function Ai(e,t){return e.top-t.top||e.left-t.left}function rs(e,t,n){var i=e.display,o=e.doc,a=document.createDocumentFragment(),s=Mn(e.display),u=s.left,f=Math.max(i.sizerWidth,qn(e)-i.sizer.offsetLeft)-s.right,h=o.direction=="ltr";function d(ne,ie,ve,ge){ie<0&&(ie=0),ie=Math.round(ie),ge=Math.round(ge),a.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+ne+`px;
                             top: `+ie+"px; width: "+(ve==null?f-ne:ve)+`px;
                             height: `+(ge-ie)+"px"))}function v(ne,ie,ve){var ge=we(o,ne),ke=ge.text.length,Me,ut;function Ke(Xe,lt){return fl(e,I(ne,Xe),"div",ge,lt)}function it(Xe,lt,Ye){var _e=ts(e,ge,null,Xe),$e=lt=="ltr"==(Ye=="after")?"left":"right",yt=Ye=="after"?_e.begin:_e.end-(/\s/.test(ge.text.charAt(_e.end-1))?2:1);return Ke(yt,$e)[$e]}var pt=ye(ge,o.direction);return We(pt,ie||0,ve==null?ke:ve,function(Xe,lt,Ye,_e){var $e=Ye=="ltr",yt=Ke(Xe,$e?"left":"right"),Nt=Ke(lt-1,$e?"right":"left"),At=ie==null&&Xe==0,Zt=ve==null&&lt==ke,et=_e==0,Nr=!pt||_e==pt.length-1;if(Nt.top-yt.top<=3){var wt=(h?At:Zt)&&et,Sn=(h?Zt:At)&&Nr,tr=wt?u:($e?yt:Nt).left,Pt=Sn?f:($e?Nt:yt).right;d(tr,yt.top,Pt-tr,yt.bottom)}else{var Ar,Xt,To,Cu;$e?(Ar=h&&At&&et?u:yt.left,Xt=h?f:it(Xe,Ye,"before"),To=h?u:it(lt,Ye,"after"),Cu=h&&Zt&&Nr?f:Nt.right):(Ar=h?it(Xe,Ye,"before"):u,Xt=!h&&At&&et?f:yt.right,To=!h&&Zt&&Nr?u:Nt.left,Cu=h?it(lt,Ye,"after"):f),d(Ar,yt.top,Xt-Ar,yt.bottom),yt.bottom<Nt.top&&d(u,yt.bottom,null,Nt.top),d(To,Nt.top,Cu-To,Nt.bottom)}(!Me||Ai(yt,Me)<0)&&(Me=yt),Ai(Nt,Me)<0&&(Me=Nt),(!ut||Ai(yt,ut)<0)&&(ut=yt),Ai(Nt,ut)<0&&(ut=Nt)}),{start:Me,end:ut}}var C=t.from(),k=t.to();if(C.line==k.line)v(C.line,C.ch,k.ch);else{var H=we(o,C.line),B=we(o,k.line),K=_r(H)==_r(B),q=v(C.line,C.ch,K?H.text.length+1:null).end,$=v(k.line,K?0:null,k.ch).start;K&&(q.top<$.top-2?(d(q.right,q.top,null,q.bottom),d(u,$.top,$.left,$.bottom)):d(q.right,q.top,$.left-q.right,q.bottom)),q.bottom<$.top&&d(u,q.bottom,null,$.top)}n.appendChild(a)}function vl(e){if(!!e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||$n(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function io(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Pi(e))}function Pn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&$n(e))},100)}function Pi(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(ft(e,"focus",e,t),e.state.focused=!0,je(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),x&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),vl(e))}function $n(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ft(e,"blur",e,t),e.state.focused=!1,ue(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ei(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),o=t.lineDiv.getBoundingClientRect().top,a=0,s=0;s<t.view.length;s++){var u=t.view[s],f=e.options.lineWrapping,h=void 0,d=0;if(!u.hidden){if(o+=u.line.height,m&&S<8){var v=u.node.offsetTop+u.node.offsetHeight;h=v-n,n=v}else{var C=u.node.getBoundingClientRect();h=C.bottom-C.top,!f&&u.text.firstChild&&(d=u.text.firstChild.getBoundingClientRect().right-C.left-1)}var k=u.line.height-h;if((k>.005||k<-.005)&&(o<i&&(a-=k),Ut(u.line,h),ns(u.line),u.rest))for(var H=0;H<u.rest.length;H++)ns(u.rest[H]);if(d>e.display.sizerWidth){var B=Math.ceil(d/On(e.display));B>e.display.maxLineLength&&(e.display.maxLineLength=B,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function ns(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function lo(e,t,n){var i=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-sl(e));var o=n&&n.bottom!=null?n.bottom:i+e.wrapper.clientHeight,a=xr(t,i),s=xr(t,o);if(n&&n.ensure){var u=n.ensure.from.line,f=n.ensure.to.line;u<a?(a=u,s=xr(t,Hr(we(t,u))+e.wrapper.clientHeight)):Math.min(f,t.lastLine())>=s&&(a=xr(t,Hr(we(t,f))-e.wrapper.clientHeight),s=f)}return{from:a,to:Math.max(s,a+1)}}function tu(e,t){if(!qe(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),o=null,a=n.wrapper.ownerDocument;if(t.top+i.top<0?o=!0:t.bottom+i.top>(a.defaultView.innerHeight||a.documentElement.clientHeight)&&(o=!1),o!=null&&!ee){var s=L("div","\u200B",null,`position: absolute;
                         top: `+(t.top-n.viewOffset-sl(e.display))+`px;
                         height: `+(t.bottom-t.top+Cr(e)+n.barHeight)+`px;
                         left: `+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(o),e.display.lineSpace.removeChild(s)}}}function qo(e,t,n,i){i==null&&(i=0);var o;!e.options.lineWrapping&&t==n&&(n=t.sticky=="before"?I(t.line,t.ch+1,"before"):t,t=t.ch?I(t.line,t.sticky=="before"?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var s=!1,u=pr(e,t),f=!n||n==t?u:pr(e,n);o={left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-i,right:Math.max(u.left,f.left),bottom:Math.max(u.bottom,f.bottom)+i};var h=En(e,o),d=e.doc.scrollTop,v=e.doc.scrollLeft;if(h.scrollTop!=null&&(Br(e,h.scrollTop),Math.abs(e.doc.scrollTop-d)>1&&(s=!0)),h.scrollLeft!=null&&(vr(e,h.scrollLeft),Math.abs(e.doc.scrollLeft-v)>1&&(s=!0)),!s)break}return o}function Zo(e,t){var n=En(e,t);n.scrollTop!=null&&Br(e,n.scrollTop),n.scrollLeft!=null&&vr(e,n.scrollLeft)}function En(e,t){var n=e.display,i=Dn(e.display);t.top<0&&(t.top=0);var o=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:n.scroller.scrollTop,a=Jl(e),s={};t.bottom-t.top>a&&(t.bottom=t.top+a);var u=e.doc.height+Sr(n),f=t.top<i,h=t.bottom>u-i;if(t.top<o)s.scrollTop=f?0:t.top;else if(t.bottom>o+a){var d=Math.min(t.top,(h?u:t.bottom)-a);d!=o&&(s.scrollTop=d)}var v=e.options.fixedGutter?0:n.gutters.offsetWidth,C=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:n.scroller.scrollLeft-v,k=qn(e)-n.gutters.offsetWidth,H=t.right-t.left>k;return H&&(t.right=t.left+k),t.left<10?s.scrollLeft=0:t.left<C?s.scrollLeft=Math.max(0,t.left+v-(H?0:10)):t.right>k+C-3&&(s.scrollLeft=t.right+(H?0:10)-k),s}function ti(e,t){t!=null&&(Wn(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ei(e){Wn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Fn(e,t,n){(t!=null||n!=null)&&Wn(e),t!=null&&(e.curOp.scrollLeft=t),n!=null&&(e.curOp.scrollTop=n)}function is(e,t){Wn(e),e.curOp.scrollToPos=t}function Wn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=$l(e,t.from),i=$l(e,t.to);Qo(e,n,i,t.margin)}}function Qo(e,t,n,i){var o=En(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Fn(e,o.scrollLeft,o.scrollTop)}function Br(e,t){Math.abs(e.doc.scrollTop-t)<2||(A||yl(e,{top:t}),Fi(e,t,!0),A&&yl(e),Hn(e,100))}function Fi(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),!(e.display.scroller.scrollTop==t&&!n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function vr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i)&&(e.doc.scrollLeft=t,uo(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function sn(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Sr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Cr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Mr=function(e,t,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=o.tabIndex=-1,e(i),e(o),se(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),se(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&S<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Mr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var o=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var a=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(i==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Mr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Mr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Mr.prototype.zeroWidthHack=function(){var e=V&&!J?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Oe,this.disableVert=new Oe},Mr.prototype.enableZeroWidthBar=function(e,t,n){e.style.visibility="";function i(){var o=e.getBoundingClientRect(),a=n=="vert"?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1);a!=e?e.style.visibility="hidden":t.set(1e3,i)}t.set(1e3,i)},Mr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Wi=function(){};Wi.prototype.update=function(){return{bottom:0,right:0}},Wi.prototype.setScrollLeft=function(){},Wi.prototype.setScrollTop=function(){},Wi.prototype.clear=function(){};function ri(e,t){t||(t=sn(e));var n=e.display.barWidth,i=e.display.barHeight;Jo(e,t);for(var o=0;o<4&&n!=e.display.barWidth||i!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&ei(e),Jo(e,sn(e)),n=e.display.barWidth,i=e.display.barHeight}function Jo(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}var ls={native:Mr,null:Wi};function _n(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&ue(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ls[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),se(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){n=="horizontal"?vr(e,t):Br(e,t)},e),e.display.scrollbars.addClass&&je(e.display.wrapper,e.display.scrollbars.addClass)}var ni=0;function ii(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ni,markArrays:null},Js(e.curOp)}function li(e){var t=e.curOp;t&&Ht(t,function(n){for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;ru(n)})}function ru(e){for(var t=e.ops,n=0;n<t.length;n++)nu(t[n]);for(var i=0;i<t.length;i++)iu(t[i]);for(var o=0;o<t.length;o++)lu(t[o]);for(var a=0;a<t.length;a++)ar(t[a]);for(var s=0;s<t.length;s++)zt(t[s])}function nu(e){var t=e.cm,n=t.display;au(t),e.updateMaxLine&&zo(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oo(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function iu(e){e.updatedDisplay=e.mustUpdate&&gl(e.cm,e.update)}function lu(e){var t=e.cm,n=t.display;e.updatedDisplay&&ei(t),e.barMeasure=sn(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Zn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Cr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-qn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ar(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&vr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==Fe(kt(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&ri(t,e.barMeasure),e.updatedDisplay&&so(t,e.barMeasure),e.selectionChanged&&vl(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&io(e.cm)}function zt(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&as(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),e.scrollTop!=null&&Fi(t,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&vr(t,e.scrollLeft,!0,!0),e.scrollToPos){var o=qo(t,De(i,e.scrollToPos.from),De(i,e.scrollToPos.to),e.scrollToPos.margin);tu(t,o)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var u=0;u<a.length;++u)a[u].lines.length||ft(a[u],"hide");if(s)for(var f=0;f<s.length;++f)s[f].lines.length&&ft(s[f],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ft(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function dt(e,t){if(e.curOp)return t();ii(e);try{return t()}finally{li(e)}}function Ze(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ii(e);try{return t.apply(e,arguments)}finally{li(e)}}}function Wt(e){return function(){if(this.curOp)return e.apply(this,arguments);ii(this);try{return e.apply(this,arguments)}finally{li(this)}}}function It(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ii(t);try{return e.apply(this,arguments)}finally{li(t)}}}function Hn(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Be(ou,e))}function ou(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=xi(e,t.highlightFrontier),o=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var s=a.styles,u=a.text.length>e.options.maxHighlightLength?qr(t.mode,i.state):null,f=wi(e,a,i,!0);u&&(i.state=u),a.styles=f.styles;var h=a.styleClasses,d=f.classes;d?a.styleClasses=d:h&&(a.styleClasses=null);for(var v=!s||s.length!=a.styles.length||h!=d&&(!h||!d||h.bgClass!=d.bgClass||h.textClass!=d.textClass),C=0;!v&&C<s.length;++C)v=s[C]!=a.styles[C];v&&o.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&ji(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Hn(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),o.length&&dt(e,function(){for(var a=0;a<o.length;a++)Rr(e,o[a],"text")})}}var oo=function(e,t,n){var i=e.display;this.viewport=t,this.visible=lo(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=qn(e),this.force=n,this.dims=no(e),this.events=[]};oo.prototype.signal=function(e,t){rt(e,t)&&this.events.push(arguments)},oo.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ft.apply(null,this.events[e])};function au(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Cr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Cr(e)+"px",t.scrollbarsClipped=!0)}function jo(e){if(e.hasFocus())return null;var t=Fe(kt(e));if(!t||!Je(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=Yt(e).getSelection();i.anchorNode&&i.extend&&Je(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function os(e){if(!(!e||!e.activeElt||e.activeElt==Fe(e.activeElt.ownerDocument))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Je(document.body,e.anchorNode)&&Je(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,n=t.defaultView.getSelection(),i=t.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),n.removeAllRanges(),n.addRange(i),n.extend(e.focusNode,e.focusOffset)}}function gl(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return An(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&Xo(e)==0)return!1;$o(e)&&(An(e),t.dims=no(e));var o=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(o,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(o,n.viewTo)),nn&&(a=Zr(e.doc,a),s=Yl(e.doc,s));var u=a!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;dl(e,a,s),n.viewOffset=Hr(we(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=Xo(e);if(!u&&f==0&&!t.force&&n.renderedView==n.view&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var h=jo(e);return f>4&&(n.lineDiv.style.display="none"),Vo(e,n.updateLineNumbers,t.dims),f>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,os(h),G(n.cursorDiv),G(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,u&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Hn(e,400)),n.updateLineNumbers=null,!0}function as(e,t){for(var n=t.viewport,i=!0;;i=!1){if(!i||!e.options.lineWrapping||t.oldDisplayWidth==qn(e)){if(n&&n.top!=null&&(n={top:Math.min(e.doc.height+Sr(e.display)-Jl(e),n.top)}),t.visible=lo(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}else i&&(t.visible=lo(e.display,e.doc,n));if(!gl(e,t))break;ei(e);var o=sn(e);Vn(e),ri(e,o),so(e,o),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function yl(e,t){var n=new oo(e,t);if(gl(e,n)){ei(e),as(e,n);var i=sn(e);Vn(e),ri(e,i),so(e,i),n.finish()}}function Vo(e,t,n){var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function u(H){var B=H.nextSibling;return x&&V&&e.display.currentWheelTarget==H?H.style.display="none":H.parentNode.removeChild(H),B}for(var f=i.view,h=i.viewFrom,d=0;d<f.length;d++){var v=f[d];if(!v.hidden)if(!v.node||v.node.parentNode!=a){var C=Qa(e,v,h,n);a.insertBefore(C,s)}else{for(;s!=v.node;)s=u(s);var k=o&&t!=null&&t<=h&&v.lineNumber;v.changes&&(Pe(v.changes,"gutter")>-1&&(k=!1),Xa(e,v,h,n)),k&&(G(v.lineNumber),v.lineNumber.appendChild(document.createTextNode(T(e.options,h)))),s=v.node.nextSibling}h+=v.size}for(;s;)s=u(s)}function ao(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Ft(e,"gutterChanged",e)}function so(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Cr(e)+"px"}function uo(e){var t=e.display,n=t.view;if(!(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))){for(var i=hl(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,a=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=a),n[s].gutterBackground&&(n[s].gutterBackground.style.left=a));var u=n[s].alignable;if(u)for(var f=0;f<u.length;f++)u[f].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+o+"px")}}function $o(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=T(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,s=o.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ao(e.display),!0}return!1}function oi(e,t){for(var n=[],i=!1,o=0;o<e.length;o++){var a=e[o],s=null;if(typeof a!="string"&&(s=a.style,a=a.className),a=="CodeMirror-linenumbers")if(t)i=!0;else continue;n.push({className:a,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function ss(e){var t=e.gutters,n=e.gutterSpecs;G(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var o=n[i],a=o.className,s=o.style,u=t.appendChild(L("div",null,"CodeMirror-gutter "+a));s&&(u.style.cssText=s),a=="CodeMirror-linenumbers"&&(e.lineGutter=u,u.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ao(e)}function zn(e){ss(e.display),Dt(e),uo(e)}function un(e,t,n,i){var o=this;this.input=n,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=Ae("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=Ae("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var a=Ae("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[a],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: "+Qt+"px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),D&&R>=105&&(o.wrapper.style.clipPath="inset(0px)"),o.wrapper.setAttribute("translate","no"),m&&S<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),!x&&!(A&&te)&&(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=oi(i.gutters,i.lineNumbers),ss(o),n.init(o)}var ml=0,fn=null;m?fn=-.53:A?fn=15:D?fn=-.7:E&&(fn=-1/3);function ea(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return t==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),n==null&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:n==null&&(n=e.wheelDelta),{x:t,y:n}}function gr(e){var t=ea(e);return t.x*=fn,t.y*=fn,t}function at(e,t){D&&R==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var n=ea(t),i=n.x,o=n.y,a=fn;t.deltaMode===0&&(i=t.deltaX,o=t.deltaY,a=1);var s=e.display,u=s.scroller,f=u.scrollWidth>u.clientWidth,h=u.scrollHeight>u.clientHeight;if(!!(i&&f||o&&h)){if(o&&V&&x){e:for(var d=t.target,v=s.view;d!=u;d=d.parentNode)for(var C=0;C<v.length;C++)if(v[C].node==d){e.display.currentWheelTarget=d;break e}}if(i&&!A&&!F&&a!=null){o&&h&&Br(e,Math.max(0,u.scrollTop+o*a)),vr(e,Math.max(0,u.scrollLeft+i*a)),(!o||o&&h)&&xt(t),s.wheelStartX=null;return}if(o&&a!=null){var k=o*a,H=e.doc.scrollTop,B=H+s.wrapper.clientHeight;k<0?H=Math.max(0,H+k-50):B=Math.min(e.doc.height,B+k+50),yl(e,{top:H,bottom:B})}ml<20&&t.deltaMode!==0&&(s.wheelStartX==null?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout(function(){if(s.wheelStartX!=null){var K=u.scrollLeft-s.wheelStartX,q=u.scrollTop-s.wheelStartY,$=q&&s.wheelDY&&q/s.wheelDY||K&&s.wheelDX&&K/s.wheelDX;s.wheelStartX=s.wheelStartY=null,!!$&&(fn=(fn*ml+$)/(ml+1),++ml)}},200)):(s.wheelDX+=i,s.wheelDY+=o))}}var Mt=function(e,t){this.ranges=e,this.primIndex=t};Mt.prototype.primary=function(){return this.ranges[this.primIndex]},Mt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!Te(n.anchor,i.anchor)||!Te(n.head,i.head))return!1}return!0},Mt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ie(He(this.ranges[t].anchor),He(this.ranges[t].head));return new Mt(e,this.primIndex)},Mt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Mt.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(re(t,i.from())>=0&&re(e,i.to())<=0)return n}return-1};var Ie=function(e,t){this.anchor=e,this.head=t};Ie.prototype.from=function(){return xe(this.anchor,this.head)},Ie.prototype.to=function(){return nt(this.anchor,this.head)},Ie.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Gt(e,t,n){var i=e&&e.options.selectionsMayTouch,o=t[n];t.sort(function(C,k){return re(C.from(),k.from())}),n=Pe(t,o);for(var a=1;a<t.length;a++){var s=t[a],u=t[a-1],f=re(u.to(),s.from());if(i&&!s.empty()?f>0:f>=0){var h=xe(u.from(),s.from()),d=nt(u.to(),s.to()),v=u.empty()?s.from()==s.head:u.from()==u.head;a<=n&&--n,t.splice(--a,2,new Ie(v?d:h,v?h:d))}}return new Mt(t,n)}function hn(e,t){return new Mt([new Ie(e,t||e)],0)}function Qr(e){return e.text?I(e.from.line+e.text.length-1,Ue(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function ta(e,t){if(re(e,t.from)<0)return e;if(re(e,t.to)<=0)return Qr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Qr(t).ch-t.to.ch),I(n,i)}function ra(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var o=e.sel.ranges[i];n.push(new Ie(ta(o.anchor,t),ta(o.head,t)))}return Gt(e.cm,n,e.sel.primIndex)}function fo(e,t,n){return e.line==t.line?I(n.line,e.ch-t.ch+n.ch):I(n.line+(e.line-t.line),e.ch)}function bl(e,t,n){for(var i=[],o=I(e.first,0),a=o,s=0;s<t.length;s++){var u=t[s],f=fo(u.from,o,a),h=fo(Qr(u),o,a);if(o=u.to,a=h,n=="around"){var d=e.sel.ranges[s],v=re(d.head,d.anchor)<0;i[s]=new Ie(v?h:f,v?f:h)}else i[s]=new Ie(f,f)}return new Mt(i,e.sel.primIndex)}function ho(e){e.doc.mode=tn(e.options,e.doc.modeOption),ai(e)}function ai(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Hn(e,100),e.state.modeGen++,e.curOp&&Dt(e)}function cn(e,t){return t.from.ch==0&&t.to.ch==0&&Ue(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function co(e,t,n,i){function o($){return n?n[$]:null}function a($,ne,ie){Xs($,ne,ie,i),Ft($,"change",$,t)}function s($,ne){for(var ie=[],ve=$;ve<ne;++ve)ie.push(new ki(h[ve],o(ve),i));return ie}var u=t.from,f=t.to,h=t.text,d=we(e,u.line),v=we(e,f.line),C=Ue(h),k=o(h.length-1),H=f.line-u.line;if(t.full)e.insert(0,s(0,h.length)),e.remove(h.length,e.size-h.length);else if(cn(e,t)){var B=s(0,h.length-1);a(v,v.text,k),H&&e.remove(u.line,H),B.length&&e.insert(u.line,B)}else if(d==v)if(h.length==1)a(d,d.text.slice(0,u.ch)+C+d.text.slice(f.ch),k);else{var K=s(1,h.length-1);K.push(new ki(C+d.text.slice(f.ch),k,i)),a(d,d.text.slice(0,u.ch)+h[0],o(0)),e.insert(u.line+1,K)}else if(h.length==1)a(d,d.text.slice(0,u.ch)+h[0]+v.text.slice(f.ch),o(0)),e.remove(u.line+1,H);else{a(d,d.text.slice(0,u.ch)+h[0],o(0)),a(v,C+v.text.slice(f.ch),k);var q=s(1,h.length-1);H>1&&e.remove(u.line+1,H-1),e.insert(u.line+1,q)}Ft(e,"change",e,t)}function dn(e,t,n){function i(o,a,s){if(o.linked)for(var u=0;u<o.linked.length;++u){var f=o.linked[u];if(f.doc!=a){var h=s&&f.sharedHist;n&&!h||(t(f.doc,h),i(f.doc,o,h))}}}i(e,null,!0)}function us(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,an(e),ho(e),wl(e),e.options.direction=t.direction,e.options.lineWrapping||zo(e),e.options.mode=t.modeOption,Dt(e)}function wl(e){(e.doc.direction=="rtl"?je:ue)(e.display.lineDiv,"CodeMirror-rtl")}function na(e){dt(e,function(){wl(e),Dt(e)})}function xl(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function ia(e,t){var n={from:He(t.from),to:Qr(t),text:Bt(e,t.from,t.to)};return cs(e,n,t.from.line,t.to.line+1),dn(e,function(i){return cs(i,n,t.from.line,t.to.line+1)},!0),n}function la(e){for(;e.length;){var t=Ue(e);if(t.ranges)e.pop();else break}}function su(e,t){if(t)return la(e.done),Ue(e.done);if(e.done.length&&!Ue(e.done).ranges)return Ue(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ue(e.done)}function fs(e,t,n,i){var o=e.history;o.undone.length=0;var a=+new Date,s,u;if((o.lastOp==i||o.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&o.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||t.origin.charAt(0)=="*"))&&(s=su(o,o.lastOp==i)))u=Ue(s.changes),re(t.from,t.to)==0&&re(t.from,u.to)==0?u.to=Qr(t):s.changes.push(ia(e,t));else{var f=Ue(o.done);for((!f||!f.ranges)&&vo(e.sel,o.done),s={changes:[ia(e,t)],generation:o.generation},o.done.push(s);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=i,o.lastOrigin=o.lastSelOrigin=t.origin,u||ft(e,"historyAdded")}function po(e,t,n,i){var o=t.charAt(0);return o=="*"||o=="+"&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function hs(e,t,n,i){var o=e.history,a=i&&i.origin;n==o.lastSelOp||a&&o.lastSelOrigin==a&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==a||po(e,a,Ue(o.done),t))?o.done[o.done.length-1]=t:vo(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=a,o.lastSelOp=n,i&&i.clearRedo!==!1&&la(o.undone)}function vo(e,t){var n=Ue(t);n&&n.ranges&&n.equals(e)||t.push(e)}function cs(e,t,n,i){var o=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(s){s.markedSpans&&((o||(o=t["spans_"+e.id]={}))[a]=s.markedSpans),++a})}function ds(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function _i(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],o=0;o<t.text.length;++o)i.push(ds(n[o]));return i}function go(e,t){var n=_i(e,t),i=Wo(e,t);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var a=n[o],s=i[o];if(a&&s){e:for(var u=0;u<s.length;++u){for(var f=s[u],h=0;h<a.length;++h)if(a[h].marker==f.marker)continue e;a.push(f)}}else s&&(n[o]=s)}return n}function pn(e,t,n){for(var i=[],o=0;o<e.length;++o){var a=e[o];if(a.ranges){i.push(n?Mt.prototype.deepCopy.call(a):a);continue}var s=a.changes,u=[];i.push({changes:u});for(var f=0;f<s.length;++f){var h=s[f],d=void 0;if(u.push({from:h.from,to:h.to,text:h.text}),t)for(var v in h)(d=v.match(/^spans_(\d+)$/))&&Pe(t,Number(d[1]))>-1&&(Ue(u)[v]=h[v],delete h[v])}}return i}function yo(e,t,n,i){if(i){var o=e.anchor;if(n){var a=re(t,o)<0;a!=re(n,o)<0?(o=t,t=n):a!=re(t,n)<0&&(t=n)}return new Ie(o,t)}else return new Ie(n||t,t)}function Hi(e,t,n,i,o){o==null&&(o=e.cm&&(e.cm.display.shift||e.extend)),Kt(e,new Mt([yo(e.sel.primary(),t,n,o)],0),i)}function oa(e,t,n){for(var i=[],o=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=yo(e.sel.ranges[a],t[a],null,o);var s=Gt(e.cm,i,e.sel.primIndex);Kt(e,s,n)}function aa(e,t,n,i){var o=e.sel.ranges.slice(0);o[t]=n,Kt(e,Gt(e.cm,o,e.sel.primIndex),i)}function sa(e,t,n,i){Kt(e,hn(t,n),i)}function qt(e,t,n){var i={ranges:t.ranges,update:function(o){this.ranges=[];for(var a=0;a<o.length;a++)this.ranges[a]=new Ie(De(e,o[a].anchor),De(e,o[a].head))},origin:n&&n.origin};return ft(e,"beforeSelectionChange",e,i),e.cm&&ft(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Gt(e.cm,i.ranges,i.ranges.length-1):t}function Sl(e,t,n){var i=e.history.done,o=Ue(i);o&&o.ranges?(i[i.length-1]=t,Cl(e,t,n)):Kt(e,t,n)}function Kt(e,t,n){Cl(e,t,n),hs(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Cl(e,t,n){(rt(e,"beforeSelectionChange")||e.cm&&rt(e.cm,"beforeSelectionChange"))&&(t=qt(e,t,n));var i=n&&n.bias||(re(t.primary().head,e.sel.primary().head)<0?-1:1);ua(e,kl(e,t,i,!0)),!(n&&n.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&Ei(e.cm)}function ua(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,br(e.cm)),Ft(e,"cursorActivity",e))}function si(e){ua(e,kl(e,e.sel,null,!1))}function kl(e,t,n,i){for(var o,a=0;a<t.ranges.length;a++){var s=t.ranges[a],u=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],f=Ll(e,s.anchor,u&&u.anchor,n,i),h=s.head==s.anchor?f:Ll(e,s.head,u&&u.head,n,i);(o||f!=s.anchor||h!=s.head)&&(o||(o=t.ranges.slice(0,a)),o[a]=new Ie(f,h))}return o?Gt(e.cm,o,t.primIndex):t}function ui(e,t,n,i,o){var a=we(e,t.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var u=a.markedSpans[s],f=u.marker,h="selectLeft"in f?!f.selectLeft:f.inclusiveLeft,d="selectRight"in f?!f.selectRight:f.inclusiveRight;if((u.from==null||(h?u.from<=t.ch:u.from<t.ch))&&(u.to==null||(d?u.to>=t.ch:u.to>t.ch))){if(o&&(ft(f,"beforeCursorEnter"),f.explicitlyCleared))if(a.markedSpans){--s;continue}else break;if(!f.atomic)continue;if(n){var v=f.find(i<0?1:-1),C=void 0;if((i<0?d:h)&&(v=fa(e,v,-i,v&&v.line==t.line?a:null)),v&&v.line==t.line&&(C=re(v,n))&&(i<0?C<0:C>0))return ui(e,v,t,i,o)}var k=f.find(i<0?-1:1);return(i<0?h:d)&&(k=fa(e,k,i,k.line==t.line?a:null)),k?ui(e,k,t,i,o):null}}return t}function Ll(e,t,n,i,o){var a=i||1,s=ui(e,t,n,a,o)||!o&&ui(e,t,n,a,!0)||ui(e,t,n,-a,o)||!o&&ui(e,t,n,-a,!0);return s||(e.cantEdit=!0,I(e.first,0))}function fa(e,t,n,i){return n<0&&t.ch==0?t.line>e.first?De(e,I(t.line-1)):null:n>0&&t.ch==(i||we(e,t.line)).text.length?t.line<e.first+e.size-1?I(t.line+1,0):null:new I(t.line,t.ch+n)}function fi(e){e.setSelection(I(e.firstLine(),0),I(e.lastLine()),ot)}function ha(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(o,a,s,u){o&&(i.from=De(e,o)),a&&(i.to=De(e,a)),s&&(i.text=s),u!==void 0&&(i.origin=u)}),ft(e,"beforeChange",e,i),e.cm&&ft(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function vn(e,t,n){if(e.cm){if(!e.cm.curOp)return Ze(e.cm,vn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!((rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"))&&(t=ha(e,t,!0),!t))){var i=Fa&&!n&&_a(e,t.from,t.to);if(i)for(var o=i.length-1;o>=0;--o)ca(e,{from:i[o].from,to:i[o].to,text:o?[""]:t.text,origin:t.origin});else ca(e,t)}}function ca(e,t){if(!(t.text.length==1&&t.text[0]==""&&re(t.from,t.to)==0)){var n=ra(e,t);fs(e,t,n,e.cm?e.cm.curOp.id:NaN),Jr(e,t,n,Wo(e,t));var i=[];dn(e,function(o,a){!a&&Pe(i,o.history)==-1&&(Ii(o.history,t),i.push(o.history)),Jr(o,t,null,Wo(o,t))})}}function In(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!(i&&!n)){for(var o=e.history,a,s=e.sel,u=t=="undo"?o.done:o.undone,f=t=="undo"?o.undone:o.done,h=0;h<u.length&&(a=u[h],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));h++);if(h!=u.length){for(o.lastOrigin=o.lastSelOrigin=null;;)if(a=u.pop(),a.ranges){if(vo(a,f),n&&!a.equals(e.sel)){Kt(e,a,{clearRedo:!1});return}s=a}else if(i){u.push(a);return}else break;var d=[];vo(s,f),f.push({changes:d,generation:o.generation}),o.generation=a.generation||++o.maxGeneration;for(var v=rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"),C=function(B){var K=a.changes[B];if(K.origin=t,v&&!ha(e,K,!1))return u.length=0,{};d.push(ia(e,K));var q=B?ra(e,K):Ue(u);Jr(e,K,q,go(e,K)),!B&&e.cm&&e.cm.scrollIntoView({from:K.from,to:Qr(K)});var $=[];dn(e,function(ne,ie){!ie&&Pe($,ne.history)==-1&&(Ii(ne.history,K),$.push(ne.history)),Jr(ne,K,null,go(ne,K))})},k=a.changes.length-1;k>=0;--k){var H=C(k);if(H)return H.v}}}}function ps(e,t){if(t!=0&&(e.first+=t,e.sel=new Mt(Gr(e.sel.ranges,function(o){return new Ie(I(o.anchor.line+t,o.anchor.ch),I(o.head.line+t,o.head.ch))}),e.sel.primIndex),e.cm)){Dt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Rr(e.cm,i,"gutter")}}function Jr(e,t,n,i){if(e.cm&&!e.cm.curOp)return Ze(e.cm,Jr)(e,t,n,i);if(t.to.line<e.first){ps(e,t.text.length-1-(t.to.line-t.from.line));return}if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);ps(e,o),t={from:I(e.first,0),to:I(t.to.line+o,t.to.ch),text:[Ue(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:I(a,we(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Bt(e,t.from,t.to),n||(n=ra(e,t)),e.cm?vs(e.cm,t,i):co(e,t,i),Cl(e,n,ot),e.cantEdit&&Ll(e,I(e.firstLine(),0))&&(e.cantEdit=!1)}}function vs(e,t,n){var i=e.doc,o=e.display,a=t.from,s=t.to,u=!1,f=a.line;e.options.lineWrapping||(f=Qe(_r(we(i,a.line))),i.iter(f,s.line+1,function(k){if(k==o.maxLine)return u=!0,!0})),i.sel.contains(t.from,t.to)>-1&&br(e),co(i,t,n,Nn(e)),e.options.lineWrapping||(i.iter(f,a.line+t.text.length,function(k){var H=ln(k);H>o.maxLineLength&&(o.maxLine=k,o.maxLineLength=H,o.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),rn(i,a.line),Hn(e,400);var h=t.text.length-(s.line-a.line)-1;t.full?Dt(e):a.line==s.line&&t.text.length==1&&!cn(e.doc,t)?Rr(e,a.line,"text"):Dt(e,a.line,s.line+1,h);var d=rt(e,"changes"),v=rt(e,"change");if(v||d){var C={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};v&&Ft(e,"change",e,C),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(C)}e.display.selForContextMenu=null}function hi(e,t,n,i,o){var a;i||(i=n),re(i,n)<0&&(a=[i,n],n=a[0],i=a[1]),typeof t=="string"&&(t=e.splitLines(t)),vn(e,{from:n,to:i,text:t,origin:o})}function da(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function zi(e,t,n,i){for(var o=0;o<e.length;++o){var a=e[o],s=!0;if(a.ranges){a.copied||(a=e[o]=a.deepCopy(),a.copied=!0);for(var u=0;u<a.ranges.length;u++)da(a.ranges[u].anchor,t,n,i),da(a.ranges[u].head,t,n,i);continue}for(var f=0;f<a.changes.length;++f){var h=a.changes[f];if(n<h.from.line)h.from=I(h.from.line+i,h.from.ch),h.to=I(h.to.line+i,h.to.ch);else if(t<=h.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}function Ii(e,t){var n=t.from.line,i=t.to.line,o=t.text.length-(i-n)-1;zi(e.done,n,i,o),zi(e.undone,n,i,o)}function gn(e,t,n,i){var o=t,a=t;return typeof t=="number"?a=we(e,dr(e,t)):o=Qe(t),o==null?null:(i(a,o)&&e.cm&&Rr(e.cm,o,n),a)}function yn(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}yn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var o=this.lines[n];this.height-=o.height,Ys(o),Ft(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}};function Ri(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var o=e[i];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}Ri.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,o==a&&(this.children.splice(n--,1),i.parent=null),(t-=a)==0)break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof yn))){var u=[];this.collapse(u),this.children=[new yn(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=this.children[i],a=o.chunkSize();if(e<=a){if(o.insertInner(e,t,n),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,u=s;u<o.lines.length;){var f=new yn(o.lines.slice(u,u+=25));o.height-=f.height,this.children.splice(++i,0,f),f.parent=this}o.lines=o.lines.slice(0,s),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ri(t);if(e.parent){e.size-=n.size,e.height-=n.height;var o=Pe(e.parent.children,e);e.parent.children.splice(o+1,0,n)}else{var i=new Ri(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var o=this.children[i],a=o.chunkSize();if(e<a){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return!0;if((t-=s)==0)break;e=0}else e-=a}}};var Tl=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};Tl.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Qe(n);if(!(i==null||!t)){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(n.widgets=null);var a=Tn(this);Ut(n,Math.max(0,n.height-a)),e&&(dt(e,function(){pa(e,n,-a),Rr(e,i,"widget")}),Ft(e,"lineWidgetCleared",e,this,i))}},Tl.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var o=Tn(this)-t;!o||(Jt(this.doc,i)||Ut(i,i.height+o),n&&dt(n,function(){n.curOp.forceUpdate=!0,pa(n,i,o),Ft(n,"lineWidgetChanged",n,e,Qe(i))}))},Tt(Tl);function pa(e,t,n){Hr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ti(e,n)}function Rn(e,t,n,i){var o=new Tl(e,n,i),a=e.cm;return a&&o.noHScroll&&(a.display.alignWidgets=!0),gn(e,t,"widget",function(s){var u=s.widgets||(s.widgets=[]);if(o.insertAt==null?u.push(o):u.splice(Math.min(u.length,Math.max(0,o.insertAt)),0,o),o.line=s,a&&!Jt(e,s)){var f=Hr(s)<e.scrollTop;Ut(s,s.height+Tn(o)),f&&ti(a,o.height),a.curOp.forceUpdate=!0}return!0}),a&&Ft(a,"lineWidgetAdded",a,o,typeof t=="number"?t:Qe(t)),o}var ci=0,Dr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ci};Dr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&ii(e),rt(this,"clear")){var n=this.find();n&&Ft(this,"clear",n.from,n.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var s=this.lines[a],u=$i(s.markedSpans,this);e&&!this.collapsed?Rr(e,Qe(s),"text"):e&&(u.to!=null&&(o=Qe(s)),u.from!=null&&(i=Qe(s))),s.markedSpans=Gs(s.markedSpans,u),u.from==null&&this.collapsed&&!Jt(this.doc,s)&&e&&Ut(s,Dn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var h=_r(this.lines[f]),d=ln(h);d>e.display.maxLineLength&&(e.display.maxLine=h,e.display.maxLineLength=d,e.display.maxLineChanged=!0)}i!=null&&e&&this.collapsed&&Dt(e,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&si(e.doc)),e&&Ft(e,"markerCleared",e,this,i,o),t&&li(e),this.parent&&this.parent.clear()}},Dr.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var a=this.lines[o],s=$i(a.markedSpans,this);if(s.from!=null&&(n=I(t?a:Qe(a),s.from),e==-1))return n;if(s.to!=null&&(i=I(t?a:Qe(a),s.to),e==1))return i}return n&&{from:n,to:i}},Dr.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;!t||!i||dt(i,function(){var o=t.line,a=Qe(t.line),s=kr(i,a);if(s&&(Di(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Jt(n.doc,o)&&n.height!=null){var u=n.height;n.height=null;var f=Tn(n)-u;f&&Ut(o,o.height+f)}Ft(i,"markerChanged",i,e)})},Dr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||Pe(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Dr.prototype.detachLine=function(e){if(this.lines.splice(Pe(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Tt(Dr);function Bi(e,t,n,i,o){if(i&&i.shared)return uu(e,t,n,i,o);if(e.cm&&!e.cm.curOp)return Ze(e.cm,Bi)(e,t,n,i,o);var a=new Dr(e,o),s=re(t,n);if(i&&Ce(i,a,!1),s>0||s==0&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=Ae("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(za(e,t.line,t,n,a)||t.line!=n.line&&za(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Vi()}a.addToHistory&&fs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var u=t.line,f=e.cm,h;if(e.iter(u,n.line+1,function(v){f&&a.collapsed&&!f.options.lineWrapping&&_r(v)==f.display.maxLine&&(h=!0),a.collapsed&&u!=t.line&&Ut(v,0),Ks(v,new Kl(a,u==t.line?t.ch:null,u==n.line?n.ch:null),e.cm&&e.cm.curOp),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(v){Jt(e,v)&&Ut(v,0)}),a.clearOnEnter&&se(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(Gl(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++ci,a.atomic=!0),f){if(h&&(f.curOp.updateMaxLine=!0),a.collapsed)Dt(f,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var d=t.line;d<=n.line;d++)Rr(f,d,"text");a.atomic&&si(f.doc),Ft(f,"markerAdded",f,a)}return a}var Ui=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ui.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ft(this,"clear")}},Ui.prototype.find=function(e,t){return this.primary.find(e,t)},Tt(Ui);function uu(e,t,n,i,o){i=Ce(i),i.shared=!1;var a=[Bi(e,t,n,i,o)],s=a[0],u=i.widgetNode;return dn(e,function(f){u&&(i.widgetNode=u.cloneNode(!0)),a.push(Bi(f,De(f,t),De(f,n),i,o));for(var h=0;h<f.linked.length;++h)if(f.linked[h].isParent)return;s=Ue(a)}),new Ui(a,s)}function gs(e){return e.findMarks(I(e.first,0),e.clipPos(I(e.lastLine())),function(t){return t.parent})}function fu(e,t){for(var n=0;n<t.length;n++){var i=t[n],o=i.find(),a=e.clipPos(o.from),s=e.clipPos(o.to);if(re(a,s)){var u=Bi(e,a,s,i.primary,i.primary.type);i.markers.push(u),u.parent=i}}}function $t(e){for(var t=function(i){var o=e[i],a=[o.primary.doc];dn(o.primary.doc,function(f){return a.push(f)});for(var s=0;s<o.markers.length;s++){var u=o.markers[s];Pe(a,u.doc)==-1&&(u.parent=null,o.markers.splice(s--,1))}},n=0;n<e.length;n++)t(n)}var ys=0,er=function(e,t,n,i,o){if(!(this instanceof er))return new er(e,t,n,i,o);n==null&&(n=0),Ri.call(this,[new yn([new ki("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=I(n,0);this.sel=hn(a),this.history=new xl(null),this.id=++ys,this.modeOption=t,this.lineSep=i,this.direction=o=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),co(this,{from:a,to:a,text:e}),Kt(this,hn(a),ot)};er.prototype=U(Ri.prototype,{constructor:er,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ve(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:It(function(e){var t=I(this.first,0),n=this.first+this.size-1;vn(this,{from:t,to:I(n,we(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Fn(this.cm,0,0),Kt(this,hn(t),ot)}),replaceRange:function(e,t,n,i){t=De(this,t),n=n?De(this,n):t,hi(this,e,t,n,i)},getRange:function(e,t,n){var i=Bt(this,De(this,e),De(this,t));return n===!1?i:n===""?i.join(""):i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(c(this,e))return we(this,e)},getLineNumber:function(e){return Qe(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=we(this,e)),_r(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return De(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:It(function(e,t,n){sa(this,De(this,typeof e=="number"?I(e,t||0):e),null,n)}),setSelection:It(function(e,t,n){sa(this,De(this,e),De(this,t||e),n)}),extendSelection:It(function(e,t,n){Hi(this,De(this,e),t&&De(this,t),n)}),extendSelections:It(function(e,t){oa(this,Er(this,e),t)}),extendSelectionsBy:It(function(e,t){var n=Gr(this.sel.ranges,e);oa(this,Er(this,n),t)}),setSelections:It(function(e,t,n){if(!!e.length){for(var i=[],o=0;o<e.length;o++)i[o]=new Ie(De(this,e[o].anchor),De(this,e[o].head||e[o].anchor));t==null&&(t=Math.min(e.length-1,this.sel.primIndex)),Kt(this,Gt(this.cm,i,t),n)}}),addSelection:It(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new Ie(De(this,e),De(this,t||e))),Kt(this,Gt(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var t=this.sel.ranges,n,i=0;i<t.length;i++){var o=Bt(this,t[i].from(),t[i].to());n=n?n.concat(o):o}return e===!1?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=Bt(this,n[i].from(),n[i].to());e!==!1&&(o=o.join(e||this.lineSeparator())),t[i]=o}return t},replaceSelection:function(e,t,n){for(var i=[],o=0;o<this.sel.ranges.length;o++)i[o]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:It(function(e,t,n){for(var i=[],o=this.sel,a=0;a<o.ranges.length;a++){var s=o.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:n}}for(var u=t&&t!="end"&&bl(this,i,t),f=i.length-1;f>=0;f--)vn(this,i[f]);u?Sl(this,u):this.cm&&Ei(this.cm)}),undo:It(function(){In(this,"undo")}),redo:It(function(){In(this,"redo")}),undoSelection:It(function(){In(this,"undo",!0)}),redoSelection:It(function(){In(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new xl(this.history),dn(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:pn(this.history.done),undone:pn(this.history.undone)}},setHistory:function(e){var t=this.history=new xl(this.history);t.done=pn(e.done.slice(0),null,!0),t.undone=pn(e.undone.slice(0),null,!0)},setGutterMarker:It(function(e,t,n){return gn(this,e,"gutter",function(i){var o=i.gutterMarkers||(i.gutterMarkers={});return o[t]=n,!n&&oe(o)&&(i.gutterMarkers=null),!0})}),clearGutter:It(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&gn(t,n,"gutter",function(){return n.gutterMarkers[e]=null,oe(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if(typeof e=="number"){if(!c(this,e)||(t=e,e=we(this,e),!e))return null}else if(t=Qe(e),t==null)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:It(function(e,t,n){return gn(this,e,t=="gutter"?"gutter":"class",function(i){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!i[o])i[o]=n;else{if(de(n).test(i[o]))return!1;i[o]+=" "+n}return!0})}),removeLineClass:It(function(e,t,n){return gn(this,e,t=="gutter"?"gutter":"class",function(i){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",a=i[o];if(a)if(n==null)i[o]=null;else{var s=a.match(de(n));if(!s)return!1;var u=s.index+s[0].length;i[o]=a.slice(0,s.index)+(!s.index||u==a.length?"":" ")+a.slice(u)||null}else return!1;return!0})}),addLineWidget:It(function(e,t,n){return Rn(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Bi(this,De(this,e),De(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=De(this,e),Bi(this,e,e,n,"bookmark")},findMarksAt:function(e){e=De(this,e);var t=[],n=we(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(o.from==null||o.from<=e.ch)&&(o.to==null||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=De(this,e),t=De(this,t);var i=[],o=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var u=0;u<s.length;u++){var f=s[u];!(f.to!=null&&o==e.line&&e.ch>=f.to||f.from==null&&o!=e.line||f.from!=null&&o==t.line&&f.from>=t.ch)&&(!n||n(f.marker))&&i.push(f.marker.parent||f.marker)}++o}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)n[i].from!=null&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(o){var a=o.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),De(this,I(n,t))},indexFromPos:function(e){e=De(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(i){t+=i.text.length+n}),t},copy:function(e){var t=new er(Ve(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var i=new er(Ve(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],fu(i,gs(this)),i},unlinkDoc:function(e){if(e instanceof bt&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),$t(gs(this));break}}if(e.history==this.history){var i=[e.id];dn(e,function(o){return i.push(o.id)},!0),e.history=new xl(null),e.history.done=pn(this.history.done,i),e.history.undone=pn(this.history.undone,i)}},iterLinkedDocs:function(e){dn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Qi(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:It(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&na(this.cm))})}),er.prototype.eachLine=er.prototype.iter;var ms=0;function hu(e){var t=this;if(va(t),!(qe(t,e)||zr(t.display,e))){xt(e),m&&(ms=+new Date);var n=Et(t,e,!0),i=e.dataTransfer.files;if(!(!n||t.isReadOnly()))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,a=Array(o),s=0,u=function(){++s==o&&Ze(t,function(){n=De(t.doc,n);var k={from:n,to:n,text:t.doc.splitLines(a.filter(function(H){return H!=null}).join(t.doc.lineSeparator())),origin:"paste"};vn(t.doc,k),Sl(t.doc,hn(De(t.doc,n),De(t.doc,Qr(k))))})()},f=function(k,H){if(t.options.allowDropFileTypes&&Pe(t.options.allowDropFileTypes,k.type)==-1){u();return}var B=new FileReader;B.onerror=function(){return u()},B.onload=function(){var K=B.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(K)){u();return}a[H]=K,u()},B.readAsText(k)},h=0;h<i.length;h++)f(i[h],h);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(function(){return t.display.input.focus()},20);return}try{var d=e.dataTransfer.getData("Text");if(d){var v;if(t.state.draggingText&&!t.state.draggingText.copy&&(v=t.listSelections()),Cl(t.doc,hn(n,n)),v)for(var C=0;C<v.length;++C)hi(t.doc,"",v[C].anchor,v[C].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch{}}}}function bs(e,t){if(m&&(!e.state.draggingText||+new Date-ms<100)){Kr(t);return}if(!(qe(e,t)||zr(e.display,t))&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!E)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",F&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),F&&n.parentNode.removeChild(n)}}function ws(e,t){var n=Et(e,t);if(!!n){var i=document.createDocumentFragment();Yo(e,n,i),e.display.dragCursor||(e.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),fe(e.display.dragCursor,i)}}function va(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function xs(e){if(!!document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var o=t[i].CodeMirror;o&&n.push(o)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var Ss=!1;function cu(){Ss||(Bn(),Ss=!0)}function Bn(){var e;se(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,xs(Ml)},100))}),se(window,"blur",function(){return xs($n)})}function Ml(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ur={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},mn=0;mn<10;mn++)Ur[mn+48]=Ur[mn+96]=String(mn);for(var Or=65;Or<=90;Or++)Ur[Or]=String.fromCharCode(Or);for(var Dl=1;Dl<=12;Dl++)Ur[Dl+111]=Ur[Dl+63235]="F"+Dl;var bn={};bn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},bn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},bn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},bn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},bn.default=V?bn.macDefault:bn.pcDefault;function Gi(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,o,a,s=0;s<t.length-1;s++){var u=t[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))o=!0;else throw new Error("Unrecognized modifier name: "+u)}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function Cs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if(i=="..."){delete e[n];continue}for(var o=Gr(n.split(" "),Gi),a=0;a<o.length;a++){var s=void 0,u=void 0;a==o.length-1?(u=o.join(" "),s=i):(u=o.slice(0,a+1).join(" "),s="...");var f=t[u];if(!f)t[u]=s;else if(f!=s)throw new Error("Inconsistent bindings for "+u)}delete e[n]}for(var h in t)e[h]=t[h];return e}function di(e,t,n,i){t=Ki(t);var o=t.call?t.call(e,i):t[e];if(o===!1)return"nothing";if(o==="...")return"multi";if(o!=null&&n(o))return"handled";if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]")return di(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var s=di(e,t.fallthrough[a],n,i);if(s)return s}}}function ga(e){var t=typeof e=="string"?e:Ur[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function Ol(e,t,n){var i=e;return t.altKey&&i!="Alt"&&(e="Alt-"+e),(j?t.metaKey:t.ctrlKey)&&i!="Ctrl"&&(e="Ctrl-"+e),(j?t.ctrlKey:t.metaKey)&&i!="Mod"&&(e="Cmd-"+e),!n&&t.shiftKey&&i!="Shift"&&(e="Shift-"+e),e}function pi(e,t){if(F&&e.keyCode==34&&e.char)return!1;var n=Ur[e.keyCode];return n==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(n=e.code),Ol(n,e,t))}function Ki(e){return typeof e=="string"?bn[e]:e}function Un(e,t){for(var n=e.doc.sel.ranges,i=[],o=0;o<n.length;o++){for(var a=t(n[o]);i.length&&re(a.from,Ue(i).to)<=0;){var s=i.pop();if(re(s.from,a.from)<0){a.from=s.from;break}}i.push(a)}dt(e,function(){for(var u=i.length-1;u>=0;u--)hi(e.doc,"",i[u].from,i[u].to,"+delete");Ei(e)})}function Nl(e,t,n){var i=Le(e.text,t+n,n);return i<0||i>e.text.length?null:i}function ya(e,t,n){var i=Nl(e,t.ch,n);return i==null?null:new I(t.line,i,n<0?"after":"before")}function vi(e,t,n,i,o){if(e){t.doc.direction=="rtl"&&(o=-o);var a=ye(n,t.doc.direction);if(a){var s=o<0?Ue(a):a[0],u=o<0==(s.level==1),f=u?"after":"before",h;if(s.level>0||t.doc.direction=="rtl"){var d=Qn(t,n);h=o<0?n.text.length-1:0;var v=Ir(t,d,h).top;h=be(function(C){return Ir(t,d,C).top==v},o<0==(s.level==1)?s.from:s.to-1,h),f=="before"&&(h=Nl(n,h,1))}else h=o<0?s.to:s.from;return new I(i,h,f)}}return new I(i,o<0?n.text.length:0,o<0?"before":"after")}function ks(e,t,n,i){var o=ye(t,e.doc.direction);if(!o)return ya(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Ne(o,n.ch,n.sticky),s=o[a];if(e.doc.direction=="ltr"&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return ya(t,n,i);var u=function(q,$){return Nl(t,q instanceof I?q.ch:q,$)},f,h=function(q){return e.options.lineWrapping?(f=f||Qn(e,t),ts(e,t,f,q)):{begin:0,end:t.text.length}},d=h(n.sticky=="before"?u(n,-1):n.ch);if(e.doc.direction=="rtl"||s.level==1){var v=s.level==1==i<0,C=u(n,v?1:-1);if(C!=null&&(v?C<=s.to&&C<=d.end:C>=s.from&&C>=d.begin)){var k=v?"before":"after";return new I(n.line,C,k)}}var H=function(q,$,ne){for(var ie=function(Me,ut){return ut?new I(n.line,u(Me,1),"before"):new I(n.line,Me,"after")};q>=0&&q<o.length;q+=$){var ve=o[q],ge=$>0==(ve.level!=1),ke=ge?ne.begin:u(ne.end,-1);if(ve.from<=ke&&ke<ve.to||(ke=ge?ve.from:u(ve.to,-1),ne.begin<=ke&&ke<ne.end))return ie(ke,ge)}},B=H(a+i,i,d);if(B)return B;var K=i>0?d.end:u(d.begin,-1);return K!=null&&!(i>0&&K==t.text.length)&&(B=H(i>0?0:o.length-1,i,h(K)),B)?B:null}var Al={selectAll:fi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ot)},killLine:function(e){return Un(e,function(t){if(t.empty()){var n=we(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:I(t.head.line+1,0)}:{from:t.head,to:I(t.head.line,n)}}else return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Un(e,function(t){return{from:I(t.from().line,0),to:De(e.doc,I(t.to().line+1,0))}})},delLineLeft:function(e){return Un(e,function(t){return{from:I(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return Un(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){return Un(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(I(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(I(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ma(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ls(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return mo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},hr)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},hr)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?Ls(e,t.head):i},hr)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,o=0;o<n.length;o++){var a=n[o].from(),s=me(e.getLine(a.line),a.ch,i);t.push(jt(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return dt(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(!!t[i].empty()){var o=t[i].head,a=we(e.doc,o.line).text;if(a){if(o.ch==a.length&&(o=new I(o.line,o.ch-1)),o.ch>0)o=new I(o.line,o.ch+1),e.replaceRange(a.charAt(o.ch-1)+a.charAt(o.ch-2),I(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var s=we(e.doc,o.line-1).text;s&&(o=new I(o.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),I(o.line-1,s.length-1),o,"+transpose"))}}n.push(new Ie(o,o))}e.setSelections(n)})},newlineAndIndent:function(e){return dt(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Ei(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ma(e,t){var n=we(e.doc,t),i=_r(n);return i!=n&&(t=Qe(i)),vi(!0,e,i,t,1)}function mo(e,t){var n=we(e.doc,t),i=Ho(n);return i!=n&&(t=Qe(i)),vi(!0,e,n,t,-1)}function Ls(e,t){var n=ma(e,t.line),i=we(e.doc,n.line),o=ye(i,e.doc.direction);if(!o||o[0].level==0){var a=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=a&&t.ch;return I(n.line,s?0:a,n.sticky)}return n}function bo(e,t,n){if(typeof t=="string"&&(t=Al[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=ze}finally{e.display.shift=i,e.state.suppressEdits=!1}return o}function Pl(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var o=di(t,e.state.keyMaps[i],n,e);if(o)return o}return e.options.extraKeys&&di(t,e.options.extraKeys,n,e)||di(t,e.options.keyMap,n,e)}var Ts=new Oe;function Xi(e,t,n,i){var o=e.state.keySeq;if(o){if(ga(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Ts.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),Ms(e,o+" "+t,n,i))return!0}return Ms(e,t,n,i)}function Ms(e,t,n,i){var o=Pl(e,t,i);return o=="multi"&&(e.state.keySeq=t),o=="handled"&&Ft(e,"keyHandled",e,t,n),(o=="handled"||o=="multi")&&(xt(n),vl(e)),!!o}function wo(e,t){var n=pi(t,!0);return n?t.shiftKey&&!e.state.keySeq?Xi(e,"Shift-"+n,t,function(i){return bo(e,i,!0)})||Xi(e,n,t,function(i){if(typeof i=="string"?/^go[A-Z]/.test(i):i.motion)return bo(e,i)}):Xi(e,n,t,function(i){return bo(e,i)}):!1}function Ds(e,t,n){return Xi(e,"'"+n+"'",t,function(i){return bo(e,i,!0)})}var ba=null;function wa(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&(t.curOp.focus=Fe(kt(t)),!qe(t,e))){m&&S<11&&e.keyCode==27&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var i=wo(t,e);F&&(ba=i?n:null,!i&&n==88&&!Yr&&(V?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),A&&!V&&!i&&n==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Os(t)}}function Os(e){var t=e.display.lineDiv;je(t,"CodeMirror-crosshair");function n(i){(i.keyCode==18||!i.altKey)&&(ue(t,"CodeMirror-crosshair"),Ge(document,"keyup",n),Ge(document,"mouseover",n))}se(document,"keyup",n),se(document,"mouseover",n)}function Ns(e){e.keyCode==16&&(this.doc.sel.shift=!1),qe(this,e)}function xo(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField())&&!(zr(t.display,e)||qe(t,e)||e.ctrlKey&&!e.altKey||V&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(F&&n==ba){ba=null,xt(e);return}if(!(F&&(!e.which||e.which<10)&&wo(t,e))){var o=String.fromCharCode(i==null?n:i);o!="\b"&&(Ds(t,e,o)||t.display.input.onKeyPress(e))}}}var El=400,gi=function(e,t,n){this.time=e,this.pos=t,this.button=n};gi.prototype.compare=function(e,t,n){return this.time+El>e&&re(t,this.pos)==0&&n==this.button};var Fl,Yi;function du(e,t){var n=+new Date;return Yi&&Yi.compare(n,e,t)?(Fl=Yi=null,"triple"):Fl&&Fl.compare(n,e,t)?(Yi=new gi(n,e,t),Fl=null,"double"):(Fl=new gi(n,e,t),Yi=null,"single")}function As(e){var t=this,n=t.display;if(!(qe(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,zr(n,e)){x||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));return}if(!Ca(t,e)){var i=Et(t,e),o=Kn(e),a=i?du(i,o):"single";Yt(t).focus(),o==1&&t.state.selectingText&&t.state.selectingText(e),!(i&&pu(t,o,i,a,e))&&(o==1?i?Ps(t,i,a,e):Vt(e)==n.scroller&&xt(e):o==2?(i&&Hi(t.doc,i),setTimeout(function(){return n.input.focus()},20)):o==3&&(he?t.display.input.onContextMenu(e):Pn(t)))}}}function pu(e,t,n,i,o){var a="Click";return i=="double"?a="Double"+a:i=="triple"&&(a="Triple"+a),a=(t==1?"Left":t==2?"Middle":"Right")+a,Xi(e,Ol(a,o),o,function(s){if(typeof s=="string"&&(s=Al[s]),!s)return!1;var u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),u=s(e,n)!=ze}finally{e.state.suppressEdits=!1}return u})}function vu(e,t,n){var i=e.getOption("configureMouse"),o=i?i(e,t,n):{};if(o.unit==null){var a=le?n.shiftKey&&n.metaKey:n.altKey;o.unit=a?"rectangle":t=="single"?"char":t=="double"?"word":"line"}return(o.extend==null||e.doc.extend)&&(o.extend=e.doc.extend||n.shiftKey),o.addNew==null&&(o.addNew=V?n.metaKey:n.ctrlKey),o.moveOnDrag==null&&(o.moveOnDrag=!(V?n.altKey:n.ctrlKey)),o}function Ps(e,t,n,i){m?setTimeout(Be(io,e),0):e.curOp.focus=Fe(kt(e));var o=vu(e,n,i),a=e.doc.sel,s;e.options.dragDrop&&Oo&&!e.isReadOnly()&&n=="single"&&(s=a.contains(t))>-1&&(re((s=a.ranges[s]).from(),t)<0||t.xRel>0)&&(re(s.to(),t)>0||t.xRel<0)?gu(e,i,t,o):Fs(e,i,t,o)}function gu(e,t,n,i){var o=e.display,a=!1,s=Ze(e,function(h){x&&(o.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Pn(e)),Ge(o.wrapper.ownerDocument,"mouseup",s),Ge(o.wrapper.ownerDocument,"mousemove",u),Ge(o.scroller,"dragstart",f),Ge(o.scroller,"drop",s),a||(xt(h),i.addNew||Hi(e.doc,n,null,null,i.extend),x&&!E||m&&S==9?setTimeout(function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()},20):o.input.focus())}),u=function(h){a=a||Math.abs(t.clientX-h.clientX)+Math.abs(t.clientY-h.clientY)>=10},f=function(){return a=!0};x&&(o.scroller.draggable=!0),e.state.draggingText=s,s.copy=!i.moveOnDrag,se(o.wrapper.ownerDocument,"mouseup",s),se(o.wrapper.ownerDocument,"mousemove",u),se(o.scroller,"dragstart",f),se(o.scroller,"drop",s),e.state.delayingBlurEvent=!0,setTimeout(function(){return o.input.focus()},20),o.scroller.dragDrop&&o.scroller.dragDrop()}function Es(e,t,n){if(n=="char")return new Ie(t,t);if(n=="word")return e.findWordAt(t);if(n=="line")return new Ie(I(t.line,0),De(e.doc,I(t.line+1,0)));var i=n(e,t);return new Ie(i.from,i.to)}function Fs(e,t,n,i){m&&Pn(e);var o=e.display,a=e.doc;xt(t);var s,u,f=a.sel,h=f.ranges;if(i.addNew&&!i.extend?(u=a.sel.contains(n),u>-1?s=h[u]:s=new Ie(n,n)):(s=a.sel.primary(),u=a.sel.primIndex),i.unit=="rectangle")i.addNew||(s=new Ie(n,n)),n=Et(e,t,!0,!0),u=-1;else{var d=Es(e,n,i.unit);i.extend?s=yo(s,d.anchor,d.head,i.extend):s=d}i.addNew?u==-1?(u=h.length,Kt(a,Gt(e,h.concat([s]),u),{scroll:!1,origin:"*mouse"})):h.length>1&&h[u].empty()&&i.unit=="char"&&!i.extend?(Kt(a,Gt(e,h.slice(0,u).concat(h.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),f=a.sel):aa(a,u,s,fr):(u=0,Kt(a,new Mt([s],0),fr),f=a.sel);var v=n;function C(ne){if(re(v,ne)!=0)if(v=ne,i.unit=="rectangle"){for(var ie=[],ve=e.options.tabSize,ge=me(we(a,n.line).text,n.ch,ve),ke=me(we(a,ne.line).text,ne.ch,ve),Me=Math.min(ge,ke),ut=Math.max(ge,ke),Ke=Math.min(n.line,ne.line),it=Math.min(e.lastLine(),Math.max(n.line,ne.line));Ke<=it;Ke++){var pt=we(a,Ke).text,Xe=rr(pt,Me,ve);Me==ut?ie.push(new Ie(I(Ke,Xe),I(Ke,Xe))):pt.length>Xe&&ie.push(new Ie(I(Ke,Xe),I(Ke,rr(pt,ut,ve))))}ie.length||ie.push(new Ie(n,n)),Kt(a,Gt(e,f.ranges.slice(0,u).concat(ie),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ne)}else{var lt=s,Ye=Es(e,ne,i.unit),_e=lt.anchor,$e;re(Ye.anchor,_e)>0?($e=Ye.head,_e=xe(lt.from(),Ye.anchor)):($e=Ye.anchor,_e=nt(lt.to(),Ye.head));var yt=f.ranges.slice(0);yt[u]=xa(e,new Ie(De(a,_e),$e)),Kt(a,Gt(e,yt,u),fr)}}var k=o.wrapper.getBoundingClientRect(),H=0;function B(ne){var ie=++H,ve=Et(e,ne,!0,i.unit=="rectangle");if(!!ve)if(re(ve,v)!=0){e.curOp.focus=Fe(kt(e)),C(ve);var ge=lo(o,a);(ve.line>=ge.to||ve.line<ge.from)&&setTimeout(Ze(e,function(){H==ie&&B(ne)}),150)}else{var ke=ne.clientY<k.top?-20:ne.clientY>k.bottom?20:0;ke&&setTimeout(Ze(e,function(){H==ie&&(o.scroller.scrollTop+=ke,B(ne))}),50)}}function K(ne){e.state.selectingText=!1,H=1/0,ne&&(xt(ne),o.input.focus()),Ge(o.wrapper.ownerDocument,"mousemove",q),Ge(o.wrapper.ownerDocument,"mouseup",$),a.history.lastSelOrigin=null}var q=Ze(e,function(ne){ne.buttons===0||!Kn(ne)?K(ne):B(ne)}),$=Ze(e,K);e.state.selectingText=$,se(o.wrapper.ownerDocument,"mousemove",q),se(o.wrapper.ownerDocument,"mouseup",$)}function xa(e,t){var n=t.anchor,i=t.head,o=we(e.doc,n.line);if(re(n,i)==0&&n.sticky==i.sticky)return t;var a=ye(o);if(!a)return t;var s=Ne(a,n.ch,n.sticky),u=a[s];if(u.from!=n.ch&&u.to!=n.ch)return t;var f=s+(u.from==n.ch==(u.level!=1)?0:1);if(f==0||f==a.length)return t;var h;if(i.line!=n.line)h=(i.line-n.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var d=Ne(a,i.ch,i.sticky),v=d-s||(i.ch-n.ch)*(u.level==1?-1:1);d==f-1||d==f?h=v<0:h=v>0}var C=a[f+(h?-1:0)],k=h==(C.level==1),H=k?C.from:C.to,B=k?"after":"before";return n.ch==H&&n.sticky==B?t:new Ie(new I(n.line,H,B),i)}function Sa(e,t,n,i){var o,a;if(t.touches)o=t.touches[0].clientX,a=t.touches[0].clientY;else try{o=t.clientX,a=t.clientY}catch{return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&xt(t);var s=e.display,u=s.lineDiv.getBoundingClientRect();if(a>u.bottom||!rt(e,n))return cr(t);a-=u.top-s.viewOffset;for(var f=0;f<e.display.gutterSpecs.length;++f){var h=s.gutters.childNodes[f];if(h&&h.getBoundingClientRect().right>=o){var d=xr(e.doc,a),v=e.display.gutterSpecs[f];return ft(e,n,e,d,v.className,t),cr(t)}}}function Ca(e,t){return Sa(e,t,"gutterClick",!0)}function ka(e,t){zr(e.display,t)||qi(e,t)||qe(e,t,"contextmenu")||he||e.display.input.onContextMenu(t)}function qi(e,t){return rt(e,"gutterContextMenu")?Sa(e,t,"gutterContextMenu",!1):!1}function La(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Oi(e)}var wn={toString:function(){return"CodeMirror.Init"}},Ws={},So={};function yu(e){var t=e.optionHandlers;function n(i,o,a,s){e.defaults[i]=o,a&&(t[i]=s?function(u,f,h){h!=wn&&a(u,f,h)}:a)}e.defineOption=n,e.Init=wn,n("value","",function(i,o){return i.setValue(o)},!0),n("mode",null,function(i,o){i.doc.modeOption=o,ho(i)},!0),n("indentUnit",2,ho,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(i){ai(i),Oi(i),Dt(i)},!0),n("lineSeparator",null,function(i,o){if(i.doc.lineSep=o,!!o){var a=[],s=i.doc.first;i.doc.iter(function(f){for(var h=0;;){var d=f.text.indexOf(o,h);if(d==-1)break;h=d+o.length,a.push(I(s,d))}s++});for(var u=a.length-1;u>=0;u--)hi(i.doc,o,a[u],I(a[u].line,a[u].ch+o.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(i,o,a){i.state.specialChars=new RegExp(o.source+(o.test("	")?"":"|	"),"g"),a!=wn&&i.refresh()}),n("specialCharPlaceholder",qs,function(i){return i.refresh()},!0),n("electricChars",!0),n("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(i,o){return i.getInputField().spellcheck=o},!0),n("autocorrect",!1,function(i,o){return i.getInputField().autocorrect=o},!0),n("autocapitalize",!1,function(i,o){return i.getInputField().autocapitalize=o},!0),n("rtlMoveVisually",!ae),n("wholeLineUpdateBefore",!0),n("theme","default",function(i){La(i),zn(i)},!0),n("keyMap","default",function(i,o,a){var s=Ki(o),u=a!=wn&&Ki(a);u&&u.detach&&u.detach(i,s),s.attach&&s.attach(i,u||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,mu,!0),n("gutters",[],function(i,o){i.display.gutterSpecs=oi(o,i.options.lineNumbers),zn(i)},!0),n("fixedGutter",!0,function(i,o){i.display.gutters.style.left=o?hl(i.display)+"px":"0",i.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(i){return ri(i)},!0),n("scrollbarStyle","native",function(i){_n(i),ri(i),i.display.scrollbars.setScrollTop(i.doc.scrollTop),i.display.scrollbars.setScrollLeft(i.doc.scrollLeft)},!0),n("lineNumbers",!1,function(i,o){i.display.gutterSpecs=oi(i.options.gutters,o),zn(i)},!0),n("firstLineNumber",1,zn,!0),n("lineNumberFormatter",function(i){return i},zn,!0),n("showCursorWhenSelecting",!1,Vn,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(i,o){o=="nocursor"&&($n(i),i.display.input.blur()),i.display.input.readOnlyChanged(o)}),n("screenReaderLabel",null,function(i,o){o=o===""?null:o,i.display.input.screenReaderLabelChanged(o)}),n("disableInput",!1,function(i,o){o||i.display.input.reset()},!0),n("dragDrop",!0,St),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Vn,!0),n("singleCursorHeightPerLine",!0,Vn,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ai,!0),n("addModeClass",!1,ai,!0),n("pollInterval",100),n("undoDepth",200,function(i,o){return i.doc.history.undoDepth=o}),n("historyEventDelay",1250),n("viewportMargin",10,function(i){return i.refresh()},!0),n("maxHighlightLength",1e4,ai,!0),n("moveInputWithCursor",!0,function(i,o){o||i.display.input.resetPosition()}),n("tabindex",null,function(i,o){return i.display.input.getField().tabIndex=o||""}),n("autofocus",null),n("direction","ltr",function(i,o){return i.doc.setDirection(o)},!0),n("phrases",null)}function St(e,t,n){var i=n&&n!=wn;if(!t!=!i){var o=e.display.dragFunctions,a=t?se:Ge;a(e.display.scroller,"dragstart",o.start),a(e.display.scroller,"dragenter",o.enter),a(e.display.scroller,"dragover",o.over),a(e.display.scroller,"dragleave",o.leave),a(e.display.scroller,"drop",o.drop)}}function mu(e){e.options.lineWrapping?(je(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(ue(e.display.wrapper,"CodeMirror-wrap"),zo(e)),an(e),Dt(e),Oi(e),setTimeout(function(){return ri(e)},100)}function bt(e,t){var n=this;if(!(this instanceof bt))return new bt(e,t);this.options=t=t?Ce(t):{},Ce(Ws,t,!1);var i=t.value;typeof i=="string"?i=new er(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var o=new bt.inputStyles[t.inputStyle](this),a=this.display=new un(e,i,o,t);a.wrapper.CodeMirror=this,La(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),_n(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Oe,keySeq:null,specialChars:null},t.autofocus&&!te&&a.input.focus(),m&&S<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Wl(this),cu(),ii(this),this.curOp.forceUpdate=!0,us(this,i),t.autofocus&&!te||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Pi(n)},20):$n(this);for(var s in So)So.hasOwnProperty(s)&&So[s](this,t[s],wn);$o(this),t.finishInit&&t.finishInit(this);for(var u=0;u<yr.length;++u)yr[u](this);li(this),x&&t.lineWrapping&&getComputedStyle(a.lineDiv).textRendering=="optimizelegibility"&&(a.lineDiv.style.textRendering="auto")}bt.defaults=Ws,bt.optionHandlers=So;function Wl(e){var t=e.display;se(t.scroller,"mousedown",Ze(e,As)),m&&S<11?se(t.scroller,"dblclick",Ze(e,function(f){if(!qe(e,f)){var h=Et(e,f);if(!(!h||Ca(e,f)||zr(e.display,f))){xt(f);var d=e.findWordAt(h);Hi(e.doc,d.anchor,d.head)}}})):se(t.scroller,"dblclick",function(f){return qe(e,f)||xt(f)}),se(t.scroller,"contextmenu",function(f){return ka(e,f)}),se(t.input.getField(),"contextmenu",function(f){t.scroller.contains(f.target)||ka(e,f)});var n,i={end:0};function o(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),i=t.activeTouch,i.end=+new Date)}function a(f){if(f.touches.length!=1)return!1;var h=f.touches[0];return h.radiusX<=1&&h.radiusY<=1}function s(f,h){if(h.left==null)return!0;var d=h.left-f.left,v=h.top-f.top;return d*d+v*v>20*20}se(t.scroller,"touchstart",function(f){if(!qe(e,f)&&!a(f)&&!Ca(e,f)){t.input.ensurePolled(),clearTimeout(n);var h=+new Date;t.activeTouch={start:h,moved:!1,prev:h-i.end<=300?i:null},f.touches.length==1&&(t.activeTouch.left=f.touches[0].pageX,t.activeTouch.top=f.touches[0].pageY)}}),se(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),se(t.scroller,"touchend",function(f){var h=t.activeTouch;if(h&&!zr(t,f)&&h.left!=null&&!h.moved&&new Date-h.start<300){var d=e.coordsChar(t.activeTouch,"page"),v;!h.prev||s(h,h.prev)?v=new Ie(d,d):!h.prev.prev||s(h,h.prev.prev)?v=e.findWordAt(d):v=new Ie(I(d.line,0),De(e.doc,I(d.line+1,0))),e.setSelection(v.anchor,v.head),e.focus(),xt(f)}o()}),se(t.scroller,"touchcancel",o),se(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Br(e,t.scroller.scrollTop),vr(e,t.scroller.scrollLeft,!0),ft(e,"scroll",e))}),se(t.scroller,"mousewheel",function(f){return at(e,f)}),se(t.scroller,"DOMMouseScroll",function(f){return at(e,f)}),se(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(f){qe(e,f)||Kr(f)},over:function(f){qe(e,f)||(ws(e,f),Kr(f))},start:function(f){return bs(e,f)},drop:Ze(e,hu),leave:function(f){qe(e,f)||va(e)}};var u=t.input.getField();se(u,"keyup",function(f){return Ns.call(e,f)}),se(u,"keydown",Ze(e,wa)),se(u,"keypress",Ze(e,xo)),se(u,"focus",function(f){return Pi(e,f)}),se(u,"blur",function(f){return $n(e,f)})}var yr=[];bt.defineInitHook=function(e){return yr.push(e)};function Gn(e,t,n,i){var o=e.doc,a;n==null&&(n="add"),n=="smart"&&(o.mode.indent?a=xi(e,t).state:n="prev");var s=e.options.tabSize,u=we(o,t),f=me(u.text,null,s);u.stateAfter&&(u.stateAfter=null);var h=u.text.match(/^\s*/)[0],d;if(!i&&!/\S/.test(u.text))d=0,n="not";else if(n=="smart"&&(d=o.mode.indent(a,u.text.slice(h.length),u.text),d==ze||d>150)){if(!i)return;n="prev"}n=="prev"?t>o.first?d=me(we(o,t-1).text,null,s):d=0:n=="add"?d=f+e.options.indentUnit:n=="subtract"?d=f-e.options.indentUnit:typeof n=="number"&&(d=f+n),d=Math.max(0,d);var v="",C=0;if(e.options.indentWithTabs)for(var k=Math.floor(d/s);k;--k)C+=s,v+="	";if(C<d&&(v+=jt(d-C)),v!=h)return hi(o,v,I(t,0),I(t,h.length),"+input"),u.stateAfter=null,!0;for(var H=0;H<o.sel.ranges.length;H++){var B=o.sel.ranges[H];if(B.head.line==t&&B.head.ch<h.length){var K=I(t,h.length);aa(o,H,new Ie(K,K));break}}}var mr=null;function _l(e){mr=e}function Co(e,t,n,i,o){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=+new Date-200,u=o=="paste"||e.state.pasteIncoming>s,f=Qi(t),h=null;if(u&&i.ranges.length>1)if(mr&&mr.text.join(`
`)==t){if(i.ranges.length%mr.text.length==0){h=[];for(var d=0;d<mr.text.length;d++)h.push(a.splitLines(mr.text[d]))}}else f.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(h=Gr(f,function(q){return[q]}));for(var v=e.curOp.updateInput,C=i.ranges.length-1;C>=0;C--){var k=i.ranges[C],H=k.from(),B=k.to();k.empty()&&(n&&n>0?H=I(H.line,H.ch-n):e.state.overwrite&&!u?B=I(B.line,Math.min(we(a,B.line).text.length,B.ch+Ue(f).length)):u&&mr&&mr.lineWise&&mr.text.join(`
`)==f.join(`
`)&&(H=B=I(H.line,0)));var K={from:H,to:B,text:h?h[C%h.length]:f,origin:o||(u?"paste":e.state.cutIncoming>s?"cut":"+input")};vn(e.doc,K),Ft(e,"inputRead",e,K)}t&&!u&&Ma(e,t),Ei(e),e.curOp.updateInput<2&&(e.curOp.updateInput=v),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ta(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&t.hasFocus()&&dt(t,function(){return Co(t,n,0,null,"paste")}),!0}function Ma(e,t){if(!(!e.options.electricChars||!e.options.smartIndent))for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var o=n.ranges[i];if(!(o.head.ch>100||i&&n.ranges[i-1].head.line==o.head.line)){var a=e.getModeAt(o.head),s=!1;if(a.electricChars){for(var u=0;u<a.electricChars.length;u++)if(t.indexOf(a.electricChars.charAt(u))>-1){s=Gn(e,o.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(we(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=Gn(e,o.head.line,"smart"));s&&Ft(e,"electricInput",e,o.head.line)}}}function Da(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var o=e.doc.sel.ranges[i].head.line,a={anchor:I(o,0),head:I(o+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function _s(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function ko(){var e=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=L("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),z&&(e.style.border="1px solid black"),_s(e),t}function Hs(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){Yt(this).focus(),this.display.input.focus()},setOption:function(i,o){var a=this.options,s=a[i];a[i]==o&&i!="mode"||(a[i]=o,t.hasOwnProperty(i)&&Ze(this,t[i])(this,o,s),ft(this,"optionChange",this,i))},getOption:function(i){return this.options[i]},getDoc:function(){return this.doc},addKeyMap:function(i,o){this.state.keyMaps[o?"push":"unshift"](Ki(i))},removeKeyMap:function(i){for(var o=this.state.keyMaps,a=0;a<o.length;++a)if(o[a]==i||o[a].name==i)return o.splice(a,1),!0},addOverlay:Wt(function(i,o){var a=i.token?i:e.getMode(this.options,i);if(a.startState)throw new Error("Overlays may not be stateful.");w(this.state.overlays,{mode:a,modeSpec:i,opaque:o&&o.opaque,priority:o&&o.priority||0},function(s){return s.priority}),this.state.modeGen++,Dt(this)}),removeOverlay:Wt(function(i){for(var o=this.state.overlays,a=0;a<o.length;++a){var s=o[a].modeSpec;if(s==i||typeof i=="string"&&s.name==i){o.splice(a,1),this.state.modeGen++,Dt(this);return}}}),indentLine:Wt(function(i,o,a){typeof o!="string"&&typeof o!="number"&&(o==null?o=this.options.smartIndent?"smart":"prev":o=o?"add":"subtract"),c(this.doc,i)&&Gn(this,i,o,a)}),indentSelection:Wt(function(i){for(var o=this.doc.sel.ranges,a=-1,s=0;s<o.length;s++){var u=o[s];if(u.empty())u.head.line>a&&(Gn(this,u.head.line,i,!0),a=u.head.line,s==this.doc.sel.primIndex&&Ei(this));else{var f=u.from(),h=u.to(),d=Math.max(a,f.line);a=Math.min(this.lastLine(),h.line-(h.ch?0:1))+1;for(var v=d;v<a;++v)Gn(this,v,i);var C=this.doc.sel.ranges;f.ch==0&&o.length==C.length&&C[s].from().ch>0&&aa(this.doc,s,new Ie(f,C[s].to()),ot)}}}),getTokenAt:function(i,o){return Eo(this,i,o)},getLineTokens:function(i,o){return Eo(this,I(i),o,!0)},getTokenTypeAt:function(i){i=De(this.doc,i);var o=Bl(this,we(this.doc,i.line)),a=0,s=(o.length-1)/2,u=i.ch,f;if(u==0)f=o[2];else for(;;){var h=a+s>>1;if((h?o[h*2-1]:0)>=u)s=h;else if(o[h*2+1]<u)a=h+1;else{f=o[h*2+2];break}}var d=f?f.indexOf("overlay "):-1;return d<0?f:d==0?null:f.slice(0,d-1)},getModeAt:function(i){var o=this.doc.mode;return o.innerMode?e.innerMode(o,this.getTokenAt(i).state).mode:o},getHelper:function(i,o){return this.getHelpers(i,o)[0]},getHelpers:function(i,o){var a=[];if(!n.hasOwnProperty(o))return a;var s=n[o],u=this.getModeAt(i);if(typeof u[o]=="string")s[u[o]]&&a.push(s[u[o]]);else if(u[o])for(var f=0;f<u[o].length;f++){var h=s[u[o][f]];h&&a.push(h)}else u.helperType&&s[u.helperType]?a.push(s[u.helperType]):s[u.name]&&a.push(s[u.name]);for(var d=0;d<s._global.length;d++){var v=s._global[d];v.pred(u,this)&&Pe(a,v.val)==-1&&a.push(v.val)}return a},getStateAfter:function(i,o){var a=this.doc;return i=dr(a,i==null?a.first+a.size-1:i),xi(this,i+1,o).state},cursorCoords:function(i,o){var a,s=this.doc.sel.primary();return i==null?a=s.head:typeof i=="object"?a=De(this.doc,i):a=i?s.from():s.to(),pr(this,a,o||"page")},charCoords:function(i,o){return fl(this,De(this.doc,i),o||"page")},coordsChar:function(i,o){return i=Lr(this,i,o||"page"),to(this,i.left,i.top)},lineAtHeight:function(i,o){return i=Lr(this,{top:i,left:0},o||"page").top,xr(this.doc,i+this.display.viewOffset)},heightAtLine:function(i,o,a){var s=!1,u;if(typeof i=="number"){var f=this.doc.first+this.doc.size-1;i<this.doc.first?i=this.doc.first:i>f&&(i=f,s=!0),u=we(this.doc,i)}else u=i;return Jn(this,u,{top:0,left:0},o||"page",a||s).top+(s?this.doc.height-Hr(u):0)},defaultTextHeight:function(){return Dn(this.display)},defaultCharWidth:function(){return On(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(i,o,a,s,u){var f=this.display;i=pr(this,De(this.doc,i));var h=i.bottom,d=i.left;if(o.style.position="absolute",o.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(o),f.sizer.appendChild(o),s=="over")h=i.top;else if(s=="above"||s=="near"){var v=Math.max(f.wrapper.clientHeight,this.doc.height),C=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);(s=="above"||i.bottom+o.offsetHeight>v)&&i.top>o.offsetHeight?h=i.top-o.offsetHeight:i.bottom+o.offsetHeight<=v&&(h=i.bottom),d+o.offsetWidth>C&&(d=C-o.offsetWidth)}o.style.top=h+"px",o.style.left=o.style.right="",u=="right"?(d=f.sizer.clientWidth-o.offsetWidth,o.style.right="0px"):(u=="left"?d=0:u=="middle"&&(d=(f.sizer.clientWidth-o.offsetWidth)/2),o.style.left=d+"px"),a&&Zo(this,{left:d,top:h,right:d+o.offsetWidth,bottom:h+o.offsetHeight})},triggerOnKeyDown:Wt(wa),triggerOnKeyPress:Wt(xo),triggerOnKeyUp:Ns,triggerOnMouseDown:Wt(As),execCommand:function(i){if(Al.hasOwnProperty(i))return Al[i].call(null,this)},triggerElectric:Wt(function(i){Ma(this,i)}),findPosH:function(i,o,a,s){var u=1;o<0&&(u=-1,o=-o);for(var f=De(this.doc,i),h=0;h<o&&(f=st(this.doc,f,u,a,s),!f.hitSide);++h);return f},moveH:Wt(function(i,o){var a=this;this.extendSelectionsBy(function(s){return a.display.shift||a.doc.extend||s.empty()?st(a.doc,s.head,i,o,a.options.rtlMoveVisually):i<0?s.from():s.to()},hr)}),deleteH:Wt(function(i,o){var a=this.doc.sel,s=this.doc;a.somethingSelected()?s.replaceSelection("",null,"+delete"):Un(this,function(u){var f=st(s,u.head,i,o,!1);return i<0?{from:f,to:u.head}:{from:u.head,to:f}})}),findPosV:function(i,o,a,s){var u=1,f=s;o<0&&(u=-1,o=-o);for(var h=De(this.doc,i),d=0;d<o;++d){var v=pr(this,h,"div");if(f==null?f=v.left:v.left=f,h=Oa(this,v,u,a),h.hitSide)break}return h},moveV:Wt(function(i,o){var a=this,s=this.doc,u=[],f=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(d){if(f)return i<0?d.from():d.to();var v=pr(a,d.head,"div");d.goalColumn!=null&&(v.left=d.goalColumn),u.push(v.left);var C=Oa(a,v,i,o);return o=="page"&&d==s.sel.primary()&&ti(a,fl(a,C,"div").top-v.top),C},hr),u.length)for(var h=0;h<s.sel.ranges.length;h++)s.sel.ranges[h].goalColumn=u[h]}),findWordAt:function(i){var o=this.doc,a=we(o,i.line).text,s=i.ch,u=i.ch;if(a){var f=this.getHelper(i,"wordChars");(i.sticky=="before"||u==a.length)&&s?--s:++u;for(var h=a.charAt(s),d=Q(h,f)?function(v){return Q(v,f)}:/\s/.test(h)?function(v){return/\s/.test(v)}:function(v){return!/\s/.test(v)&&!Q(v)};s>0&&d(a.charAt(s-1));)--s;for(;u<a.length&&d(a.charAt(u));)++u}return new Ie(I(i.line,s),I(i.line,u))},toggleOverwrite:function(i){i!=null&&i==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?je(this.display.cursorDiv,"CodeMirror-overwrite"):ue(this.display.cursorDiv,"CodeMirror-overwrite"),ft(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Fe(kt(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Wt(function(i,o){Fn(this,i,o)}),getScrollInfo:function(){var i=this.display.scroller;return{left:i.scrollLeft,top:i.scrollTop,height:i.scrollHeight-Cr(this)-this.display.barHeight,width:i.scrollWidth-Cr(this)-this.display.barWidth,clientHeight:Jl(this),clientWidth:qn(this)}},scrollIntoView:Wt(function(i,o){i==null?(i={from:this.doc.sel.primary().head,to:null},o==null&&(o=this.options.cursorScrollMargin)):typeof i=="number"?i={from:I(i,0),to:null}:i.from==null&&(i={from:i,to:null}),i.to||(i.to=i.from),i.margin=o||0,i.from.line!=null?is(this,i):Qo(this,i.from,i.to,i.margin)}),setSize:Wt(function(i,o){var a=this,s=function(f){return typeof f=="number"||/^\d+$/.test(String(f))?f+"px":f};i!=null&&(this.display.wrapper.style.width=s(i)),o!=null&&(this.display.wrapper.style.height=s(o)),this.options.lineWrapping&&Go(this);var u=this.display.viewFrom;this.doc.iter(u,this.display.viewTo,function(f){if(f.widgets){for(var h=0;h<f.widgets.length;h++)if(f.widgets[h].noHScroll){Rr(a,u,"widget");break}}++u}),this.curOp.forceUpdate=!0,ft(this,"refresh",this)}),operation:function(i){return dt(this,i)},startOperation:function(){return ii(this)},endOperation:function(){return li(this)},refresh:Wt(function(){var i=this.display.cachedTextHeight;Dt(this),this.curOp.forceUpdate=!0,Oi(this),Fn(this,this.doc.scrollLeft,this.doc.scrollTop),ao(this.display),(i==null||Math.abs(i-Dn(this.display))>.5||this.options.lineWrapping)&&an(this),ft(this,"refresh",this)}),swapDoc:Wt(function(i){var o=this.doc;return o.cm=null,this.state.selectingText&&this.state.selectingText(),us(this,i),Oi(this),this.display.input.reset(),Fn(this,i.scrollLeft,i.scrollTop),this.curOp.forceScroll=!0,Ft(this,"swapDoc",this,o),o}),phrase:function(i){var o=this.options.phrases;return o&&Object.prototype.hasOwnProperty.call(o,i)?o[i]:i},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Tt(e),e.registerHelper=function(i,o,a){n.hasOwnProperty(i)||(n[i]=e[i]={_global:[]}),n[i][o]=a},e.registerGlobalHelper=function(i,o,a,s){e.registerHelper(i,o,s),n[i]._global.push({pred:a,val:s})}}function st(e,t,n,i,o){var a=t,s=n,u=we(e,t.line),f=o&&e.direction=="rtl"?-n:n;function h(){var $=t.line+f;return $<e.first||$>=e.first+e.size?!1:(t=new I($,t.ch,t.sticky),u=we(e,$))}function d($){var ne;if(i=="codepoint"){var ie=u.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(ie))ne=null;else{var ve=n>0?ie>=55296&&ie<56320:ie>=56320&&ie<57343;ne=new I(t.line,Math.max(0,Math.min(u.text.length,t.ch+n*(ve?2:1))),-n)}}else o?ne=ks(e.cm,u,t,n):ne=ya(u,t,n);if(ne==null)if(!$&&h())t=vi(o,e.cm,u,t.line,f);else return!1;else t=ne;return!0}if(i=="char"||i=="codepoint")d();else if(i=="column")d(!0);else if(i=="word"||i=="group")for(var v=null,C=i=="group",k=e.cm&&e.cm.getHelper(t,"wordChars"),H=!0;!(n<0&&!d(!H));H=!1){var B=u.text.charAt(t.ch)||`
`,K=Q(B,k)?"w":C&&B==`
`?"n":!C||/\s/.test(B)?null:"p";if(C&&!H&&!K&&(K="s"),v&&v!=K){n<0&&(n=1,d(),t.sticky="after");break}if(K&&(v=K),n>0&&!d(!H))break}var q=Ll(e,t,a,s,!0);return Te(a,q)&&(q.hitSide=!0),q}function Oa(e,t,n,i){var o=e.doc,a=t.left,s;if(i=="page"){var u=Math.min(e.display.wrapper.clientHeight,Yt(e).innerHeight||o(e).documentElement.clientHeight),f=Math.max(u-.5*Dn(e.display),3);s=(n>0?t.bottom:t.top)+n*f}else i=="line"&&(s=n>0?t.bottom+3:t.top-3);for(var h;h=to(e,a,s),!!h.outside;){if(n<0?s<=0:s>=o.height){h.hitSide=!0;break}s+=n*5}return h}var ht=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Oe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ht.prototype.init=function(e){var t=this,n=this,i=n.cm,o=n.div=e.lineDiv;o.contentEditable=!0,_s(o,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize);function a(u){for(var f=u.target;f;f=f.parentNode){if(f==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(f.className))break}return!1}se(o,"paste",function(u){!a(u)||qe(i,u)||Ta(u,i)||S<=11&&setTimeout(Ze(i,function(){return t.updateFromDOM()}),20)}),se(o,"compositionstart",function(u){t.composing={data:u.data,done:!1}}),se(o,"compositionupdate",function(u){t.composing||(t.composing={data:u.data,done:!1})}),se(o,"compositionend",function(u){t.composing&&(u.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),se(o,"touchstart",function(){return n.forceCompositionEnd()}),se(o,"input",function(){t.composing||t.readFromDOMSoon()});function s(u){if(!(!a(u)||qe(i,u))){if(i.somethingSelected())_l({lineWise:!1,text:i.getSelections()}),u.type=="cut"&&i.replaceSelection("",null,"cut");else if(i.options.lineWiseCopyCut){var f=Da(i);_l({lineWise:!0,text:f.text}),u.type=="cut"&&i.operation(function(){i.setSelections(f.ranges,0,ot),i.replaceSelection("",null,"cut")})}else return;if(u.clipboardData){u.clipboardData.clearData();var h=mr.text.join(`
`);if(u.clipboardData.setData("Text",h),u.clipboardData.getData("Text")==h){u.preventDefault();return}}var d=ko(),v=d.firstChild;i.display.lineSpace.insertBefore(d,i.display.lineSpace.firstChild),v.value=mr.text.join(`
`);var C=Fe(o.ownerDocument);ur(v),setTimeout(function(){i.display.lineSpace.removeChild(d),C.focus(),C==o&&n.showPrimarySelection()},50)}}se(o,"copy",s),se(o,"cut",s)},ht.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},ht.prototype.prepareSelection=function(){var e=pl(this.cm,!1);return e.focus=Fe(this.div.ownerDocument)==this.div,e},ht.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},ht.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ht.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var a=Ct(t,e.anchorNode,e.anchorOffset),s=Ct(t,e.focusNode,e.focusOffset);if(!(a&&!a.bad&&s&&!s.bad&&re(xe(a,s),i)==0&&re(nt(a,s),o)==0)){var u=t.display.view,f=i.line>=t.display.viewFrom&&yi(t,i)||{node:u[0].measure.map[2],offset:0},h=o.line<t.display.viewTo&&yi(t,o);if(!h){var d=u[u.length-1].measure,v=d.maps?d.maps[d.maps.length-1]:d.map;h={node:v[v.length-1],offset:v[v.length-2]-v[v.length-3]}}if(!f||!h){e.removeAllRanges();return}var C=e.rangeCount&&e.getRangeAt(0),k;try{k=Re(f.node,f.offset,h.offset,h.node)}catch{}k&&(!A&&t.state.focused?(e.collapse(f.node,f.offset),k.collapsed||(e.removeAllRanges(),e.addRange(k))):(e.removeAllRanges(),e.addRange(k)),C&&e.anchorNode==null?e.addRange(C):A&&this.startGracePeriod()),this.rememberSelection()}},ht.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},ht.prototype.showMultipleSelections=function(e){fe(this.cm.display.cursorDiv,e.cursors),fe(this.cm.display.selectionDiv,e.selection)},ht.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},ht.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Je(this.div,t)},ht.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Fe(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ht.prototype.blur=function(){this.div.blur()},ht.prototype.getField=function(){return this.div},ht.prototype.supportsTouch=function(){return!0},ht.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):dt(this.cm,function(){return t.cm.curOp.selectionChanged=!0});function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))}this.polling.set(this.cm.options.pollInterval,n)},ht.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},ht.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),t=this.cm;if(X&&D&&this.cm.display.gutterSpecs.length&&bu(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var n=Ct(t,e.anchorNode,e.anchorOffset),i=Ct(t,e.focusNode,e.focusOffset);n&&i&&dt(t,function(){Kt(t.doc,hn(n,i),ot),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},ht.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),o=n.to();if(i.ch==0&&i.line>e.firstLine()&&(i=I(i.line-1,we(e.doc,i.line-1).length)),o.ch==we(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=I(o.line+1,0)),i.line<t.viewFrom||o.line>t.viewTo-1)return!1;var a,s,u;i.line==t.viewFrom||(a=or(e,i.line))==0?(s=Qe(t.view[0].line),u=t.view[0].node):(s=Qe(t.view[a].line),u=t.view[a-1].node.nextSibling);var f=or(e,o.line),h,d;if(f==t.view.length-1?(h=t.viewTo-1,d=t.lineDiv.lastChild):(h=Qe(t.view[f+1].line)-1,d=t.view[f+1].node.previousSibling),!u)return!1;for(var v=e.doc.splitLines(wu(e,u,d,s,h)),C=Bt(e.doc,I(s,0),I(h,we(e.doc,h).text.length));v.length>1&&C.length>1;)if(Ue(v)==Ue(C))v.pop(),C.pop(),h--;else if(v[0]==C[0])v.shift(),C.shift(),s++;else break;for(var k=0,H=0,B=v[0],K=C[0],q=Math.min(B.length,K.length);k<q&&B.charCodeAt(k)==K.charCodeAt(k);)++k;for(var $=Ue(v),ne=Ue(C),ie=Math.min($.length-(v.length==1?k:0),ne.length-(C.length==1?k:0));H<ie&&$.charCodeAt($.length-H-1)==ne.charCodeAt(ne.length-H-1);)++H;if(v.length==1&&C.length==1&&s==i.line)for(;k&&k>i.ch&&$.charCodeAt($.length-H-1)==ne.charCodeAt(ne.length-H-1);)k--,H++;v[v.length-1]=$.slice(0,$.length-H).replace(/^\u200b+/,""),v[0]=v[0].slice(k).replace(/\u200b+$/,"");var ve=I(s,k),ge=I(h,C.length?Ue(C).length-H:0);if(v.length>1||v[0]||re(ve,ge))return hi(e.doc,v,ve,ge,"+input"),!0},ht.prototype.ensurePolled=function(){this.forceCompositionEnd()},ht.prototype.reset=function(){this.forceCompositionEnd()},ht.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ht.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},ht.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&dt(this.cm,function(){return Dt(e.cm)})},ht.prototype.setUneditable=function(e){e.contentEditable="false"},ht.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ze(this.cm,Co)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},ht.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},ht.prototype.onContextMenu=function(){},ht.prototype.resetPosition=function(){},ht.prototype.needsContentAttribute=!0;function yi(e,t){var n=kr(e,t.line);if(!n||n.hidden)return null;var i=we(e.doc,t.line),o=Bo(n,i,t.line),a=ye(i,e.doc.direction),s="left";if(a){var u=Ne(a,t.ch);s=u%2?"right":"left"}var f=Va(o.map,t.ch,s);return f.offset=f.collapse=="right"?f.end:f.start,f}function bu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function xn(e,t){return t&&(e.bad=!0),e}function wu(e,t,n,i,o){var a="",s=!1,u=e.doc.lineSeparator(),f=!1;function h(k){return function(H){return H.id==k}}function d(){s&&(a+=u,f&&(a+=u),s=f=!1)}function v(k){k&&(d(),a+=k)}function C(k){if(k.nodeType==1){var H=k.getAttribute("cm-text");if(H){v(H);return}var B=k.getAttribute("cm-marker"),K;if(B){var q=e.findMarks(I(i,0),I(o+1,0),h(+B));q.length&&(K=q[0].find(0))&&v(Bt(e.doc,K.from,K.to).join(u));return}if(k.getAttribute("contenteditable")=="false")return;var $=/^(pre|div|p|li|table|br)$/i.test(k.nodeName);if(!/^br$/i.test(k.nodeName)&&k.textContent.length==0)return;$&&d();for(var ne=0;ne<k.childNodes.length;ne++)C(k.childNodes[ne]);/^(pre|p)$/i.test(k.nodeName)&&(f=!0),$&&(s=!0)}else k.nodeType==3&&v(k.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;C(t),t!=n;)t=t.nextSibling,f=!1;return a}function Ct(e,t,n){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[n],!i)return xn(e.clipPos(I(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var a=e.display.view[o];if(a.node==i)return xu(a,t,n)}}function xu(e,t,n){var i=e.text.firstChild,o=!1;if(!t||!Je(i,t))return xn(I(Qe(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?Ue(e.rest):e.line;return xn(I(Qe(a),a.text.length),o)}var s=t.nodeType==3?t:null,u=t;for(!s&&t.childNodes.length==1&&t.firstChild.nodeType==3&&(s=t.firstChild,n&&(n=s.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var f=e.measure,h=f.maps;function d(K,q,$){for(var ne=-1;ne<(h?h.length:0);ne++)for(var ie=ne<0?f.map:h[ne],ve=0;ve<ie.length;ve+=3){var ge=ie[ve+2];if(ge==K||ge==q){var ke=Qe(ne<0?e.line:e.rest[ne]),Me=ie[ve]+$;return($<0||ge!=K)&&(Me=ie[ve+($?1:0)]),I(ke,Me)}}}var v=d(s,u,n);if(v)return xn(v,o);for(var C=u.nextSibling,k=s?s.nodeValue.length-n:0;C;C=C.nextSibling){if(v=d(C,C.firstChild,0),v)return xn(I(v.line,v.ch-k),o);k+=C.textContent.length}for(var H=u.previousSibling,B=n;H;H=H.previousSibling){if(v=d(H,H.firstChild,-1),v)return xn(I(v.line,v.ch+B),o);B+=H.textContent.length}}var Ot=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Oe,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ot.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var o=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),z&&(o.style.width="0px"),se(o,"input",function(){m&&S>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),se(o,"paste",function(s){qe(i,s)||Ta(s,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())});function a(s){if(!qe(i,s)){if(i.somethingSelected())_l({lineWise:!1,text:i.getSelections()});else if(i.options.lineWiseCopyCut){var u=Da(i);_l({lineWise:!0,text:u.text}),s.type=="cut"?i.setSelections(u.ranges,null,ot):(n.prevInput="",o.value=u.text.join(`
`),ur(o))}else return;s.type=="cut"&&(i.state.cutIncoming=+new Date)}}se(o,"cut",a),se(o,"copy",a),se(e.scroller,"paste",function(s){if(!(zr(e,s)||qe(i,s))){if(!o.dispatchEvent){i.state.pasteIncoming=+new Date,n.focus();return}var u=new Event("paste");u.clipboardData=s.clipboardData,o.dispatchEvent(u)}}),se(e.lineSpace,"selectstart",function(s){zr(e,s)||xt(s)}),se(o,"compositionstart",function(){var s=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:s,range:i.markText(s,i.getCursor("to"),{className:"CodeMirror-composing"})}}),se(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},Ot.prototype.createField=function(e){this.wrapper=ko(),this.textarea=this.wrapper.firstChild},Ot.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ot.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=pl(e);if(e.options.moveInputWithCursor){var o=pr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+s.left-a.left))}return i},Ot.prototype.showSelection=function(e){var t=this.cm,n=t.display;fe(n.cursorDiv,e.cursors),fe(n.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ot.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&ur(this.textarea),m&&S>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",m&&S>=9&&(this.hasSelection=null));this.resetting=!1}},Ot.prototype.getField=function(){return this.textarea},Ot.prototype.supportsTouch=function(){return!1},Ot.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||Fe(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Ot.prototype.blur=function(){this.textarea.blur()},Ot.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ot.prototype.receivedFocus=function(){this.slowPoll()},Ot.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ot.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0;function n(){var i=t.poll();!i&&!e?(e=!0,t.polling.set(60,n)):(t.pollingFast=!1,t.slowPoll())}t.polling.set(20,n)},Ot.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Xr(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=n.value;if(o==i&&!t.somethingSelected())return!1;if(m&&S>=9&&this.hasSelection===o||V&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=o.charCodeAt(0);if(a==8203&&!i&&(i="\u200B"),a==8666)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(i.length,o.length);s<u&&i.charCodeAt(s)==o.charCodeAt(s);)++s;return dt(t,function(){Co(t,o.slice(s),i.length-s,null,e.composing?"*compose":null),o.length>1e3||o.indexOf(`
`)>-1?n.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ot.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ot.prototype.onKeyPress=function(){m&&S>=9&&(this.hasSelection=null),this.fastPoll()},Ot.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Et(n,e),s=i.scroller.scrollTop;if(!a||F)return;var u=n.options.resetSelectionOnContextMenu;u&&n.doc.sel.contains(a)==-1&&Ze(n,Kt)(n.doc,hn(a),ot);var f=o.style.cssText,h=t.wrapper.style.cssText,d=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",o.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var v;x&&(v=o.ownerDocument.defaultView.scrollY),i.input.focus(),x&&o.ownerDocument.defaultView.scrollTo(null,v),i.input.reset(),n.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=k,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll);function C(){if(o.selectionStart!=null){var B=n.somethingSelected(),K="\u200B"+(B?o.value:"");o.value="\u21DA",o.value=K,t.prevInput=B?"":"\u200B",o.selectionStart=1,o.selectionEnd=K.length,i.selForContextMenu=n.doc.sel}}function k(){if(t.contextMenuPending==k&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,o.style.cssText=f,m&&S<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=s),o.selectionStart!=null)){(!m||m&&S<9)&&C();var B=0,K=function(){i.selForContextMenu==n.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&t.prevInput=="\u200B"?Ze(n,fi)(n):B++<10?i.detectingSelectAll=setTimeout(K,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(K,200)}}if(m&&S>=9&&C(),he){Kr(e);var H=function(){Ge(window,"mouseup",H),setTimeout(k,20)};se(window,"mouseup",H)}else setTimeout(k,50)},Ot.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ot.prototype.setUneditable=function(){},Ot.prototype.needsContentAttribute=!1;function Su(e,t){if(t=t?Ce(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),t.autofocus==null){var n=Fe(e.ownerDocument);t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}function i(){e.value=u.getValue()}var o;if(e.form&&(se(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var a=e.form;o=a.submit;try{var s=a.submit=function(){i(),a.submit=o,a.submit(),a.submit=s}}catch{}}t.finishInit=function(f){f.save=i,f.getTextArea=function(){return e},f.toTextArea=function(){f.toTextArea=isNaN,i(),e.parentNode.removeChild(f.getWrapperElement()),e.style.display="",e.form&&(Ge(e.form,"submit",i),!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=o))}},e.style.display="none";var u=bt(function(f){return e.parentNode.insertBefore(f,e.nextSibling)},t);return u}function Lo(e){e.off=Ge,e.on=se,e.wheelEventPixels=gr,e.Doc=er,e.splitLines=Qi,e.countColumn=me,e.findColumn=rr,e.isWordChar=Z,e.Pass=ze,e.signal=ft,e.Line=ki,e.changeEnd=Qr,e.scrollbarModel=ls,e.Pos=I,e.cmpPos=re,e.modes=Pr,e.mimeModes=kn,e.resolveMode=_t,e.getMode=tn,e.modeExtensions=lr,e.extendMode=bi,e.copyState=qr,e.startState=Se,e.innerMode=gt,e.commands=Al,e.keyMap=bn,e.keyName=pi,e.isModifierKey=ga,e.lookupKey=di,e.normalizeKeyMap=Cs,e.StringStream=ct,e.SharedTextMarker=Ui,e.TextMarker=Dr,e.LineWidget=Tl,e.e_preventDefault=xt,e.e_stopPropagation=nr,e.e_stop=Kr,e.addClass=je,e.contains=Je,e.rmClass=ue,e.keyNames=Ur}yu(bt),Hs(bt);var r="iter insert remove copy getEditor constructor".split(" ");for(var l in er.prototype)er.prototype.hasOwnProperty(l)&&Pe(r,l)<0&&(bt.prototype[l]=function(e){return function(){return e.apply(this.doc,arguments)}}(er.prototype[l]));return Tt(er),bt.inputStyles={textarea:Ot,contenteditable:ht},bt.defineMode=function(e){!bt.defaults.mode&&e!="null"&&(bt.defaults.mode=e),Xn.apply(this,arguments)},bt.defineMIME=Ln,bt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),bt.defineMIME("text/plain","null"),bt.defineExtension=function(e,t){bt.prototype[e]=t},bt.defineDocExtension=function(e,t){er.prototype[e]=t},bt.fromTextArea=Su,Lo(bt),bt.version="5.65.9",bt})})(Us);var Uu=Us.exports;(function(W,O){(function(b){b(Us.exports)})(function(b){var _=b.Pos,A="http://www.w3.org/2000/svg";function p(w,P){this.mv=w,this.type=P,this.classes=P=="left"?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}p.prototype={constructor:p,init:function(w,P,U){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=b(w,Oe({value:P,readOnly:!this.mv.options.allowEditingOriginals},Oe(U))),this.mv.options.connect=="align"&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new fr(this.edit)),this.orig.state.trackAlignable=new fr(this.orig)),this.lockButton.title=this.edit.phrase("Toggle locked scrolling"),this.lockButton.setAttribute("aria-label",this.lockButton.title),this.orig.state.diffViews=[this];var Y=U.chunkClassLocation||"background";Object.prototype.toString.call(Y)!="[object Array]"&&(Y=[Y]),this.classes.classLocation=Y,this.diff=Ae(fe(P),fe(U.value),this.mv.options.ignoreWhitespace),this.chunks=Re(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=U.showDifferences!==!1},registerEvents:function(w){this.forceUpdate=m(this),D(this,!0,!1),S(this,w)},setShowDifferences:function(w){w=w!==!1,w!=this.showDifferences&&(this.showDifferences=w,this.forceUpdate("full"))}};function g(w){w.diffOutOfDate&&(w.diff=Ae(w.orig.getValue(),w.edit.getValue(),w.mv.options.ignoreWhitespace),w.chunks=Re(w.diff),w.diffOutOfDate=!1,b.signal(w.edit,"updateDiff",w.diff))}var y=!1;function m(w){var P={from:0,to:0,marked:[]},U={from:0,to:0,marked:[]},Y,Z=!1;function Q(be){y=!0,Z=!1,be=="full"&&(w.svg&&Ce(w.svg),w.copyButtons&&Ce(w.copyButtons),F(w.edit,P.marked,w.classes),F(w.orig,U.marked,w.classes),P.from=P.to=U.from=U.to=0),g(w),w.showDifferences&&(E(w.edit,w.diff,P,DIFF_INSERT,w.classes),E(w.orig,w.diff,U,DIFF_DELETE,w.classes)),w.mv.options.connect=="align"&&ae(w),z(w),w.needsScrollSync!=null&&x(w,w.needsScrollSync),y=!1}function oe(be){y||(w.dealigned=!0,ce(be))}function ce(be){y||Z||(clearTimeout(Y),be===!0&&(Z=!0),Y=setTimeout(Q,be===!0?20:250))}function pe(be,We){w.diffOutOfDate||(w.diffOutOfDate=!0,P.from=P.to=U.from=U.to=0),oe(We.text.length-1!=We.to.line-We.from.line)}function Le(){w.diffOutOfDate=!0,w.dealigned=!0,Q("full")}return w.edit.on("change",pe),w.orig.on("change",pe),w.edit.on("swapDoc",Le),w.orig.on("swapDoc",Le),w.mv.options.connect=="align"&&(b.on(w.edit.state.trackAlignable,"realign",oe),b.on(w.orig.state.trackAlignable,"realign",oe)),w.edit.on("viewportChange",function(){ce(!1)}),w.orig.on("viewportChange",function(){ce(!1)}),Q(),Q}function S(w,P){w.edit.on("scroll",function(){x(w,!0)&&z(w)}),w.orig.on("scroll",function(){x(w,!1)&&z(w),P&&x(P,!0)&&z(P)})}function x(w,P){if(w.diffOutOfDate)return w.lockScroll&&w.needsScrollSync==null&&(w.needsScrollSync=P),!1;if(w.needsScrollSync=null,!w.lockScroll)return!0;var U,Y,Z=+new Date;if(P?(U=w.edit,Y=w.orig):(U=w.orig,Y=w.edit),U.state.scrollSetBy==w&&(U.state.scrollSetAt||0)+250>Z)return!1;var Q=U.getScrollInfo();if(w.mv.options.connect=="align")Ne=Q.top;else{var oe=.5*Q.clientHeight,ce=Q.top+oe,pe=U.lineAtHeight(ce,"local"),Le=je(w.chunks,pe,P),be=N(U,P?Le.edit:Le.orig),We=N(Y,P?Le.orig:Le.edit),tt=(ce-be.top)/(be.bot-be.top),Ne=We.top-oe+tt*(We.bot-We.top),mt,ye;if(Ne>Q.top&&(ye=Q.top/oe)<1)Ne=Ne*ye+Q.top*(1-ye);else if((mt=Q.height-Q.clientHeight-Q.top)<oe){var Rt=Y.getScrollInfo(),se=Rt.height-Rt.clientHeight-Ne;se>mt&&(ye=mt/oe)<1&&(Ne=Ne*ye+(Rt.height-Rt.clientHeight-mt)*(1-ye))}}return Y.scrollTo(Q.left,Ne),Y.state.scrollSetAt=Z,Y.state.scrollSetBy=w,!0}function N(w,P){var U=P.after;return U==null&&(U=w.lastLine()+1),{top:w.heightAtLine(P.before||0,"local"),bot:w.heightAtLine(U,"local")}}function D(w,P,U){w.lockScroll=P,P&&U!=!1&&x(w,DIFF_INSERT)&&z(w),(P?b.addClass:b.rmClass)(w.lockButton,"CodeMirror-merge-scrolllock-enabled")}function R(w,P,U){for(var Y=U.classLocation,Z=0;Z<Y.length;Z++)w.removeLineClass(P,Y[Z],U.chunk),w.removeLineClass(P,Y[Z],U.start),w.removeLineClass(P,Y[Z],U.end)}function F(w,P,U){for(var Y=0;Y<P.length;++Y){var Z=P[Y];Z instanceof b.TextMarker?Z.clear():Z.parent&&R(w,Z,U)}P.length=0}function E(w,P,U,Y,Z){var Q=w.getViewport();w.operation(function(){U.from==U.to||Q.from-U.to>20||U.from-Q.to>20?(F(w,U.marked,Z),ee(w,P,Y,U.marked,Q.from,Q.to,Z),U.from=Q.from,U.to=Q.to):(Q.from<U.from&&(ee(w,P,Y,U.marked,Q.from,U.from,Z),U.from=Q.from),Q.to>U.to&&(ee(w,P,Y,U.marked,U.to,Q.to,Z),U.to=Q.to))})}function J(w,P,U,Y,Z,Q){for(var oe=U.classLocation,ce=w.getLineHandle(P),pe=0;pe<oe.length;pe++)Y&&w.addLineClass(ce,oe[pe],U.chunk),Z&&w.addLineClass(ce,oe[pe],U.start),Q&&w.addLineClass(ce,oe[pe],U.end);return ce}function ee(w,P,U,Y,Z,Q,oe){var ce=_(0,0),pe=_(Z,0),Le=w.clipPos(_(Q-1)),be=U==DIFF_DELETE?oe.del:oe.insert;function We(rt,Tt){for(var xt=Math.max(Z,rt),nr=Math.min(Q,Tt),cr=xt;cr<nr;++cr)Y.push(J(w,cr,oe,!0,cr==rt,cr==Tt-1));rt==Tt&&xt==Tt&&nr==Tt&&(xt?Y.push(J(w,xt-1,oe,!1,!1,!0)):Y.push(J(w,xt,oe,!1,!0,!1)))}for(var tt=0,Ne=!1,mt=0;mt<P.length;++mt){var ye=P[mt],Rt=ye[0],se=ye[1];if(Rt==DIFF_EQUAL){var vt=ce.line+(Fe(P,mt)?0:1);Pe(ce,se);var Ge=ce.line+(Je(P,mt)?1:0);Ge>vt&&(Ne&&(We(tt,vt),Ne=!1),tt=Ge)}else if(Ne=!0,Rt==U){var ft=Pe(ce,se,!0),qe=rr(pe,ce),br=hr(Le,ft);Ee(qe,br)||Y.push(w.markText(qe,br,{className:be})),ce=ft}}Ne&&We(tt,ce.line+1)}function z(w){if(!!w.showDifferences){if(w.svg){Ce(w.svg);var P=w.gap.offsetWidth;me(w.svg,"width",P,"height",w.gap.offsetHeight)}w.copyButtons&&Ce(w.copyButtons);for(var U=w.edit.getViewport(),Y=w.orig.getViewport(),Z=w.mv.wrap.getBoundingClientRect().top,Q=Z-w.edit.getScrollerElement().getBoundingClientRect().top+w.edit.getScrollInfo().top,oe=Z-w.orig.getScrollerElement().getBoundingClientRect().top+w.orig.getScrollInfo().top,ce=0;ce<w.chunks.length;ce++){var pe=w.chunks[ce];pe.editFrom<=U.to&&pe.editTo>=U.from&&pe.origFrom<=Y.to&&pe.origTo>=Y.from&&he(w,pe,oe,Q,P)}}}function X(w,P){for(var U=0,Y=0,Z=0;Z<P.length;Z++){var Q=P[Z];if(Q.editTo>w&&Q.editFrom<=w)return null;if(Q.editFrom>w)break;U=Q.editTo,Y=Q.origTo}return Y+(w-U)}function te(w,P,U){for(var Y=w.state.trackAlignable,Z=w.firstLine(),Q=0,oe=[],ce=0;;ce++){for(var pe=P[ce],Le=pe?U?pe.origFrom:pe.editFrom:1e9;Q<Y.alignable.length;Q+=2){var be=Y.alignable[Q]+1;if(!(be<=Z))if(be<=Le)oe.push(be);else break}if(!pe)break;oe.push(Z=U?pe.origTo:pe.editTo)}return oe}function V(w,P,U,Y){var Z=0,Q=0,oe=0,ce=0;e:for(;;Z++){var pe=w[Z],Le=P[Q];if(!pe&&Le==null)break;for(var be=pe?pe[0]:1e9,We=Le==null?1e9:Le;oe<U.length;){var tt=U[oe];if(tt.origFrom<=We&&tt.origTo>We){Q++,Z--;continue e}if(tt.editTo>be){if(tt.editFrom<=be)continue e;break}ce+=tt.origTo-tt.origFrom-(tt.editTo-tt.editFrom),oe++}if(be==We-ce)pe[Y]=We,Q++;else if(be<We-ce)pe[Y]=be+ce;else{var Ne=[We-ce,null,null];Ne[Y]=We,w.splice(Z,0,Ne),Q++}}}function le(w,P){var U=te(w.edit,w.chunks,!1),Y=[];if(P)for(var Z=0,Q=0;Z<P.chunks.length;Z++){for(var oe=P.chunks[Z].editTo;Q<U.length&&U[Q]<oe;)Q++;(Q==U.length||U[Q]!=oe)&&U.splice(Q++,0,oe)}for(var Z=0;Z<U.length;Z++)Y.push([U[Z],null,null]);return V(Y,te(w.orig,w.chunks,!0),w.chunks,1),P&&V(Y,te(P.orig,P.chunks,!0),P.chunks,2),Y}function ae(w,P){if(!(!w.dealigned&&!P)){if(!w.orig.curOp)return w.orig.operation(function(){ae(w,P)});w.dealigned=!1;var U=w.mv.left==w?w.mv.right:w.mv.left;U&&(g(U),U.dealigned=!1);for(var Y=le(w,U),Z=w.mv.aligners,Q=0;Q<Z.length;Q++)Z[Q].clear();Z.length=0;var oe=[w.edit,w.orig],ce=[],pe=[];U&&oe.push(U.orig);for(var Q=0;Q<oe.length;Q++)ce.push(oe[Q].getScrollInfo().top),pe.push(-oe[Q].getScrollerElement().getBoundingClientRect().top);(pe[0]!=pe[1]||oe.length==3&&pe[1]!=pe[2])&&M(oe,pe,[0,0,0],Z);for(var Le=0;Le<Y.length;Le++)M(oe,pe,Y[Le],Z);for(var Q=0;Q<oe.length;Q++)oe[Q].scrollTo(null,ce[Q])}}function M(w,P,U,Y){for(var Z=-1e8,Q=[],oe=0;oe<w.length;oe++)if(U[oe]!=null){var ce=w[oe].heightAtLine(U[oe],"local")-P[oe];Q[oe]=ce,Z=Math.max(Z,ce)}for(var oe=0;oe<w.length;oe++)if(U[oe]!=null){var pe=Z-Q[oe];pe>1&&Y.push(j(w[oe],U[oe],pe))}}function j(w,P,U){var Y=!0;P>w.lastLine()&&(P--,Y=!1);var Z=document.createElement("div");return Z.className="CodeMirror-merge-spacer",Z.style.height=U+"px",Z.style.minWidth="1px",w.addLineWidget(P,Z,{height:U,above:Y,mergeSpacer:!0,handleMouseEvents:!0})}function he(w,P,U,Y,Z){var Q=w.type=="left",oe=w.orig.heightAtLine(P.origFrom,"local",!0)-U;if(w.svg){var ce=oe,pe=w.edit.heightAtLine(P.editFrom,"local",!0)-Y;if(Q){var Le=ce;ce=pe,pe=Le}var be=w.orig.heightAtLine(P.origTo,"local",!0)-U,We=w.edit.heightAtLine(P.editTo,"local",!0)-Y;if(Q){var Le=be;be=We,We=Le}var tt=" C "+Z/2+" "+pe+" "+Z/2+" "+ce+" "+(Z+2)+" "+ce,Ne=" C "+Z/2+" "+be+" "+Z/2+" "+We+" -1 "+We;me(w.svg.appendChild(document.createElementNS(A,"path")),"d","M -1 "+pe+tt+" L "+(Z+2)+" "+be+Ne+" z","class",w.classes.connect)}if(w.copyButtons){var mt=w.copyButtons.appendChild(Be("div",w.type=="left"?"\u21DD":"\u21DC","CodeMirror-merge-copy")),ye=w.mv.options.allowEditingOriginals;if(mt.title=w.edit.phrase(ye?"Push to left":"Revert chunk"),mt.chunk=P,mt.style.top=(P.origTo>P.origFrom?oe:w.edit.heightAtLine(P.editFrom,"local")-Y)+"px",mt.setAttribute("role","button"),mt.setAttribute("tabindex","0"),mt.setAttribute("aria-label",mt.title),ye){var Rt=w.edit.heightAtLine(P.editFrom,"local")-Y,se=w.copyButtons.appendChild(Be("div",w.type=="right"?"\u21DD":"\u21DC","CodeMirror-merge-copy-reverse"));se.title="Push to right",se.chunk={editFrom:P.origFrom,editTo:P.origTo,origFrom:P.editFrom,origTo:P.editTo},se.style.top=Rt+"px",w.type=="right"?se.style.left="2px":se.style.right="2px",se.setAttribute("role","button"),se.setAttribute("tabindex","0"),se.setAttribute("aria-label",se.title)}}}function de(w,P,U,Y){if(!w.diffOutOfDate){var Z=Y.origTo>U.lastLine()?_(Y.origFrom-1):_(Y.origFrom,0),Q=_(Y.origTo,0),oe=Y.editTo>P.lastLine()?_(Y.editFrom-1):_(Y.editFrom,0),ce=_(Y.editTo,0),pe=w.mv.options.revertChunk;pe?pe(w.mv,U,Z,Q,P,oe,ce):P.replaceRange(U.getRange(Z,Q),oe,ce)}}var ue=b.MergeView=function(w,P){if(!(this instanceof ue))return new ue(w,P);this.options=P;var U=P.origLeft,Y=P.origRight==null?P.orig:P.origRight,Z=U!=null,Q=Y!=null,oe=1+(Z?1:0)+(Q?1:0),ce=[],pe=this.left=null,Le=this.right=null,be=this;if(Z){pe=this.left=new p(this,"left");var We=Be("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");ce.push(We),ce.push(G(pe))}var tt=Be("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(ce.push(tt),Q){Le=this.right=new p(this,"right"),ce.push(G(Le));var Ne=Be("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");ce.push(Ne)}(Q?Ne:tt).className+=" CodeMirror-merge-pane-rightmost",ce.push(Be("div",null,null,"height: 0; clear: both;"));var mt=this.wrap=w.appendChild(Be("div",ce,"CodeMirror-merge CodeMirror-merge-"+oe+"pane"));this.edit=b(tt,Oe(P)),pe&&pe.init(We,U,P),Le&&Le.init(Ne,Y,P),P.collapseIdentical&&this.editor().operation(function(){Yt(be,P.collapseIdentical)}),P.connect=="align"&&(this.aligners=[],ae(this.left||this.right,!0)),pe&&pe.registerEvents(Le),Le&&Le.registerEvents(pe);var ye=function(){pe&&z(pe),Le&&z(Le)};b.on(window,"resize",ye);var Rt=setInterval(function(){for(var se=mt.parentNode;se&&se!=document.body;se=se.parentNode);se||(clearInterval(Rt),b.off(window,"resize",ye))},5e3)};function G(w){var P=w.lockButton=Be("div",null,"CodeMirror-merge-scrolllock");P.setAttribute("role","button"),P.setAttribute("tabindex","0");var U=Be("div",[P],"CodeMirror-merge-scrolllock-wrap");b.on(P,"click",function(){D(w,!w.lockScroll)}),b.on(P,"keyup",function(oe){oe.key==="Enter"&&D(w,!w.lockScroll)});var Y=[U];if(w.mv.options.revertButtons!==!1){w.copyButtons=Be("div",null,"CodeMirror-merge-copybuttons-"+w.type);var Z=function(oe){var ce=oe.target||oe.srcElement;if(!!ce.chunk){if(ce.className=="CodeMirror-merge-copy-reverse"){de(w,w.orig,w.edit,ce.chunk);return}de(w,w.edit,w.orig,ce.chunk)}};b.on(w.copyButtons,"click",Z),b.on(w.copyButtons,"keyup",function(oe){oe.key==="Enter"&&Z(oe)}),Y.unshift(w.copyButtons)}if(w.mv.options.connect!="align"){var Q=document.createElementNS&&document.createElementNS(A,"svg");Q&&!Q.createSVGRect&&(Q=null),w.svg=Q,Q&&Y.push(Q)}return w.gap=Be("div",Y,"CodeMirror-merge-gap")}ue.prototype={constructor:ue,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(w){this.right&&this.right.setShowDifferences(w),this.left&&this.left.setShowDifferences(w)},rightChunks:function(){if(this.right)return g(this.right),this.right.chunks},leftChunks:function(){if(this.left)return g(this.left),this.left.chunks}};function fe(w){return typeof w=="string"?w:w.getValue()}var L;function Ae(w,P,U){L||(L=new diff_match_patch);for(var Y=L.diff_main(w,P),Z=0;Z<Y.length;++Z){var Q=Y[Z];(U?!/[^ \t]/.test(Q[1]):!Q[1])?Y.splice(Z--,1):Z&&Y[Z-1][0]==Q[0]&&(Y.splice(Z--,1),Y[Z][1]+=Q[1])}return Y}function Re(w){var P=[];if(!w.length)return P;for(var U=0,Y=0,Z=_(0,0),Q=_(0,0),oe=0;oe<w.length;++oe){var ce=w[oe],pe=ce[0];if(pe==DIFF_EQUAL){var Le=!Fe(w,oe)||Z.line<U||Q.line<Y?1:0,be=Z.line+Le,We=Q.line+Le;Pe(Z,ce[1],null,Q);var tt=Je(w,oe)?1:0,Ne=Z.line+tt,mt=Q.line+tt;Ne>be&&(oe&&P.push({origFrom:Y,origTo:We,editFrom:U,editTo:be}),U=Ne,Y=mt)}else Pe(pe==DIFF_INSERT?Z:Q,ce[1])}return(U<=Z.line||Y<=Q.line)&&P.push({origFrom:Y,origTo:Q.line+1,editFrom:U,editTo:Z.line+1}),P}function Je(w,P){if(P==w.length-1)return!0;var U=w[P+1][1];return U.length==1&&P<w.length-2||U.charCodeAt(0)!=10?!1:P==w.length-2?!0:(U=w[P+2][1],(U.length>1||P==w.length-3)&&U.charCodeAt(0)==10)}function Fe(w,P){if(P==0)return!0;var U=w[P-1][1];return U.charCodeAt(U.length-1)!=10?!1:P==1?!0:(U=w[P-2][1],U.charCodeAt(U.length-1)==10)}function je(w,P,U){for(var Y,Z,Q,oe,ce=0;ce<w.length;ce++){var pe=w[ce],Le=U?pe.editFrom:pe.origFrom,be=U?pe.editTo:pe.origTo;Z==null&&(Le>P?(Z=pe.editFrom,oe=pe.origFrom):be>P&&(Z=pe.editTo,oe=pe.origTo)),be<=P?(Y=pe.editTo,Q=pe.origTo):Le<=P&&(Y=pe.editFrom,Q=pe.origFrom)}return{edit:{before:Y,after:Z},orig:{before:Q,after:oe}}}function sr(w,P,U){w.addLineClass(P,"wrap","CodeMirror-merge-collapsed-line");var Y=document.createElement("span");Y.className="CodeMirror-merge-collapsed-widget",Y.title=w.phrase("Identical text collapsed. Click to expand.");var Z=w.markText(_(P,0),_(U-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:Y,clearOnEnter:!0});function Q(){Z.clear(),w.removeLineClass(P,"wrap","CodeMirror-merge-collapsed-line")}return Z.explicitlyCleared&&Q(),b.on(Y,"click",Q),Z.on("clear",Q),b.on(Y,"click",Q),{mark:Z,clear:Q}}function ur(w,P){var U=[];function Y(){for(var ce=0;ce<U.length;ce++)U[ce].clear()}for(var Z=0;Z<P.length;Z++){var Q=P[Z],oe=sr(Q.cm,Q.line,Q.line+w);U.push(oe),oe.mark.on("clear",Y)}return U[0].mark}function kt(w,P,U,Y){for(var Z=0;Z<w.chunks.length;Z++)for(var Q=w.chunks[Z],oe=Q.editFrom-P;oe<Q.editTo+P;oe++){var ce=oe+U;ce>=0&&ce<Y.length&&(Y[ce]=!1)}}function Yt(w,P){typeof P!="number"&&(P=2);for(var U=[],Y=w.editor(),Z=Y.firstLine(),Q=Z,oe=Y.lastLine();Q<=oe;Q++)U.push(!0);w.left&&kt(w.left,P,Z,U),w.right&&kt(w.right,P,Z,U);for(var ce=0;ce<U.length;ce++)if(U[ce]){for(var pe=ce+Z,Le=1;ce<U.length-1&&U[ce+1];ce++,Le++);if(Le>P){var be=[{line:pe,cm:Y}];w.left&&be.push({line:X(pe,w.left.chunks),cm:w.left.orig}),w.right&&be.push({line:X(pe,w.right.chunks),cm:w.right.orig});var We=ur(Le,be);w.options.onCollapse&&w.options.onCollapse(w,pe,Le,We)}}}function Be(w,P,U,Y){var Z=document.createElement(w);if(U&&(Z.className=U),Y&&(Z.style.cssText=Y),typeof P=="string")Z.appendChild(document.createTextNode(P));else if(P)for(var Q=0;Q<P.length;++Q)Z.appendChild(P[Q]);return Z}function Ce(w){for(var P=w.childNodes.length;P>0;--P)w.removeChild(w.firstChild)}function me(w){for(var P=1;P<arguments.length;P+=2)w.setAttribute(arguments[P],arguments[P+1])}function Oe(w,P){P||(P={});for(var U in w)w.hasOwnProperty(U)&&(P[U]=w[U]);return P}function Pe(w,P,U,Y){for(var Z=U?_(w.line,w.ch):w,Q=0;;){var oe=P.indexOf(`
`,Q);if(oe==-1)break;++Z.line,Y&&++Y.line,Q=oe+1}return Z.ch=(Q?0:Z.ch)+(P.length-Q),Y&&(Y.ch=(Q?0:Y.ch)+(P.length-Q)),Z}var Qt=1,ze=2,ot=4;function fr(w){this.cm=w,this.alignable=[],this.height=w.doc.height;var P=this;w.on("markerAdded",function(U,Y){if(!!Y.collapsed){var Z=Y.find(1);Z!=null&&P.set(Z.line,ot)}}),w.on("markerCleared",function(U,Y,Z,Q){Q!=null&&Y.collapsed&&P.check(Q,ot,P.hasMarker)}),w.on("markerChanged",this.signal.bind(this)),w.on("lineWidgetAdded",function(U,Y,Z){Y.mergeSpacer||(Y.above?P.set(Z-1,ze):P.set(Z,Qt))}),w.on("lineWidgetCleared",function(U,Y,Z){Y.mergeSpacer||(Y.above?P.check(Z-1,ze,P.hasWidgetBelow):P.check(Z,Qt,P.hasWidget))}),w.on("lineWidgetChanged",this.signal.bind(this)),w.on("change",function(U,Y){var Z=Y.from.line,Q=Y.to.line-Y.from.line,oe=Y.text.length-1,ce=Z+oe;(Q||oe)&&P.map(Z,Q,oe),P.check(ce,ot,P.hasMarker),(Q||oe)&&P.check(Y.from.line,ot,P.hasMarker)}),w.on("viewportChange",function(){P.cm.doc.height!=P.height&&P.signal()})}fr.prototype={signal:function(){b.signal(this,"realign"),this.height=this.cm.doc.height},set:function(w,P){for(var U=-1;U<this.alignable.length;U+=2){var Y=this.alignable[U]-w;if(Y==0){if((this.alignable[U+1]&P)==P)return;this.alignable[U+1]|=P,this.signal();return}if(Y>0)break}this.signal(),this.alignable.splice(U,0,w,P)},find:function(w){for(var P=0;P<this.alignable.length;P+=2)if(this.alignable[P]==w)return P;return-1},check:function(w,P,U){var Y=this.find(w);if(!(Y==-1||!(this.alignable[Y+1]&P))&&!U.call(this,w)){this.signal();var Z=this.alignable[Y+1]&~P;Z?this.alignable[Y+1]=Z:this.alignable.splice(Y,2)}},hasMarker:function(w){var P=this.cm.getLineHandle(w);if(P.markedSpans){for(var U=0;U<P.markedSpans.length;U++)if(P.markedSpans[U].marker.collapsed&&P.markedSpans[U].to!=null)return!0}return!1},hasWidget:function(w){var P=this.cm.getLineHandle(w);if(P.widgets){for(var U=0;U<P.widgets.length;U++)if(!P.widgets[U].above&&!P.widgets[U].mergeSpacer)return!0}return!1},hasWidgetBelow:function(w){if(w==this.cm.lastLine())return!1;var P=this.cm.getLineHandle(w+1);if(P.widgets){for(var U=0;U<P.widgets.length;U++)if(P.widgets[U].above&&!P.widgets[U].mergeSpacer)return!0}return!1},map:function(w,P,U){for(var Y=U-P,Z=w+P,Q=-1,oe=-1,ce=0;ce<this.alignable.length;ce+=2){var pe=this.alignable[ce];pe==w&&this.alignable[ce+1]&ze&&(Q=ce),pe==Z&&this.alignable[ce+1]&ze&&(oe=ce),!(pe<=w)&&(pe<Z?this.alignable.splice(ce--,2):this.alignable[ce]+=Y)}if(Q>-1){var Le=this.alignable[Q+1];Le==ze?this.alignable.splice(Q,2):this.alignable[Q+1]=Le&~ze}oe>-1&&U&&this.set(w+U,ze)}};function hr(w,P){return(w.line-P.line||w.ch-P.ch)<0?w:P}function rr(w,P){return(w.line-P.line||w.ch-P.ch)>0?w:P}function Ee(w,P){return w.line==P.line&&w.ch==P.ch}function jt(w,P,U){for(var Y=w.length-1;Y>=0;Y--){var Z=w[Y],Q=(U?Z.origTo:Z.editTo)-1;if(Q<P)return Q}}function Ue(w,P,U){for(var Y=0;Y<w.length;Y++){var Z=w[Y],Q=U?Z.origFrom:Z.editFrom;if(Q>P)return Q}}function Gr(w,P){var U=null,Y=w.state.diffViews,Z=w.getCursor().line;if(Y)for(var Q=0;Q<Y.length;Q++){var oe=Y[Q],ce=w==oe.orig;g(oe);var pe=P<0?jt(oe.chunks,Z,ce):Ue(oe.chunks,Z,ce);pe!=null&&(U==null||(P<0?pe>U:pe<U))&&(U=pe)}if(U!=null)w.setCursor(U,0);else return b.Pass}b.commands.goNextDiff=function(w){return Gr(w,1)},b.commands.goPrevDiff=function(w){return Gr(w,-1)}})})();var Gu={exports:{}};(function(W){var O=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},b=-1,_=1,A=0;O.Diff=function(p,g){return[p,g]},O.prototype.diff_main=function(p,g,y,m){typeof m=="undefined"&&(this.Diff_Timeout<=0?m=Number.MAX_VALUE:m=new Date().getTime()+this.Diff_Timeout*1e3);var S=m;if(p==null||g==null)throw new Error("Null input. (diff_main)");if(p==g)return p?[new O.Diff(A,p)]:[];typeof y=="undefined"&&(y=!0);var x=y,N=this.diff_commonPrefix(p,g),D=p.substring(0,N);p=p.substring(N),g=g.substring(N),N=this.diff_commonSuffix(p,g);var R=p.substring(p.length-N);p=p.substring(0,p.length-N),g=g.substring(0,g.length-N);var F=this.diff_compute_(p,g,x,S);return D&&F.unshift(new O.Diff(A,D)),R&&F.push(new O.Diff(A,R)),this.diff_cleanupMerge(F),F},O.prototype.diff_compute_=function(p,g,y,m){var S;if(!p)return[new O.Diff(_,g)];if(!g)return[new O.Diff(b,p)];var x=p.length>g.length?p:g,N=p.length>g.length?g:p,D=x.indexOf(N);if(D!=-1)return S=[new O.Diff(_,x.substring(0,D)),new O.Diff(A,N),new O.Diff(_,x.substring(D+N.length))],p.length>g.length&&(S[0][0]=S[2][0]=b),S;if(N.length==1)return[new O.Diff(b,p),new O.Diff(_,g)];var R=this.diff_halfMatch_(p,g);if(R){var F=R[0],E=R[1],J=R[2],ee=R[3],z=R[4],X=this.diff_main(F,J,y,m),te=this.diff_main(E,ee,y,m);return X.concat([new O.Diff(A,z)],te)}return y&&p.length>100&&g.length>100?this.diff_lineMode_(p,g,m):this.diff_bisect_(p,g,m)},O.prototype.diff_lineMode_=function(p,g,y){var m=this.diff_linesToChars_(p,g);p=m.chars1,g=m.chars2;var S=m.lineArray,x=this.diff_main(p,g,!1,y);this.diff_charsToLines_(x,S),this.diff_cleanupSemantic(x),x.push(new O.Diff(A,""));for(var N=0,D=0,R=0,F="",E="";N<x.length;){switch(x[N][0]){case _:R++,E+=x[N][1];break;case b:D++,F+=x[N][1];break;case A:if(D>=1&&R>=1){x.splice(N-D-R,D+R),N=N-D-R;for(var J=this.diff_main(F,E,!1,y),ee=J.length-1;ee>=0;ee--)x.splice(N,0,J[ee]);N=N+J.length}R=0,D=0,F="",E="";break}N++}return x.pop(),x},O.prototype.diff_bisect_=function(p,g,y){for(var m=p.length,S=g.length,x=Math.ceil((m+S)/2),N=x,D=2*x,R=new Array(D),F=new Array(D),E=0;E<D;E++)R[E]=-1,F[E]=-1;R[N+1]=0,F[N+1]=0;for(var J=m-S,ee=J%2!=0,z=0,X=0,te=0,V=0,le=0;le<x&&!(new Date().getTime()>y);le++){for(var ae=-le+z;ae<=le-X;ae+=2){var M=N+ae,j;ae==-le||ae!=le&&R[M-1]<R[M+1]?j=R[M+1]:j=R[M-1]+1;for(var he=j-ae;j<m&&he<S&&p.charAt(j)==g.charAt(he);)j++,he++;if(R[M]=j,j>m)X+=2;else if(he>S)z+=2;else if(ee){var de=N+J-ae;if(de>=0&&de<D&&F[de]!=-1){var ue=m-F[de];if(j>=ue)return this.diff_bisectSplit_(p,g,j,he,y)}}}for(var G=-le+te;G<=le-V;G+=2){var de=N+G,ue;G==-le||G!=le&&F[de-1]<F[de+1]?ue=F[de+1]:ue=F[de-1]+1;for(var fe=ue-G;ue<m&&fe<S&&p.charAt(m-ue-1)==g.charAt(S-fe-1);)ue++,fe++;if(F[de]=ue,ue>m)V+=2;else if(fe>S)te+=2;else if(!ee){var M=N+J-G;if(M>=0&&M<D&&R[M]!=-1){var j=R[M],he=N+j-M;if(ue=m-ue,j>=ue)return this.diff_bisectSplit_(p,g,j,he,y)}}}}return[new O.Diff(b,p),new O.Diff(_,g)]},O.prototype.diff_bisectSplit_=function(p,g,y,m,S){var x=p.substring(0,y),N=g.substring(0,m),D=p.substring(y),R=g.substring(m),F=this.diff_main(x,N,!1,S),E=this.diff_main(D,R,!1,S);return F.concat(E)},O.prototype.diff_linesToChars_=function(p,g){var y=[],m={};y[0]="";function S(R){for(var F="",E=0,J=-1,ee=y.length;J<R.length-1;){J=R.indexOf(`
`,E),J==-1&&(J=R.length-1);var z=R.substring(E,J+1);(m.hasOwnProperty?m.hasOwnProperty(z):m[z]!==void 0)?F+=String.fromCharCode(m[z]):(ee==x&&(z=R.substring(E),J=R.length),F+=String.fromCharCode(ee),m[z]=ee,y[ee++]=z),E=J+1}return F}var x=4e4,N=S(p);x=65535;var D=S(g);return{chars1:N,chars2:D,lineArray:y}},O.prototype.diff_charsToLines_=function(p,g){for(var y=0;y<p.length;y++){for(var m=p[y][1],S=[],x=0;x<m.length;x++)S[x]=g[m.charCodeAt(x)];p[y][1]=S.join("")}},O.prototype.diff_commonPrefix=function(p,g){if(!p||!g||p.charAt(0)!=g.charAt(0))return 0;for(var y=0,m=Math.min(p.length,g.length),S=m,x=0;y<S;)p.substring(x,S)==g.substring(x,S)?(y=S,x=y):m=S,S=Math.floor((m-y)/2+y);return S},O.prototype.diff_commonSuffix=function(p,g){if(!p||!g||p.charAt(p.length-1)!=g.charAt(g.length-1))return 0;for(var y=0,m=Math.min(p.length,g.length),S=m,x=0;y<S;)p.substring(p.length-S,p.length-x)==g.substring(g.length-S,g.length-x)?(y=S,x=y):m=S,S=Math.floor((m-y)/2+y);return S},O.prototype.diff_commonOverlap_=function(p,g){var y=p.length,m=g.length;if(y==0||m==0)return 0;y>m?p=p.substring(y-m):y<m&&(g=g.substring(0,y));var S=Math.min(y,m);if(p==g)return S;for(var x=0,N=1;;){var D=p.substring(S-N),R=g.indexOf(D);if(R==-1)return x;N+=R,(R==0||p.substring(S-N)==g.substring(0,N))&&(x=N,N++)}},O.prototype.diff_halfMatch_=function(p,g){if(this.Diff_Timeout<=0)return null;var y=p.length>g.length?p:g,m=p.length>g.length?g:p;if(y.length<4||m.length*2<y.length)return null;var S=this;function x(X,te,V){for(var le=X.substring(V,V+Math.floor(X.length/4)),ae=-1,M="",j,he,de,ue;(ae=te.indexOf(le,ae+1))!=-1;){var G=S.diff_commonPrefix(X.substring(V),te.substring(ae)),fe=S.diff_commonSuffix(X.substring(0,V),te.substring(0,ae));M.length<fe+G&&(M=te.substring(ae-fe,ae)+te.substring(ae,ae+G),j=X.substring(0,V-fe),he=X.substring(V+G),de=te.substring(0,ae-fe),ue=te.substring(ae+G))}return M.length*2>=X.length?[j,he,de,ue,M]:null}var N=x(y,m,Math.ceil(y.length/4)),D=x(y,m,Math.ceil(y.length/2)),R;if(!N&&!D)return null;D?N?R=N[4].length>D[4].length?N:D:R=D:R=N;var F,E,J,ee;p.length>g.length?(F=R[0],E=R[1],J=R[2],ee=R[3]):(J=R[0],ee=R[1],F=R[2],E=R[3]);var z=R[4];return[F,E,J,ee,z]},O.prototype.diff_cleanupSemantic=function(p){for(var g=!1,y=[],m=0,S=null,x=0,N=0,D=0,R=0,F=0;x<p.length;)p[x][0]==A?(y[m++]=x,N=R,D=F,R=0,F=0,S=p[x][1]):(p[x][0]==_?R+=p[x][1].length:F+=p[x][1].length,S&&S.length<=Math.max(N,D)&&S.length<=Math.max(R,F)&&(p.splice(y[m-1],0,new O.Diff(b,S)),p[y[m-1]+1][0]=_,m--,m--,x=m>0?y[m-1]:-1,N=0,D=0,R=0,F=0,S=null,g=!0)),x++;for(g&&this.diff_cleanupMerge(p),this.diff_cleanupSemanticLossless(p),x=1;x<p.length;){if(p[x-1][0]==b&&p[x][0]==_){var E=p[x-1][1],J=p[x][1],ee=this.diff_commonOverlap_(E,J),z=this.diff_commonOverlap_(J,E);ee>=z?(ee>=E.length/2||ee>=J.length/2)&&(p.splice(x,0,new O.Diff(A,J.substring(0,ee))),p[x-1][1]=E.substring(0,E.length-ee),p[x+1][1]=J.substring(ee),x++):(z>=E.length/2||z>=J.length/2)&&(p.splice(x,0,new O.Diff(A,E.substring(0,z))),p[x-1][0]=_,p[x-1][1]=J.substring(0,J.length-z),p[x+1][0]=b,p[x+1][1]=E.substring(z),x++),x++}x++}},O.prototype.diff_cleanupSemanticLossless=function(p){function g(z,X){if(!z||!X)return 6;var te=z.charAt(z.length-1),V=X.charAt(0),le=te.match(O.nonAlphaNumericRegex_),ae=V.match(O.nonAlphaNumericRegex_),M=le&&te.match(O.whitespaceRegex_),j=ae&&V.match(O.whitespaceRegex_),he=M&&te.match(O.linebreakRegex_),de=j&&V.match(O.linebreakRegex_),ue=he&&z.match(O.blanklineEndRegex_),G=de&&X.match(O.blanklineStartRegex_);return ue||G?5:he||de?4:le&&!M&&j?3:M||j?2:le||ae?1:0}for(var y=1;y<p.length-1;){if(p[y-1][0]==A&&p[y+1][0]==A){var m=p[y-1][1],S=p[y][1],x=p[y+1][1],N=this.diff_commonSuffix(m,S);if(N){var D=S.substring(S.length-N);m=m.substring(0,m.length-N),S=D+S.substring(0,S.length-N),x=D+x}for(var R=m,F=S,E=x,J=g(m,S)+g(S,x);S.charAt(0)===x.charAt(0);){m+=S.charAt(0),S=S.substring(1)+x.charAt(0),x=x.substring(1);var ee=g(m,S)+g(S,x);ee>=J&&(J=ee,R=m,F=S,E=x)}p[y-1][1]!=R&&(R?p[y-1][1]=R:(p.splice(y-1,1),y--),p[y][1]=F,E?p[y+1][1]=E:(p.splice(y+1,1),y--))}y++}},O.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,O.whitespaceRegex_=/\s/,O.linebreakRegex_=/[\r\n]/,O.blanklineEndRegex_=/\n\r?\n$/,O.blanklineStartRegex_=/^\r?\n\r?\n/,O.prototype.diff_cleanupEfficiency=function(p){for(var g=!1,y=[],m=0,S=null,x=0,N=!1,D=!1,R=!1,F=!1;x<p.length;)p[x][0]==A?(p[x][1].length<this.Diff_EditCost&&(R||F)?(y[m++]=x,N=R,D=F,S=p[x][1]):(m=0,S=null),R=F=!1):(p[x][0]==b?F=!0:R=!0,S&&(N&&D&&R&&F||S.length<this.Diff_EditCost/2&&N+D+R+F==3)&&(p.splice(y[m-1],0,new O.Diff(b,S)),p[y[m-1]+1][0]=_,m--,S=null,N&&D?(R=F=!0,m=0):(m--,x=m>0?y[m-1]:-1,R=F=!1),g=!0)),x++;g&&this.diff_cleanupMerge(p)},O.prototype.diff_cleanupMerge=function(p){p.push(new O.Diff(A,""));for(var g=0,y=0,m=0,S="",x="",N;g<p.length;)switch(p[g][0]){case _:m++,x+=p[g][1],g++;break;case b:y++,S+=p[g][1],g++;break;case A:y+m>1?(y!==0&&m!==0&&(N=this.diff_commonPrefix(x,S),N!==0&&(g-y-m>0&&p[g-y-m-1][0]==A?p[g-y-m-1][1]+=x.substring(0,N):(p.splice(0,0,new O.Diff(A,x.substring(0,N))),g++),x=x.substring(N),S=S.substring(N)),N=this.diff_commonSuffix(x,S),N!==0&&(p[g][1]=x.substring(x.length-N)+p[g][1],x=x.substring(0,x.length-N),S=S.substring(0,S.length-N))),g-=y+m,p.splice(g,y+m),S.length&&(p.splice(g,0,new O.Diff(b,S)),g++),x.length&&(p.splice(g,0,new O.Diff(_,x)),g++),g++):g!==0&&p[g-1][0]==A?(p[g-1][1]+=p[g][1],p.splice(g,1)):g++,m=0,y=0,S="",x="";break}p[p.length-1][1]===""&&p.pop();var D=!1;for(g=1;g<p.length-1;)p[g-1][0]==A&&p[g+1][0]==A&&(p[g][1].substring(p[g][1].length-p[g-1][1].length)==p[g-1][1]?(p[g][1]=p[g-1][1]+p[g][1].substring(0,p[g][1].length-p[g-1][1].length),p[g+1][1]=p[g-1][1]+p[g+1][1],p.splice(g-1,1),D=!0):p[g][1].substring(0,p[g+1][1].length)==p[g+1][1]&&(p[g-1][1]+=p[g+1][1],p[g][1]=p[g][1].substring(p[g+1][1].length)+p[g+1][1],p.splice(g+1,1),D=!0)),g++;D&&this.diff_cleanupMerge(p)},O.prototype.diff_xIndex=function(p,g){var y=0,m=0,S=0,x=0,N;for(N=0;N<p.length&&(p[N][0]!==_&&(y+=p[N][1].length),p[N][0]!==b&&(m+=p[N][1].length),!(y>g));N++)S=y,x=m;return p.length!=N&&p[N][0]===b?x:x+(g-S)},O.prototype.diff_prettyHtml=function(p){for(var g=[],y=/&/g,m=/</g,S=/>/g,x=/\n/g,N=0;N<p.length;N++){var D=p[N][0],R=p[N][1],F=R.replace(y,"&amp;").replace(m,"&lt;").replace(S,"&gt;").replace(x,"&para;<br>");switch(D){case _:g[N]='<ins style="background:#e6ffe6;">'+F+"</ins>";break;case b:g[N]='<del style="background:#ffe6e6;">'+F+"</del>";break;case A:g[N]="<span>"+F+"</span>";break}}return g.join("")},O.prototype.diff_text1=function(p){for(var g=[],y=0;y<p.length;y++)p[y][0]!==_&&(g[y]=p[y][1]);return g.join("")},O.prototype.diff_text2=function(p){for(var g=[],y=0;y<p.length;y++)p[y][0]!==b&&(g[y]=p[y][1]);return g.join("")},O.prototype.diff_levenshtein=function(p){for(var g=0,y=0,m=0,S=0;S<p.length;S++){var x=p[S][0],N=p[S][1];switch(x){case _:y+=N.length;break;case b:m+=N.length;break;case A:g+=Math.max(y,m),y=0,m=0;break}}return g+=Math.max(y,m),g},O.prototype.diff_toDelta=function(p){for(var g=[],y=0;y<p.length;y++)switch(p[y][0]){case _:g[y]="+"+encodeURI(p[y][1]);break;case b:g[y]="-"+p[y][1].length;break;case A:g[y]="="+p[y][1].length;break}return g.join("	").replace(/%20/g," ")},O.prototype.diff_fromDelta=function(p,g){for(var y=[],m=0,S=0,x=g.split(/\t/g),N=0;N<x.length;N++){var D=x[N].substring(1);switch(x[N].charAt(0)){case"+":try{y[m++]=new O.Diff(_,decodeURI(D))}catch{throw new Error("Illegal escape in diff_fromDelta: "+D)}break;case"-":case"=":var R=parseInt(D,10);if(isNaN(R)||R<0)throw new Error("Invalid number in diff_fromDelta: "+D);var F=p.substring(S,S+=R);x[N].charAt(0)=="="?y[m++]=new O.Diff(A,F):y[m++]=new O.Diff(b,F);break;default:if(x[N])throw new Error("Invalid diff operation in diff_fromDelta: "+x[N])}}if(S!=p.length)throw new Error("Delta length ("+S+") does not equal source text length ("+p.length+").");return y},O.prototype.match_main=function(p,g,y){if(p==null||g==null||y==null)throw new Error("Null input. (match_main)");return y=Math.max(0,Math.min(y,p.length)),p==g?0:p.length?p.substring(y,y+g.length)==g?y:this.match_bitap_(p,g,y):-1},O.prototype.match_bitap_=function(p,g,y){if(g.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var m=this.match_alphabet_(g),S=this;function x(j,he){var de=j/g.length,ue=Math.abs(y-he);return S.Match_Distance?de+ue/S.Match_Distance:ue?1:de}var N=this.Match_Threshold,D=p.indexOf(g,y);D!=-1&&(N=Math.min(x(0,D),N),D=p.lastIndexOf(g,y+g.length),D!=-1&&(N=Math.min(x(0,D),N)));var R=1<<g.length-1;D=-1;for(var F,E,J=g.length+p.length,ee,z=0;z<g.length;z++){for(F=0,E=J;F<E;)x(z,y+E)<=N?F=E:J=E,E=Math.floor((J-F)/2+F);J=E;var X=Math.max(1,y-E+1),te=Math.min(y+E,p.length)+g.length,V=Array(te+2);V[te+1]=(1<<z)-1;for(var le=te;le>=X;le--){var ae=m[p.charAt(le-1)];if(z===0?V[le]=(V[le+1]<<1|1)&ae:V[le]=(V[le+1]<<1|1)&ae|((ee[le+1]|ee[le])<<1|1)|ee[le+1],V[le]&R){var M=x(z,le-1);if(M<=N)if(N=M,D=le-1,D>y)X=Math.max(1,2*y-D);else break}}if(x(z+1,y)>N)break;ee=V}return D},O.prototype.match_alphabet_=function(p){for(var g={},y=0;y<p.length;y++)g[p.charAt(y)]=0;for(var y=0;y<p.length;y++)g[p.charAt(y)]|=1<<p.length-y-1;return g},O.prototype.patch_addContext_=function(p,g){if(g.length!=0){if(p.start2===null)throw Error("patch not initialized");for(var y=g.substring(p.start2,p.start2+p.length1),m=0;g.indexOf(y)!=g.lastIndexOf(y)&&y.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)m+=this.Patch_Margin,y=g.substring(p.start2-m,p.start2+p.length1+m);m+=this.Patch_Margin;var S=g.substring(p.start2-m,p.start2);S&&p.diffs.unshift(new O.Diff(A,S));var x=g.substring(p.start2+p.length1,p.start2+p.length1+m);x&&p.diffs.push(new O.Diff(A,x)),p.start1-=S.length,p.start2-=S.length,p.length1+=S.length+x.length,p.length2+=S.length+x.length}},O.prototype.patch_make=function(p,g,y){var m,S;if(typeof p=="string"&&typeof g=="string"&&typeof y=="undefined")m=p,S=this.diff_main(m,g,!0),S.length>2&&(this.diff_cleanupSemantic(S),this.diff_cleanupEfficiency(S));else if(p&&typeof p=="object"&&typeof g=="undefined"&&typeof y=="undefined")S=p,m=this.diff_text1(S);else if(typeof p=="string"&&g&&typeof g=="object"&&typeof y=="undefined")m=p,S=g;else if(typeof p=="string"&&typeof g=="string"&&y&&typeof y=="object")m=p,S=y;else throw new Error("Unknown call format to patch_make.");if(S.length===0)return[];for(var x=[],N=new O.patch_obj,D=0,R=0,F=0,E=m,J=m,ee=0;ee<S.length;ee++){var z=S[ee][0],X=S[ee][1];switch(!D&&z!==A&&(N.start1=R,N.start2=F),z){case _:N.diffs[D++]=S[ee],N.length2+=X.length,J=J.substring(0,F)+X+J.substring(F);break;case b:N.length1+=X.length,N.diffs[D++]=S[ee],J=J.substring(0,F)+J.substring(F+X.length);break;case A:X.length<=2*this.Patch_Margin&&D&&S.length!=ee+1?(N.diffs[D++]=S[ee],N.length1+=X.length,N.length2+=X.length):X.length>=2*this.Patch_Margin&&D&&(this.patch_addContext_(N,E),x.push(N),N=new O.patch_obj,D=0,E=J,R=F);break}z!==_&&(R+=X.length),z!==b&&(F+=X.length)}return D&&(this.patch_addContext_(N,E),x.push(N)),x},O.prototype.patch_deepCopy=function(p){for(var g=[],y=0;y<p.length;y++){var m=p[y],S=new O.patch_obj;S.diffs=[];for(var x=0;x<m.diffs.length;x++)S.diffs[x]=new O.Diff(m.diffs[x][0],m.diffs[x][1]);S.start1=m.start1,S.start2=m.start2,S.length1=m.length1,S.length2=m.length2,g[y]=S}return g},O.prototype.patch_apply=function(p,g){if(p.length==0)return[g,[]];p=this.patch_deepCopy(p);var y=this.patch_addPadding(p);g=y+g+y,this.patch_splitMax(p);for(var m=0,S=[],x=0;x<p.length;x++){var N=p[x].start2+m,D=this.diff_text1(p[x].diffs),R,F=-1;if(D.length>this.Match_MaxBits?(R=this.match_main(g,D.substring(0,this.Match_MaxBits),N),R!=-1&&(F=this.match_main(g,D.substring(D.length-this.Match_MaxBits),N+D.length-this.Match_MaxBits),(F==-1||R>=F)&&(R=-1))):R=this.match_main(g,D,N),R==-1)S[x]=!1,m-=p[x].length2-p[x].length1;else{S[x]=!0,m=R-N;var E;if(F==-1?E=g.substring(R,R+D.length):E=g.substring(R,F+this.Match_MaxBits),D==E)g=g.substring(0,R)+this.diff_text2(p[x].diffs)+g.substring(R+D.length);else{var J=this.diff_main(D,E,!1);if(D.length>this.Match_MaxBits&&this.diff_levenshtein(J)/D.length>this.Patch_DeleteThreshold)S[x]=!1;else{this.diff_cleanupSemanticLossless(J);for(var ee=0,z,X=0;X<p[x].diffs.length;X++){var te=p[x].diffs[X];te[0]!==A&&(z=this.diff_xIndex(J,ee)),te[0]===_?g=g.substring(0,R+z)+te[1]+g.substring(R+z):te[0]===b&&(g=g.substring(0,R+z)+g.substring(R+this.diff_xIndex(J,ee+te[1].length))),te[0]!==b&&(ee+=te[1].length)}}}}}return g=g.substring(y.length,g.length-y.length),[g,S]},O.prototype.patch_addPadding=function(p){for(var g=this.Patch_Margin,y="",m=1;m<=g;m++)y+=String.fromCharCode(m);for(var m=0;m<p.length;m++)p[m].start1+=g,p[m].start2+=g;var S=p[0],x=S.diffs;if(x.length==0||x[0][0]!=A)x.unshift(new O.Diff(A,y)),S.start1-=g,S.start2-=g,S.length1+=g,S.length2+=g;else if(g>x[0][1].length){var N=g-x[0][1].length;x[0][1]=y.substring(x[0][1].length)+x[0][1],S.start1-=N,S.start2-=N,S.length1+=N,S.length2+=N}if(S=p[p.length-1],x=S.diffs,x.length==0||x[x.length-1][0]!=A)x.push(new O.Diff(A,y)),S.length1+=g,S.length2+=g;else if(g>x[x.length-1][1].length){var N=g-x[x.length-1][1].length;x[x.length-1][1]+=y.substring(0,N),S.length1+=N,S.length2+=N}return y},O.prototype.patch_splitMax=function(p){for(var g=this.Match_MaxBits,y=0;y<p.length;y++)if(!(p[y].length1<=g)){var m=p[y];p.splice(y--,1);for(var S=m.start1,x=m.start2,N="";m.diffs.length!==0;){var D=new O.patch_obj,R=!0;for(D.start1=S-N.length,D.start2=x-N.length,N!==""&&(D.length1=D.length2=N.length,D.diffs.push(new O.Diff(A,N)));m.diffs.length!==0&&D.length1<g-this.Patch_Margin;){var F=m.diffs[0][0],E=m.diffs[0][1];F===_?(D.length2+=E.length,x+=E.length,D.diffs.push(m.diffs.shift()),R=!1):F===b&&D.diffs.length==1&&D.diffs[0][0]==A&&E.length>2*g?(D.length1+=E.length,S+=E.length,R=!1,D.diffs.push(new O.Diff(F,E)),m.diffs.shift()):(E=E.substring(0,g-D.length1-this.Patch_Margin),D.length1+=E.length,S+=E.length,F===A?(D.length2+=E.length,x+=E.length):R=!1,D.diffs.push(new O.Diff(F,E)),E==m.diffs[0][1]?m.diffs.shift():m.diffs[0][1]=m.diffs[0][1].substring(E.length))}N=this.diff_text2(D.diffs),N=N.substring(N.length-this.Patch_Margin);var J=this.diff_text1(m.diffs).substring(0,this.Patch_Margin);J!==""&&(D.length1+=J.length,D.length2+=J.length,D.diffs.length!==0&&D.diffs[D.diffs.length-1][0]===A?D.diffs[D.diffs.length-1][1]+=J:D.diffs.push(new O.Diff(A,J))),R||p.splice(++y,0,D)}}},O.prototype.patch_toText=function(p){for(var g=[],y=0;y<p.length;y++)g[y]=p[y];return g.join("")},O.prototype.patch_fromText=function(p){var g=[];if(!p)return g;for(var y=p.split(`
`),m=0,S=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;m<y.length;){var x=y[m].match(S);if(!x)throw new Error("Invalid patch string: "+y[m]);var N=new O.patch_obj;for(g.push(N),N.start1=parseInt(x[1],10),x[2]===""?(N.start1--,N.length1=1):x[2]=="0"?N.length1=0:(N.start1--,N.length1=parseInt(x[2],10)),N.start2=parseInt(x[3],10),x[4]===""?(N.start2--,N.length2=1):x[4]=="0"?N.length2=0:(N.start2--,N.length2=parseInt(x[4],10)),m++;m<y.length;){var D=y[m].charAt(0);try{var R=decodeURI(y[m].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+R)}if(D=="-")N.diffs.push(new O.Diff(b,R));else if(D=="+")N.diffs.push(new O.Diff(_,R));else if(D==" ")N.diffs.push(new O.Diff(A,R));else{if(D=="@")break;if(D!=="")throw new Error('Invalid patch mode "'+D+'" in: '+R)}m++}}return g},O.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},O.patch_obj.prototype.toString=function(){var p,g;this.length1===0?p=this.start1+",0":this.length1==1?p=this.start1+1:p=this.start1+1+","+this.length1,this.length2===0?g=this.start2+",0":this.length2==1?g=this.start2+1:g=this.start2+1+","+this.length2;for(var y=["@@ -"+p+" +"+g+` @@
`],m,S=0;S<this.diffs.length;S++){switch(this.diffs[S][0]){case _:m="+";break;case b:m="-";break;case A:m=" ";break}y[S+1]=m+encodeURI(this.diffs[S][1])+`
`}return y.join("").replace(/%20/g," ")},W.exports=O,W.exports.diff_match_patch=O,W.exports.DIFF_DELETE=b,W.exports.DIFF_INSERT=_,W.exports.DIFF_EQUAL=A})(Gu);var bf=Gu.exports;(function(W,O){(function(b){b(Us.exports)})(function(b){b.defineSimpleMode=function(D,R){b.defineMode(D,function(F){return b.simpleMode(F,R)})},b.simpleMode=function(D,R){_(R,"start");var F={},E=R.meta||{},J=!1;for(var ee in R)if(ee!=E&&R.hasOwnProperty(ee))for(var z=F[ee]=[],X=R[ee],te=0;te<X.length;te++){var V=X[te];z.push(new g(V,R)),(V.indent||V.dedent)&&(J=!0)}var le={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:J?[]:null}},copyState:function(M){var j={state:M.state,pending:M.pending,local:M.local,localState:null,indent:M.indent&&M.indent.slice(0)};M.localState&&(j.localState=b.copyState(M.local.mode,M.localState)),M.stack&&(j.stack=M.stack.slice(0));for(var he=M.persistentStates;he;he=he.next)j.persistentStates={mode:he.mode,spec:he.spec,state:he.state==M.localState?j.localState:b.copyState(he.mode,he.state),next:j.persistentStates};return j},token:y(F,D),innerMode:function(M){return M.local&&{mode:M.local.mode,state:M.localState}},indent:N(F,E)};if(E)for(var ae in E)E.hasOwnProperty(ae)&&(le[ae]=E[ae]);return le};function _(D,R){if(!D.hasOwnProperty(R))throw new Error("Undefined state "+R+" in simple mode")}function A(D,R){if(!D)return/(?:)/;var F="";return D instanceof RegExp?(D.ignoreCase&&(F="i"),D.unicode&&(F+="u"),D=D.source):D=String(D),new RegExp((R===!1?"":"^")+"(?:"+D+")",F)}function p(D){if(!D)return null;if(D.apply)return D;if(typeof D=="string")return D.replace(/\./g," ");for(var R=[],F=0;F<D.length;F++)R.push(D[F]&&D[F].replace(/\./g," "));return R}function g(D,R){(D.next||D.push)&&_(R,D.next||D.push),this.regex=A(D.regex),this.token=p(D.token),this.data=D}function y(D,R){return function(F,E){if(E.pending){var J=E.pending.shift();return E.pending.length==0&&(E.pending=null),F.pos+=J.text.length,J.token}if(E.local)if(E.local.end&&F.match(E.local.end)){var ee=E.local.endToken||null;return E.local=E.localState=null,ee}else{var ee=E.local.mode.token(F,E.localState),z;return E.local.endScan&&(z=E.local.endScan.exec(F.current()))&&(F.pos=F.start+z.index),ee}for(var X=D[E.state],te=0;te<X.length;te++){var V=X[te],le=(!V.data.sol||F.sol())&&F.match(V.regex);if(le){V.data.next?E.state=V.data.next:V.data.push?((E.stack||(E.stack=[])).push(E.state),E.state=V.data.push):V.data.pop&&E.stack&&E.stack.length&&(E.state=E.stack.pop()),V.data.mode&&S(R,E,V.data.mode,V.token),V.data.indent&&E.indent.push(F.indentation()+R.indentUnit),V.data.dedent&&E.indent.pop();var ae=V.token;if(ae&&ae.apply&&(ae=ae(le)),le.length>2&&V.token&&typeof V.token!="string"){for(var M=2;M<le.length;M++)le[M]&&(E.pending||(E.pending=[])).push({text:le[M],token:V.token[M-1]});return F.backUp(le[0].length-(le[1]?le[1].length:0)),ae[0]}else return ae&&ae.join?ae[0]:ae}}return F.next(),null}}function m(D,R){if(D===R)return!0;if(!D||typeof D!="object"||!R||typeof R!="object")return!1;var F=0;for(var E in D)if(D.hasOwnProperty(E)){if(!R.hasOwnProperty(E)||!m(D[E],R[E]))return!1;F++}for(var E in R)R.hasOwnProperty(E)&&F--;return F==0}function S(D,R,F,E){var J;if(F.persistent)for(var ee=R.persistentStates;ee&&!J;ee=ee.next)(F.spec?m(F.spec,ee.spec):F.mode==ee.mode)&&(J=ee);var z=J?J.mode:F.mode||b.getMode(D,F.spec),X=J?J.state:b.startState(z);F.persistent&&!J&&(R.persistentStates={mode:z,spec:F.spec,state:X,next:R.persistentStates}),R.localState=X,R.local={mode:z,end:F.end&&A(F.end),endScan:F.end&&F.forceEnd!==!1&&A(F.end,!1),endToken:E&&E.join?E[E.length-1]:E}}function x(D,R){for(var F=0;F<R.length;F++)if(R[F]===D)return!0}function N(D,R){return function(F,E,J){if(F.local&&F.local.mode.indent)return F.local.mode.indent(F.localState,E,J);if(F.indent==null||F.local||R.dontIndentStates&&x(F.state,R.dontIndentStates)>-1)return b.Pass;var ee=F.indent.length-1,z=D[F.state];e:for(;;){for(var X=0;X<z.length;X++){var te=z[X];if(te.data.dedent&&te.data.dedentIfLineStart!==!1){var V=te.regex.exec(E);if(V&&V[0]){ee--,(te.next||te.push)&&(z=D[te.next||te.push]),E=E.slice(V[0].length);continue e}}}break}return ee<0?0:F.indent[ee]}}})})();var wf=Object.defineProperty,xf=Object.defineProperties,Sf=Object.getOwnPropertyDescriptors,Au=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,kf=Object.prototype.propertyIsEnumerable,Pu=(W,O,b)=>O in W?wf(W,O,{enumerable:!0,configurable:!0,writable:!0,value:b}):W[O]=b,zl=(W,O)=>{for(var b in O||(O={}))Cf.call(O,b)&&Pu(W,b,O[b]);if(Au)for(var b of Au(O))kf.call(O,b)&&Pu(W,b,O[b]);return W},Lf=(W,O)=>xf(W,Sf(O));!window.CodeMirror&&(window.CodeMirror=Uu);const Na=window.CodeMirror||Uu;var Du=(W,O)=>{const b=W.__vccOpts||W;for(const[_,A]of O)b[_]=A;return b};const Tf=Do({name:"DefaultMode",props:{name:{type:String,default:`cm-textarea-${+new Date}`},value:{type:String,default:""},content:{type:String,default:""},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>null},placeholder:{type:String,default:""}},emits:{ready:W=>W,"update:cminstance":W=>W},setup(W,{emit:O}){const b=$r(),_=$r(null),A=()=>{_.value=Mu(Na.fromTextArea(b.value,W.options)),O("update:cminstance",_.value);const p=Hl(()=>W.cminstance,g=>{var y;g&&((y=W.cminstance)==null||y.setValue(W.value||W.content)),O("ready",Lt(_)),p==null||p()},{deep:!0})};return Tu(()=>{A()}),{textarea:b,initialize:A}}}),Mf=["name","placeholder"];function Df(W,O,b,_,A,p){return Zi(),Mo("textarea",{ref:"textarea",name:W.$props.name,placeholder:W.$props.placeholder},null,8,Mf)}var Eu=Du(Tf,[["render",Df]]);window.diff_match_patch=bf;window.DIFF_DELETE=-1;window.DIFF_INSERT=1;window.DIFF_EQUAL=0;const Of=Do({name:"MergeMode",props:{options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})}},emits:["update:cminstance","ready"],setup(W,{emit:O}){const b=$r(),_=$r(),A=()=>{b.value=Mu(Na.MergeView(_.value,W.options)),O("update:cminstance",b.value),O("ready",b)};return Tu(()=>{A()}),{mergeView:_,initialize:A}}}),Nf={ref:"mergeView"};function Af(W,O,b,_,A,p){return Zi(),Mo("div",Nf,null,512)}var Pf=Du(Of,[["render",Af]]),Fu;(function(W){W.info="info",W.warning="warning",W.error="error"})(Fu||(Fu={}));function Ef(W){const O=/#link#(.+)#link#/g,b=[];let _;for(_=O.exec(W);_;){const A=document.createElement("a"),p=JSON.parse(_[1]),g=Object.entries(p);for(const[y,m]of g)A.setAttribute(y,m);A.className="editor_custom_link",A.innerHTML="logDownload",b.push({start:_.index,end:_.index+_[0].length,node:A}),_=O.exec(W)}return b}function Ff(W){const O=[];function b(){const _=/#log<(\w*)>log#((.|\r\n|\n)*?)#log<(\w*)>log#/g;let A;for(A=_.exec(W);A;){const g=A[0].replace(/\r\n/g,`
`).split(`
`),m=A[2].replace(/\r\n/g,`
`).split(`
`),S=document.createElement("span"),x=A[1];S.className=`c-editor--log__${x}`;let N=0;for(let D=0;D<g.length;D++){const R=g[D],F=m[D],E=S.cloneNode(!1);E.innerText=F,O.push({start:A.index+N,end:A.index+N+R.length,node:E}),N=N+R.length+1}A=_.exec(W)}}return b(),O}const zs=[{regex:/(\[.*?\])([ \t]*)(<error>[ \t])(.+)/,token:["tag","","error.strong","error.strong"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<info>)(.+)(.?)/,token:["tag","","bracket","bracket","hr"],sol:!0},{regex:/(\[.*?\])([ \t]*)(<warning>)(.+)(.?)/,token:["tag","","comment","comment","hr"],sol:!0}];Na.defineSimpleMode("fclog",{start:[...zs,{regex:/.*/,token:"hr"}],error:[...zs,{regex:/.*/,token:"error.strong"}],info:[...zs,{regex:/.*/,token:"bracket"}],warning:[...zs,{regex:/.*\[/,token:"comment"}]});Na.defineSimpleMode("log",{start:[{regex:/^[=]+[^=]*[=]+/,token:"strong"},{regex:/([^\w])([A-Z][\w]*)/,token:["","string"]},{regex:/(^[A-Z][\w]*)/,token:"string"}]});const Wf=Do({name:"CodemirrorFclog",props:{value:{type:String,default:""},name:{type:String,default:`cm-textarea-${+new Date}`},options:{type:Object,default:()=>({})},cminstance:{type:Object,default:()=>({})},placeholder:{type:String,default:""}},emits:["update:cminstance","ready"],setup(W,{emit:O}){const b=$r(),_=$r(null),A=(g=W.cminstance)=>{g.getAllMarks().forEach(x=>x.clear());const m=g.getValue(),S=[].concat(Ef(m)).concat(Ff(m));for(let x=0;x<S.length;x++){const N=S[x];g.markText(g.posFromIndex(N.start),g.posFromIndex(N.end),{replacedWith:N.node})}},p=()=>{var g;_.value=Mu(Na.fromTextArea(b.value,W.options)),O("update:cminstance",Lt(_)),(g=_.value)==null||g.on("change",A)};return Hl(()=>W.cminstance,g=>{var y;g&&(A(W.cminstance),(y=W.cminstance)==null||y.setValue(W.value),O("ready",_))},{deep:!0,immediate:!0}),Tu(()=>{p()}),{initialize:p,textarea:b}}}),_f=["name","placeholder"];function Hf(W,O,b,_,A,p){return Zi(),Mo("textarea",{ref:"textarea",name:W.$props.name,placeholder:W.$props.placeholder},null,8,_f)}var zf=Du(Wf,[["render",Hf]]);const Ku={"update:value":W=>W,change:(W,O)=>({value:W,cm:O}),input:W=>W,ready:W=>W},If=["changes","scroll","beforeChange","cursorActivity","keyHandled","inputRead","electricInput","beforeSelectionChange","viewportChange","swapDoc","gutterClick","gutterContextMenu","focus","blur","refresh","optionChange","scrollCursorIntoView","update"],Rf=()=>{const W={};return If.forEach(O=>{W[O]=(...b)=>b}),W},Bf=zl(zl({},Ku),Rf()),ku={mode:"text",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2};function Uf(W){Promise.resolve().then(()=>{const O=W.getScrollInfo();W.scrollTo(O.left,O.height)})}const Gf=({props:W,cminstance:O,emit:b,internalInstance:_,content:A})=>{const p=Rs(()=>{var m;return W.merge?(m=Lt(O))==null?void 0:m.editor():Lt(O)}),g=()=>{const m=[];return Object.keys(_==null?void 0:_.vnode.props).forEach(S=>{if(S.startsWith("on")){const x=S.replace(S[2],S[2].toLowerCase()).slice(2);!Ku[x]&&m.push(x)}}),m};return{listenerEvents:()=>{p.value.on("change",x=>{const N=x.getValue();N!==A.value&&(A.value=N,A.value&&b("update:value",A.value||""),A.value&&b("input",A.value||""),Promise.resolve().then(()=>{b("change",A.value,x)}),W.keepCursorInEnd&&Uf(x))});const m={};g().filter(x=>!m[x]&&(m[x]=!0)).forEach(x=>{p.value.on(x,(...N)=>{b(x,...N)})})}}};function Kf({props:W,cminstance:O,presetRef:b}){const _=$r(null),A=$r(null),p=Rs(()=>{var D;return W.merge?(D=Lt(O))==null?void 0:D.editor():Lt(O)}),g=()=>{Vu(()=>{var D;(D=p.value)==null||D.refresh()})},y=(D=W.width,R=W.height)=>{var F;_.value=String(D).replace("px",""),A.value=String(R).replace("px","");const E=A.value;(F=p.value)==null||F.setSize(_.value,E)},m=()=>{var D;const R=(D=p.value)==null?void 0:D.getWrapperElement();R==null||R.remove()},S=()=>{var D,R,F;const E=(D=p.value)==null?void 0:D.getDoc().getHistory();(R=b.value)==null||R.initialize(),m(),(F=p.value)==null||F.getDoc().setHistory(E)},x=()=>{const D=document.querySelector(".CodeMirror-gutters");return(D==null?void 0:D.style.left.replace("px",""))!=="0"};return{reload:S,refresh:g,resize:y,destroy:m,containerHeight:A,reviseStyle:()=>{if(g(),!x())return;const D=setInterval(()=>{x()?g():clearInterval(D)},60),R=setTimeout(()=>{clearInterval(D),clearTimeout(R)},400)}}}const Xf=Do({props:{value:{type:String,default:""},options:{type:Object,default:()=>ku},globalOptions:{type:Object,default:()=>ku},placeholder:{type:String,default:""},border:{type:Boolean,default:!1},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},originalStyle:{type:Boolean,default:!1},keepCursorInEnd:{type:Boolean,default:!1},merge:{type:Boolean,default:!1},name:{type:String,default:""},marker:{type:Function,default:()=>null},unseenLines:{type:Array,default:()=>[]}},emits:Bf,setup(W,{expose:O,emit:b}){var _,A;const p=W;typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value(M,j){if(M==null)throw new TypeError("Cannot convert undefined or null to object");const he=Object(M);for(let de=1;de<arguments.length;de++){const ue=arguments[de];if(ue!=null)for(const G in ue)Object.prototype.hasOwnProperty.call(ue,G)&&(he[G]=ue[G])}return he},writable:!0,configurable:!0});const g=$r(null),y=$r(""),m=qu(Eu),S=$r(zl(zl(zl({},ku),p.globalOptions),p.options)),x=$u(),N=p.name||((A=(_=x==null?void 0:x.parent)==null?void 0:_.type)==null?void 0:A.name)||void 0,D=$r(null),R=Rs(()=>{var M;return p.merge?(M=Lt(g))==null?void 0:M.editor():Lt(g)}),{refresh:F,resize:E,destroy:J,containerHeight:ee,reviseStyle:z}=Kf({props:p,cminstance:g,presetRef:D}),{listenerEvents:X}=Gf({props:p,cminstance:g,emit:b,internalInstance:x,content:y}),te=()=>{p.unseenLines!==void 0&&p.marker!==void 0&&p.unseenLines.forEach(M=>{var j,he;const de=(j=g.value)==null?void 0:j.lineInfo(M);(he=g.value)==null||he.setGutterMarker(M,"breakpoints",(de==null?void 0:de.gutterMarkers)?null:p.marker())})},V=M=>{var j,he;const de=(j=g.value)==null?void 0:j.getValue();M!==de&&((he=g.value)==null||he.setValue(M),y.value=M,z()),te()},le=()=>{X(),te(),E(p.width,p.height),b("ready",g.value),Hl([()=>p.width,()=>p.height],([M,j])=>{E(M,j)},{deep:!0})},ae=()=>{if(p.options.mode==="fclog"||p.options.mode==="log"){m.value=zf;return}if(p.merge){m.value=Pf;return}m.value=Eu};return Hl(()=>p.options,M=>{var j;for(const he in p.options)(j=R.value)==null||j.setOption(he,Lt(M[he]))},{deep:!0}),Hl(()=>p.value,M=>{V(M)}),Hl(()=>p.placeholder,M=>{var j;(j=R.value)==null||j.setOption("placeholder",M)}),Hl(()=>p.merge,M=>{ae()},{immediate:!0}),Zu(()=>{J()}),O({cminstance:g,resize:E,refresh:F,destroy:J}),(M,j)=>(Zi(),Mo("div",{class:ju(["codemirror-container",{merge:M.$props.merge,bordered:M.$props.border||M.$props.merge&&!p.originalStyle,"width-auto":!M.$props.width||M.$props.width=="100%","height-auto":!M.$props.height||M.$props.height=="100%","original-style":p.originalStyle}]),style:Wu({height:Lt(ee)+"px"})},[(Zi(),Hu(Ju(Lt(m)),Qu({ref_key:"presetRef",ref:D,cminstance:g.value,"onUpdate:cminstance":j[0]||(j[0]=he=>g.value=he),style:{height:"100%"}},Lf(zl(zl({},M.$props),M.$attrs),{options:S.value,name:Lt(N),content:y.value}),{onReady:le}),null,16,["cminstance"]))],6))}});function Yf(W,O){O===void 0&&(O={});var b=O.insertAt;if(!(!W||typeof document=="undefined")){var _=document.head||document.getElementsByTagName("head")[0],A=document.createElement("style");A.type="text/css",b==="top"&&_.firstChild?_.insertBefore(A,_.firstChild):_.appendChild(A),A.styleSheet?A.styleSheet.cssText=W:A.appendChild(document.createTextNode(W))}}Yf(`.codemirror-container {
  position: relative;
  display: inline-block;
  height: 100%;
  width: fit-content;
  font-size: 12px;
  overflow: hidden;
}
.codemirror-container.bordered {
  border-radius: 4px;
  border: 1px solid #dddddd;
}
.codemirror-container.width-auto {
  width: 100%;
}
.codemirror-container.height-auto {
  height: 100%;
}
.codemirror-container.height-auto .CodeMirror,
.codemirror-container.height-auto .cm-s-default {
  height: 100% !important;
}
.codemirror-container .editor_custom_link {
  cursor: pointer;
  color: #1474f1;
  text-decoration: underline;
}
.codemirror-container .editor_custom_link:hover {
  color: #04b4fa;
}
.codemirror-container:not(.original-style) .CodeMirror-lines .CodeMirror-placeholder.CodeMirror-line-like {
  color: #666;
}
.codemirror-container:not(.original-style) .CodeMirror,
.codemirror-container:not(.original-style) .CodeMirror-merge-pane {
  height: 100%;
  font-family: consolas !important;
}
.codemirror-container:not(.original-style) .CodeMirror-merge,
.codemirror-container:not(.original-style) .CodeMirror-merge-right .CodeMirror {
  height: 100%;
  border: none !important;
}
.codemirror-container:not(.original-style) .c-editor--log__error {
  color: #bb0606;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__info {
  color: #333333;
  font-weight: bold;
}
.codemirror-container:not(.original-style) .c-editor--log__warning {
  color: #ee9900;
}
.codemirror-container:not(.original-style) .c-editor--log__success {
  color: #669600;
}
.codemirror-container:not(.original-style) .cm-header,
.codemirror-container:not(.original-style) .cm-strong {
  font-weight: bold;
}
`);var mi={exports:{}};(function(W,O){(function(b,_){W.exports=_()})(_u,function(){var b=navigator.userAgent,_=navigator.platform,A=/gecko\/\d/i.test(b),p=/MSIE \d/.test(b),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(b),y=/Edge\/(\d+)/.exec(b),m=p||g||y,S=m&&(p?document.documentMode||6:+(y||g)[1]),x=!y&&/WebKit\//.test(b),N=x&&/Qt\/\d+\.\d+/.test(b),D=!y&&/Chrome\/(\d+)/.exec(b),R=D&&+D[1],F=/Opera\//.test(b),E=/Apple Computer/.test(navigator.vendor),J=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(b),ee=/PhantomJS/.test(b),z=E&&(/Mobile\/\w+/.test(b)||navigator.maxTouchPoints>2),X=/Android/.test(b),te=z||X||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(b),V=z||/Mac/.test(_),le=/\bCrOS\b/.test(b),ae=/win/i.test(_),M=F&&b.match(/Version\/(\d*\.\d*)/);M&&(M=Number(M[1])),M&&M>=15&&(F=!1,x=!0);var j=V&&(N||F&&(M==null||M<12.11)),he=A||m&&S>=9;function de(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var ue=function(r,l){var e=r.className,t=de(l).exec(e);if(t){var n=e.slice(t.index+t[0].length);r.className=e.slice(0,t.index)+(n?t[1]+n:"")}};function G(r){for(var l=r.childNodes.length;l>0;--l)r.removeChild(r.firstChild);return r}function fe(r,l){return G(r).appendChild(l)}function L(r,l,e,t){var n=document.createElement(r);if(e&&(n.className=e),t&&(n.style.cssText=t),typeof l=="string")n.appendChild(document.createTextNode(l));else if(l)for(var i=0;i<l.length;++i)n.appendChild(l[i]);return n}function Ae(r,l,e,t){var n=L(r,l,e,t);return n.setAttribute("role","presentation"),n}var Re;document.createRange?Re=function(r,l,e,t){var n=document.createRange();return n.setEnd(t||r,e),n.setStart(r,l),n}:Re=function(r,l,e){var t=document.body.createTextRange();try{t.moveToElementText(r.parentNode)}catch{return t}return t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",l),t};function Je(r,l){if(l.nodeType==3&&(l=l.parentNode),r.contains)return r.contains(l);do if(l.nodeType==11&&(l=l.host),l==r)return!0;while(l=l.parentNode)}function Fe(){var r;try{r=document.activeElement}catch{r=document.body||null}for(;r&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;return r}function je(r,l){var e=r.className;de(l).test(e)||(r.className+=(e?" ":"")+l)}function sr(r,l){for(var e=r.split(" "),t=0;t<e.length;t++)e[t]&&!de(e[t]).test(l)&&(l+=" "+e[t]);return l}var ur=function(r){r.select()};z?ur=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:m&&(ur=function(r){try{r.select()}catch{}});function kt(r){var l=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,l)}}function Yt(r,l,e){l||(l={});for(var t in r)r.hasOwnProperty(t)&&(e!==!1||!l.hasOwnProperty(t))&&(l[t]=r[t]);return l}function Be(r,l,e,t,n){l==null&&(l=r.search(/[^\s\u00a0]/),l==-1&&(l=r.length));for(var i=t||0,o=n||0;;){var a=r.indexOf("	",i);if(a<0||a>=l)return o+(l-i);o+=a-i,o+=e-o%e,i=a+1}}var Ce=function(){this.id=null,this.f=null,this.time=0,this.handler=kt(this.onTimeout,this)};Ce.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},Ce.prototype.set=function(r,l){this.f=l;var e=+new Date+r;(!this.id||e<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=e)};function me(r,l){for(var e=0;e<r.length;++e)if(r[e]==l)return e;return-1}var Oe=50,Pe={toString:function(){return"CodeMirror.Pass"}},Qt={scroll:!1},ze={origin:"*mouse"},ot={origin:"+move"};function fr(r,l,e){for(var t=0,n=0;;){var i=r.indexOf("	",t);i==-1&&(i=r.length);var o=i-t;if(i==r.length||n+o>=l)return t+Math.min(o,l-n);if(n+=i-t,n+=e-n%e,t=i+1,n>=l)return t}}var hr=[""];function rr(r){for(;hr.length<=r;)hr.push(Ee(hr)+" ");return hr[r]}function Ee(r){return r[r.length-1]}function jt(r,l){for(var e=[],t=0;t<r.length;t++)e[t]=l(r[t],t);return e}function Ue(r,l,e){for(var t=0,n=e(l);t<r.length&&e(r[t])<=n;)t++;r.splice(t,0,l)}function Gr(){}function w(r,l){var e;return Object.create?e=Object.create(r):(Gr.prototype=r,e=new Gr),l&&Yt(l,e),e}var P=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function U(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||P.test(r))}function Y(r,l){return l?l.source.indexOf("\\w")>-1&&U(r)?!0:l.test(r):U(r)}function Z(r){for(var l in r)if(r.hasOwnProperty(l)&&r[l])return!1;return!0}var Q=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(r){return r.charCodeAt(0)>=768&&Q.test(r)}function ce(r,l,e){for(;(e<0?l>0:l<r.length)&&oe(r.charAt(l));)l+=e;return l}function pe(r,l,e){for(var t=l>e?-1:1;;){if(l==e)return l;var n=(l+e)/2,i=t<0?Math.ceil(n):Math.floor(n);if(i==l)return r(i)?l:e;r(i)?e=i:l=i+t}}function Le(r,l,e,t){if(!r)return t(l,e,"ltr",0);for(var n=!1,i=0;i<r.length;++i){var o=r[i];(o.from<e&&o.to>l||l==e&&o.to==l)&&(t(Math.max(o.from,l),Math.min(o.to,e),o.level==1?"rtl":"ltr",i),n=!0)}n||t(l,e,"ltr")}var be=null;function We(r,l,e){var t;be=null;for(var n=0;n<r.length;++n){var i=r[n];if(i.from<l&&i.to>l)return n;i.to==l&&(i.from!=i.to&&e=="before"?t=n:be=n),i.from==l&&(i.from!=i.to&&e!="before"?t=n:be=n)}return t!=null?t:be}var tt=function(){var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",l="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function e(u){return u<=247?r.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?l.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":u==8204?"b":"L"}var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function s(u,f,h){this.level=u,this.from=f,this.to=h}return function(u,f){var h=f=="ltr"?"L":"R";if(u.length==0||f=="ltr"&&!t.test(u))return!1;for(var d=u.length,v=[],C=0;C<d;++C)v.push(e(u.charCodeAt(C)));for(var k=0,H=h;k<d;++k){var B=v[k];B=="m"?v[k]=H:H=B}for(var K=0,q=h;K<d;++K){var $=v[K];$=="1"&&q=="r"?v[K]="n":i.test($)&&(q=$,$=="r"&&(v[K]="R"))}for(var ne=1,ie=v[0];ne<d-1;++ne){var ve=v[ne];ve=="+"&&ie=="1"&&v[ne+1]=="1"?v[ne]="1":ve==","&&ie==v[ne+1]&&(ie=="1"||ie=="n")&&(v[ne]=ie),ie=ve}for(var ge=0;ge<d;++ge){var ke=v[ge];if(ke==",")v[ge]="N";else if(ke=="%"){var Me=void 0;for(Me=ge+1;Me<d&&v[Me]=="%";++Me);for(var ut=ge&&v[ge-1]=="!"||Me<d&&v[Me]=="1"?"1":"N",Ke=ge;Ke<Me;++Ke)v[Ke]=ut;ge=Me-1}}for(var it=0,pt=h;it<d;++it){var Xe=v[it];pt=="L"&&Xe=="1"?v[it]="L":i.test(Xe)&&(pt=Xe)}for(var lt=0;lt<d;++lt)if(n.test(v[lt])){var Ye=void 0;for(Ye=lt+1;Ye<d&&n.test(v[Ye]);++Ye);for(var _e=(lt?v[lt-1]:h)=="L",$e=(Ye<d?v[Ye]:h)=="L",yt=_e==$e?_e?"L":"R":h,Nt=lt;Nt<Ye;++Nt)v[Nt]=yt;lt=Ye-1}for(var At=[],Zt,et=0;et<d;)if(o.test(v[et])){var Nr=et;for(++et;et<d&&o.test(v[et]);++et);At.push(new s(0,Nr,et))}else{var wt=et,Sn=At.length,tr=f=="rtl"?1:0;for(++et;et<d&&v[et]!="L";++et);for(var Pt=wt;Pt<et;)if(a.test(v[Pt])){wt<Pt&&(At.splice(Sn,0,new s(1,wt,Pt)),Sn+=tr);var Ar=Pt;for(++Pt;Pt<et&&a.test(v[Pt]);++Pt);At.splice(Sn,0,new s(2,Ar,Pt)),Sn+=tr,wt=Pt}else++Pt;wt<et&&At.splice(Sn,0,new s(1,wt,et))}return f=="ltr"&&(At[0].level==1&&(Zt=u.match(/^\s+/))&&(At[0].from=Zt[0].length,At.unshift(new s(0,0,Zt[0].length))),Ee(At).level==1&&(Zt=u.match(/\s+$/))&&(Ee(At).to-=Zt[0].length,At.push(new s(0,d-Zt[0].length,d)))),f=="rtl"?At.reverse():At}}();function Ne(r,l){var e=r.order;return e==null&&(e=r.order=tt(r.text,l)),e}var mt=[],ye=function(r,l,e){if(r.addEventListener)r.addEventListener(l,e,!1);else if(r.attachEvent)r.attachEvent("on"+l,e);else{var t=r._handlers||(r._handlers={});t[l]=(t[l]||mt).concat(e)}};function Rt(r,l){return r._handlers&&r._handlers[l]||mt}function se(r,l,e){if(r.removeEventListener)r.removeEventListener(l,e,!1);else if(r.detachEvent)r.detachEvent("on"+l,e);else{var t=r._handlers,n=t&&t[l];if(n){var i=me(n,e);i>-1&&(t[l]=n.slice(0,i).concat(n.slice(i+1)))}}}function vt(r,l){var e=Rt(r,l);if(!!e.length)for(var t=Array.prototype.slice.call(arguments,2),n=0;n<e.length;++n)e[n].apply(null,t)}function Ge(r,l,e){return typeof l=="string"&&(l={type:l,preventDefault:function(){this.defaultPrevented=!0}}),vt(r,e||l.type,r,l),xt(l)||l.codemirrorIgnore}function ft(r){var l=r._handlers&&r._handlers.cursorActivity;if(!!l)for(var e=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),t=0;t<l.length;++t)me(e,l[t])==-1&&e.push(l[t])}function qe(r,l){return Rt(r,l).length>0}function br(r){r.prototype.on=function(l,e){ye(this,l,e)},r.prototype.off=function(l,e){se(this,l,e)}}function rt(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function Tt(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function xt(r){return r.defaultPrevented!=null?r.defaultPrevented:r.returnValue==!1}function nr(r){rt(r),Tt(r)}function cr(r){return r.target||r.srcElement}function Kr(r){var l=r.which;return l==null&&(r.button&1?l=1:r.button&2?l=3:r.button&4&&(l=2)),V&&r.ctrlKey&&l==1&&(l=3),l}var Vt=function(){if(m&&S<9)return!1;var r=L("div");return"draggable"in r||"dragDrop"in r}(),Kn;function Oo(r){if(Kn==null){var l=L("span","\u200B");fe(r,L("span",[l,document.createTextNode("x")])),r.firstChild.offsetHeight!=0&&(Kn=l.offsetWidth<=1&&l.offsetHeight>2&&!(m&&S<8))}var e=Kn?L("span","\u200B"):L("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}var ir;function No(r){if(ir!=null)return ir;var l=fe(r,document.createTextNode("A\u062EA")),e=Re(l,0,1).getBoundingClientRect(),t=Re(l,1,2).getBoundingClientRect();return G(r),!e||e.left==e.right?!1:ir=t.right-e.right<3}var Cn=`

b`.split(/\n/).length!=3?function(r){for(var l=0,e=[],t=r.length;l<=t;){var n=r.indexOf(`
`,l);n==-1&&(n=r.length);var i=r.slice(l,r.charAt(n-1)=="\r"?n-1:n),o=i.indexOf("\r");o!=-1?(e.push(i.slice(0,o)),l+=o+1):(e.push(i),l=n+1)}return e}:function(r){return r.split(/\r\n?|\n/)},Il=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var l;try{l=r.ownerDocument.selection.createRange()}catch{}return!l||l.parentElement()!=r?!1:l.compareEndPoints("StartToEnd",l)!=0},Qi=function(){var r=L("div");return"oncopy"in r?!0:(r.setAttribute("oncopy","return;"),typeof r.oncopy=="function")}(),Xr=null;function Yr(r){if(Xr!=null)return Xr;var l=fe(r,L("span","x")),e=l.getBoundingClientRect(),t=Re(l,0,1).getBoundingClientRect();return Xr=Math.abs(e.left-t.left)>1}var wr={},en={};function Pr(r,l){arguments.length>2&&(l.dependencies=Array.prototype.slice.call(arguments,2)),wr[r]=l}function kn(r,l){en[r]=l}function Xn(r){if(typeof r=="string"&&en.hasOwnProperty(r))r=en[r];else if(r&&typeof r.name=="string"&&en.hasOwnProperty(r.name)){var l=en[r.name];typeof l=="string"&&(l={name:l}),r=w(l,r),r.name=l.name}else{if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return Xn("application/xml");if(typeof r=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return Xn("application/json")}return typeof r=="string"?{name:r}:r||{name:"null"}}function Ln(r,l){l=Xn(l);var e=wr[l.name];if(!e)return Ln(r,"text/plain");var t=e(r,l);if(_t.hasOwnProperty(l.name)){var n=_t[l.name];for(var i in n)!n.hasOwnProperty(i)||(t.hasOwnProperty(i)&&(t["_"+i]=t[i]),t[i]=n[i])}if(t.name=l.name,l.helperType&&(t.helperType=l.helperType),l.modeProps)for(var o in l.modeProps)t[o]=l.modeProps[o];return t}var _t={};function tn(r,l){var e=_t.hasOwnProperty(r)?_t[r]:_t[r]={};Yt(l,e)}function lr(r,l){if(l===!0)return l;if(r.copyState)return r.copyState(l);var e={};for(var t in l){var n=l[t];n instanceof Array&&(n=n.concat([])),e[t]=n}return e}function bi(r,l){for(var e;r.innerMode&&(e=r.innerMode(l),!(!e||e.mode==r));)l=e.state,r=e.mode;return e||{mode:r,state:l}}function qr(r,l,e){return r.startState?r.startState(l,e):!0}var gt=function(r,l,e){this.pos=this.start=0,this.string=r,this.tabSize=l||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=e};gt.prototype.eol=function(){return this.pos>=this.string.length},gt.prototype.sol=function(){return this.pos==this.lineStart},gt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},gt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},gt.prototype.eat=function(r){var l=this.string.charAt(this.pos),e;if(typeof r=="string"?e=l==r:e=l&&(r.test?r.test(l):r(l)),e)return++this.pos,l},gt.prototype.eatWhile=function(r){for(var l=this.pos;this.eat(r););return this.pos>l},gt.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},gt.prototype.skipToEnd=function(){this.pos=this.string.length},gt.prototype.skipTo=function(r){var l=this.string.indexOf(r,this.pos);if(l>-1)return this.pos=l,!0},gt.prototype.backUp=function(r){this.pos-=r},gt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Be(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Be(this.string,this.lineStart,this.tabSize):0)},gt.prototype.indentation=function(){return Be(this.string,null,this.tabSize)-(this.lineStart?Be(this.string,this.lineStart,this.tabSize):0)},gt.prototype.match=function(r,l,e){if(typeof r=="string"){var t=function(o){return e?o.toLowerCase():o},n=this.string.substr(this.pos,r.length);if(t(n)==t(r))return l!==!1&&(this.pos+=r.length),!0}else{var i=this.string.slice(this.pos).match(r);return i&&i.index>0?null:(i&&l!==!1&&(this.pos+=i[0].length),i)}},gt.prototype.current=function(){return this.string.slice(this.start,this.pos)},gt.prototype.hideFirstChars=function(r,l){this.lineStart+=r;try{return l()}finally{this.lineStart-=r}},gt.prototype.lookAhead=function(r){var l=this.lineOracle;return l&&l.lookAhead(r)},gt.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};function Se(r,l){if(l-=r.first,l<0||l>=r.size)throw new Error("There is no line "+(l+r.first)+" in the document.");for(var e=r;!e.lines;)for(var t=0;;++t){var n=e.children[t],i=n.chunkSize();if(l<i){e=n;break}l-=i}return e.lines[l]}function ct(r,l,e){var t=[],n=l.line;return r.iter(l.line,e.line+1,function(i){var o=i.text;n==e.line&&(o=o.slice(0,e.ch)),n==l.line&&(o=o.slice(l.ch)),t.push(o),++n}),t}function we(r,l,e){var t=[];return r.iter(l,e,function(n){t.push(n.text)}),t}function Bt(r,l){var e=l-r.height;if(e)for(var t=r;t;t=t.parent)t.height+=e}function Ve(r){if(r.parent==null)return null;for(var l=r.parent,e=me(l.lines,r),t=l.parent;t;l=t,t=t.parent)for(var n=0;t.children[n]!=l;++n)e+=t.children[n].chunkSize();return e+l.first}function Ut(r,l){var e=r.first;e:do{for(var t=0;t<r.children.length;++t){var n=r.children[t],i=n.height;if(l<i){r=n;continue e}l-=i,e+=n.chunkSize()}return e}while(!r.lines);for(var o=0;o<r.lines.length;++o){var a=r.lines[o],s=a.height;if(l<s)break;l-=s}return e+o}function Qe(r,l){return l>=r.first&&l<r.first+r.size}function xr(r,l){return String(r.lineNumberFormatter(l+r.firstLineNumber))}function c(r,l,e){if(e===void 0&&(e=null),!(this instanceof c))return new c(r,l,e);this.line=r,this.ch=l,this.sticky=e}function T(r,l){return r.line-l.line||r.ch-l.ch}function I(r,l){return r.sticky==l.sticky&&T(r,l)==0}function re(r){return c(r.line,r.ch)}function Te(r,l){return T(r,l)<0?l:r}function He(r,l){return T(r,l)<0?r:l}function nt(r,l){return Math.max(r.first,Math.min(l,r.first+r.size-1))}function xe(r,l){if(l.line<r.first)return c(r.first,0);var e=r.first+r.size-1;return l.line>e?c(e,Se(r,e).text.length):dr(l,Se(r,l.line).text.length)}function dr(r,l){var e=r.ch;return e==null||e>l?c(r.line,l):e<0?c(r.line,0):r}function De(r,l){for(var e=[],t=0;t<l.length;t++)e[t]=xe(r,l[t]);return e}var Rl=function(r,l){this.state=r,this.lookAhead=l},Er=function(r,l,e,t){this.state=l,this.doc=r,this.line=e,this.maxLookAhead=t||0,this.baseTokens=null,this.baseTokenPos=1};Er.prototype.lookAhead=function(r){var l=this.doc.getLine(this.line+r);return l!=null&&r>this.maxLookAhead&&(this.maxLookAhead=r),l},Er.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var l=this.baseTokens[this.baseTokenPos+1];return{type:l&&l.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Er.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Er.fromSaved=function(r,l,e){return l instanceof Rl?new Er(r,lr(r.mode,l.state),e,l.lookAhead):new Er(r,lr(r.mode,l),e)},Er.prototype.save=function(r){var l=r!==!1?lr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Rl(l,this.maxLookAhead):l};function Ji(r,l,e,t){var n=[r.state.modeGen],i={};Eo(r,l.text,r.doc.mode,e,function(u,f){return n.push(u,f)},i,t);for(var o=e.state,a=function(u){e.baseTokens=n;var f=r.state.overlays[u],h=1,d=0;e.state=!0,Eo(r,l.text,f.mode,e,function(v,C){for(var k=h;d<v;){var H=n[h];H>v&&n.splice(h,1,v,n[h+1],H),h+=2,d=Math.min(v,H)}if(!!C)if(f.opaque)n.splice(k,h-k,v,"overlay "+C),h=k+2;else for(;k<h;k+=2){var B=n[k+1];n[k+1]=(B?B+" ":"")+"overlay "+C}},i),e.state=o,e.baseTokens=null,e.baseTokenPos=1},s=0;s<r.state.overlays.length;++s)a(s);return{styles:n,classes:i.bgClass||i.textClass?i:null}}function Fr(r,l,e){if(!l.styles||l.styles[0]!=r.state.modeGen){var t=wi(r,Ve(l)),n=l.text.length>r.options.maxHighlightLength&&lr(r.doc.mode,t.state),i=Ji(r,l,t);n&&(t.state=n),l.stateAfter=t.save(!n),l.styles=i.styles,i.classes?l.styleClasses=i.classes:l.styleClasses&&(l.styleClasses=null),e===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return l.styles}function wi(r,l,e){var t=r.doc,n=r.display;if(!t.mode.startState)return new Er(t,!0,l);var i=Aa(r,l,e),o=i>t.first&&Se(t,i-1).stateAfter,a=o?Er.fromSaved(t,o,i):new Er(t,qr(t.mode),i);return t.iter(i,l,function(s){Bl(r,s.text,a);var u=a.line;s.stateAfter=u==l-1||u%5==0||u>=n.viewFrom&&u<n.viewTo?a.save():null,a.nextLine()}),e&&(t.modeFrontier=a.line),a}function Bl(r,l,e,t){var n=r.doc.mode,i=new gt(l,r.options.tabSize,e);for(i.start=i.pos=t||0,l==""&&xi(n,e.state);!i.eol();)ji(n,i,e.state),i.start=i.pos}function xi(r,l){if(r.blankLine)return r.blankLine(l);if(!!r.innerMode){var e=bi(r,l);if(e.mode.blankLine)return e.mode.blankLine(e.state)}}function ji(r,l,e,t){for(var n=0;n<10;n++){t&&(t[0]=bi(r,e).mode);var i=r.token(l,e);if(l.pos>l.start)return i}throw new Error("Mode "+r.name+" failed to advance stream.")}var Ao=function(r,l,e){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=l||null,this.state=e};function Ul(r,l,e,t){var n=r.doc,i=n.mode,o;l=xe(n,l);var a=Se(n,l.line),s=wi(r,l.line,e),u=new gt(a.text,r.options.tabSize,s),f;for(t&&(f=[]);(t||u.pos<l.ch)&&!u.eol();)u.start=u.pos,o=ji(i,u,s.state),t&&f.push(new Ao(u,o,lr(n.mode,s.state)));return t?f:new Ao(u,o,s.state)}function Po(r,l){if(r)for(;;){var e=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!e)break;r=r.slice(0,e.index)+r.slice(e.index+e[0].length);var t=e[1]?"bgClass":"textClass";l[t]==null?l[t]=e[2]:new RegExp("(?:^|\\s)"+e[2]+"(?:$|\\s)").test(l[t])||(l[t]+=" "+e[2])}return r}function Eo(r,l,e,t,n,i,o){var a=e.flattenSpans;a==null&&(a=r.options.flattenSpans);var s=0,u=null,f=new gt(l,r.options.tabSize,t),h,d=r.options.addModeClass&&[null];for(l==""&&Po(xi(e,t.state),i);!f.eol();){if(f.pos>r.options.maxHighlightLength?(a=!1,o&&Bl(r,l,t,f.pos),f.pos=l.length,h=null):h=Po(ji(e,f,t.state,d),i),d){var v=d[0].name;v&&(h="m-"+(h?v+" "+h:v))}if(!a||u!=h){for(;s<f.start;)s=Math.min(f.start,s+5e3),n(s,u);u=h}f.start=f.pos}for(;s<f.pos;){var C=Math.min(f.pos,s+5e3);n(C,u),s=C}}function Aa(r,l,e){for(var t,n,i=r.doc,o=e?-1:l-(r.doc.mode.innerMode?1e3:100),a=l;a>o;--a){if(a<=i.first)return i.first;var s=Se(i,a-1),u=s.stateAfter;if(u&&(!e||a+(u instanceof Rl?u.lookAhead:0)<=i.modeFrontier))return a;var f=Be(s.text,null,r.options.tabSize);(n==null||t>f)&&(n=a-1,t=f)}return n}function Pa(r,l){if(r.modeFrontier=Math.min(r.modeFrontier,l),!(r.highlightFrontier<l-10)){for(var e=r.first,t=l-1;t>e;t--){var n=Se(r,t).stateAfter;if(n&&(!(n instanceof Rl)||t+n.lookAhead<l)){e=t+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,e)}}var Ea=!1,rn=!1;function Fa(){Ea=!0}function nn(){rn=!0}function Gl(r,l,e){this.marker=r,this.from=l,this.to=e}function Vi(r,l){if(r)for(var e=0;e<r.length;++e){var t=r[e];if(t.marker==l)return t}}function Kl(r,l){for(var e,t=0;t<r.length;++t)r[t]!=l&&(e||(e=[])).push(r[t]);return e}function $i(r,l,e){var t=e&&window.WeakSet&&(e.markedSpans||(e.markedSpans=new WeakSet));t&&r.markedSpans&&t.has(r.markedSpans)?r.markedSpans.push(l):(r.markedSpans=r.markedSpans?r.markedSpans.concat([l]):[l],t&&t.add(r.markedSpans)),l.marker.attachLine(r)}function Gs(r,l,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],o=i.marker,a=i.from==null||(o.inclusiveLeft?i.from<=l:i.from<l);if(a||i.from==l&&o.type=="bookmark"&&(!e||!i.marker.insertLeft)){var s=i.to==null||(o.inclusiveRight?i.to>=l:i.to>l);(t||(t=[])).push(new Gl(o,i.from,s?null:i.to))}}return t}function Ks(r,l,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],o=i.marker,a=i.to==null||(o.inclusiveRight?i.to>=l:i.to>l);if(a||i.from==l&&o.type=="bookmark"&&(!e||i.marker.insertLeft)){var s=i.from==null||(o.inclusiveLeft?i.from<=l:i.from<l);(t||(t=[])).push(new Gl(o,s?null:i.from-l,i.to==null?null:i.to-l))}}return t}function Fo(r,l){if(l.full)return null;var e=Qe(r,l.from.line)&&Se(r,l.from.line).markedSpans,t=Qe(r,l.to.line)&&Se(r,l.to.line).markedSpans;if(!e&&!t)return null;var n=l.from.ch,i=l.to.ch,o=T(l.from,l.to)==0,a=Gs(e,n,o),s=Ks(t,i,o),u=l.text.length==1,f=Ee(l.text).length+(u?n:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(d.to==null){var v=Vi(s,d.marker);v?u&&(d.to=v.to==null?null:v.to+f):d.to=n}}if(s)for(var C=0;C<s.length;++C){var k=s[C];if(k.to!=null&&(k.to+=f),k.from==null){var H=Vi(a,k.marker);H||(k.from=f,u&&(a||(a=[])).push(k))}else k.from+=f,u&&(a||(a=[])).push(k)}a&&(a=Wa(a)),s&&s!=a&&(s=Wa(s));var B=[a];if(!u){var K=l.text.length-2,q;if(K>0&&a)for(var $=0;$<a.length;++$)a[$].to==null&&(q||(q=[])).push(new Gl(a[$].marker,null,null));for(var ne=0;ne<K;++ne)B.push(q);B.push(s)}return B}function Wa(r){for(var l=0;l<r.length;++l){var e=r[l];e.from!=null&&e.from==e.to&&e.marker.clearWhenEmpty!==!1&&r.splice(l--,1)}return r.length?r:null}function Wo(r,l,e){var t=null;if(r.iter(l.line,e.line+1,function(v){if(v.markedSpans)for(var C=0;C<v.markedSpans.length;++C){var k=v.markedSpans[C].marker;k.readOnly&&(!t||me(t,k)==-1)&&(t||(t=[])).push(k)}}),!t)return null;for(var n=[{from:l,to:e}],i=0;i<t.length;++i)for(var o=t[i],a=o.find(0),s=0;s<n.length;++s){var u=n[s];if(!(T(u.to,a.from)<0||T(u.from,a.to)>0)){var f=[s,1],h=T(u.from,a.from),d=T(u.to,a.to);(h<0||!o.inclusiveLeft&&!h)&&f.push({from:u.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&f.push({from:a.to,to:u.to}),n.splice.apply(n,f),s+=f.length-3}}return n}function _o(r){var l=r.markedSpans;if(!!l){for(var e=0;e<l.length;++e)l[e].marker.detachLine(r);r.markedSpans=null}}function _a(r,l){if(!!l){for(var e=0;e<l.length;++e)l[e].marker.attachLine(r);r.markedSpans=l}}function el(r){return r.inclusiveLeft?-1:0}function tl(r){return r.inclusiveRight?1:0}function Si(r,l){var e=r.lines.length-l.lines.length;if(e!=0)return e;var t=r.find(),n=l.find(),i=T(t.from,n.from)||el(r)-el(l);if(i)return-i;var o=T(t.to,n.to)||tl(r)-tl(l);return o||l.id-r.id}function rl(r,l){var e=rn&&r.markedSpans,t;if(e)for(var n=void 0,i=0;i<e.length;++i)n=e[i],n.marker.collapsed&&(l?n.from:n.to)==null&&(!t||Si(t,n.marker)<0)&&(t=n.marker);return t}function Xl(r){return rl(r,!0)}function nl(r){return rl(r,!1)}function Ha(r,l){var e=rn&&r.markedSpans,t;if(e)for(var n=0;n<e.length;++n){var i=e[n];i.marker.collapsed&&(i.from==null||i.from<l)&&(i.to==null||i.to>l)&&(!t||Si(t,i.marker)<0)&&(t=i.marker)}return t}function il(r,l,e,t,n){var i=Se(r,l),o=rn&&i.markedSpans;if(o)for(var a=0;a<o.length;++a){var s=o[a];if(!!s.marker.collapsed){var u=s.marker.find(0),f=T(u.from,e)||el(s.marker)-el(n),h=T(u.to,t)||tl(s.marker)-tl(n);if(!(f>=0&&h<=0||f<=0&&h>=0)&&(f<=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?T(u.to,e)>=0:T(u.to,e)>0)||f>=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?T(u.from,t)<=0:T(u.from,t)<0)))return!0}}}function Wr(r){for(var l;l=Xl(r);)r=l.find(-1,!0).line;return r}function za(r){for(var l;l=nl(r);)r=l.find(1,!0).line;return r}function _r(r){for(var l,e;l=nl(r);)r=l.find(1,!0).line,(e||(e=[])).push(r);return e}function Ho(r,l){var e=Se(r,l),t=Wr(e);return e==t?l:Ve(t)}function Ia(r,l){if(l>r.lastLine())return l;var e=Se(r,l),t;if(!Zr(r,e))return l;for(;t=nl(e);)e=t.find(1,!0).line;return Ve(e)+1}function Zr(r,l){var e=rn&&l.markedSpans;if(e){for(var t=void 0,n=0;n<e.length;++n)if(t=e[n],!!t.marker.collapsed){if(t.from==null)return!0;if(!t.marker.widgetNode&&t.from==0&&t.marker.inclusiveLeft&&Yl(r,l,t))return!0}}}function Yl(r,l,e){if(e.to==null){var t=e.marker.find(1,!0);return Yl(r,t.line,Vi(t.line.markedSpans,e.marker))}if(e.marker.inclusiveRight&&e.to==l.text.length)return!0;for(var n=void 0,i=0;i<l.markedSpans.length;++i)if(n=l.markedSpans[i],n.marker.collapsed&&!n.marker.widgetNode&&n.from==e.to&&(n.to==null||n.to!=e.from)&&(n.marker.inclusiveLeft||e.marker.inclusiveRight)&&Yl(r,l,n))return!0}function Jt(r){r=Wr(r);for(var l=0,e=r.parent,t=0;t<e.lines.length;++t){var n=e.lines[t];if(n==r)break;l+=n.height}for(var i=e.parent;i;e=i,i=e.parent)for(var o=0;o<i.children.length;++o){var a=i.children[o];if(a==e)break;l+=a.height}return l}function Ci(r){if(r.height==0)return 0;for(var l=r.text.length,e,t=r;e=Xl(t);){var n=e.find(0,!0);t=n.from.line,l+=n.from.ch-n.to.ch}for(t=r;e=nl(t);){var i=e.find(0,!0);l-=t.text.length-i.from.ch,t=i.to.line,l+=t.text.length-i.to.ch}return l}function Hr(r){var l=r.display,e=r.doc;l.maxLine=Se(e,e.first),l.maxLineLength=Ci(l.maxLine),l.maxLineChanged=!0,e.iter(function(t){var n=Ci(t);n>l.maxLineLength&&(l.maxLineLength=n,l.maxLine=t)})}var ln=function(r,l,e){this.text=r,_a(this,l),this.height=e?e(this):1};ln.prototype.lineNo=function(){return Ve(this)},br(ln);function zo(r,l,e,t){r.text=l,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),r.order!=null&&(r.order=null),_o(r),_a(r,e);var n=t?t(r):1;n!=r.height&&Bt(r,n)}function ki(r){r.parent=null,_o(r)}var Xs={},Ys={};function Ra(r,l){if(!r||/^\s*$/.test(r))return null;var e=l.addModeClass?Ys:Xs;return e[r]||(e[r]=r.replace(/\S+/g,"cm-$&"))}function Ba(r,l){var e=Ae("span",null,null,x?"padding-right: .1px":null),t={pre:Ae("pre",[e],"CodeMirror-line"),content:e,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};l.measure={};for(var n=0;n<=(l.rest?l.rest.length:0);n++){var i=n?l.rest[n-1]:l.line,o=void 0;t.pos=0,t.addToken=Ga,No(r.display.measure)&&(o=Ne(i,r.doc.direction))&&(t.addToken=Zs(t.addToken,o)),t.map=[];var a=l!=r.display.externalMeasured&&Ve(i);Qs(i,t,Fr(r,i,a)),i.styleClasses&&(i.styleClasses.bgClass&&(t.bgClass=sr(i.styleClasses.bgClass,t.bgClass||"")),i.styleClasses.textClass&&(t.textClass=sr(i.styleClasses.textClass,t.textClass||""))),t.map.length==0&&t.map.push(0,0,t.content.appendChild(Oo(r.display.measure))),n==0?(l.measure.map=t.map,l.measure.cache={}):((l.measure.maps||(l.measure.maps=[])).push(t.map),(l.measure.caches||(l.measure.caches=[])).push({}))}if(x){var s=t.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(t.content.className="cm-tab-wrap-hack")}return vt(r,"renderLine",r,l.line,t.pre),t.pre.className&&(t.textClass=sr(t.pre.className,t.textClass||"")),t}function Ua(r){var l=L("span","\u2022","cm-invalidchar");return l.title="\\u"+r.charCodeAt(0).toString(16),l.setAttribute("aria-label",l.title),l}function Ga(r,l,e,t,n,i,o){if(!!l){var a=r.splitSpaces?qs(l,r.trailingSpace):l,s=r.cm.state.specialChars,u=!1,f;if(!s.test(l))r.col+=l.length,f=document.createTextNode(a),r.map.push(r.pos,r.pos+l.length,f),m&&S<9&&(u=!0),r.pos+=l.length;else{f=document.createDocumentFragment();for(var h=0;;){s.lastIndex=h;var d=s.exec(l),v=d?d.index-h:l.length-h;if(v){var C=document.createTextNode(a.slice(h,h+v));m&&S<9?f.appendChild(L("span",[C])):f.appendChild(C),r.map.push(r.pos,r.pos+v,C),r.col+=v,r.pos+=v}if(!d)break;h+=v+1;var k=void 0;if(d[0]=="	"){var H=r.cm.options.tabSize,B=H-r.col%H;k=f.appendChild(L("span",rr(B),"cm-tab")),k.setAttribute("role","presentation"),k.setAttribute("cm-text","	"),r.col+=B}else d[0]=="\r"||d[0]==`
`?(k=f.appendChild(L("span",d[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),k.setAttribute("cm-text",d[0]),r.col+=1):(k=r.cm.options.specialCharPlaceholder(d[0]),k.setAttribute("cm-text",d[0]),m&&S<9?f.appendChild(L("span",[k])):f.appendChild(k),r.col+=1);r.map.push(r.pos,r.pos+1,k),r.pos++}}if(r.trailingSpace=a.charCodeAt(l.length-1)==32,e||t||n||u||i||o){var K=e||"";t&&(K+=t),n&&(K+=n);var q=L("span",[f],K,i);if(o)for(var $ in o)o.hasOwnProperty($)&&$!="style"&&$!="class"&&q.setAttribute($,o[$]);return r.content.appendChild(q)}r.content.appendChild(f)}}function qs(r,l){if(r.length>1&&!/  /.test(r))return r;for(var e=l,t="",n=0;n<r.length;n++){var i=r.charAt(n);i==" "&&e&&(n==r.length-1||r.charCodeAt(n+1)==32)&&(i="\xA0"),t+=i,e=i==" "}return t}function Zs(r,l){return function(e,t,n,i,o,a,s){n=n?n+" cm-force-border":"cm-force-border";for(var u=e.pos,f=u+t.length;;){for(var h=void 0,d=0;d<l.length&&(h=l[d],!(h.to>u&&h.from<=u));d++);if(h.to>=f)return r(e,t,n,i,o,a,s);r(e,t.slice(0,h.to-u),n,i,null,a,s),i=null,t=t.slice(h.to-u),u=h.to}}}function Ka(r,l,e,t){var n=!t&&e.widgetNode;n&&r.map.push(r.pos,r.pos+l,n),!t&&r.cm.display.input.needsContentAttribute&&(n||(n=r.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",e.id)),n&&(r.cm.display.input.setUneditable(n),r.content.appendChild(n)),r.pos+=l,r.trailingSpace=!1}function Qs(r,l,e){var t=r.markedSpans,n=r.text,i=0;if(!t){for(var o=1;o<e.length;o+=2)l.addToken(l,n.slice(i,i=e[o]),Ra(e[o+1],l.cm.options));return}for(var a=n.length,s=0,u=1,f="",h,d,v=0,C,k,H,B,K;;){if(v==s){C=k=H=d="",K=null,B=null,v=1/0;for(var q=[],$=void 0,ne=0;ne<t.length;++ne){var ie=t[ne],ve=ie.marker;if(ve.type=="bookmark"&&ie.from==s&&ve.widgetNode)q.push(ve);else if(ie.from<=s&&(ie.to==null||ie.to>s||ve.collapsed&&ie.to==s&&ie.from==s)){if(ie.to!=null&&ie.to!=s&&v>ie.to&&(v=ie.to,k=""),ve.className&&(C+=" "+ve.className),ve.css&&(d=(d?d+";":"")+ve.css),ve.startStyle&&ie.from==s&&(H+=" "+ve.startStyle),ve.endStyle&&ie.to==v&&($||($=[])).push(ve.endStyle,ie.to),ve.title&&((K||(K={})).title=ve.title),ve.attributes)for(var ge in ve.attributes)(K||(K={}))[ge]=ve.attributes[ge];ve.collapsed&&(!B||Si(B.marker,ve)<0)&&(B=ie)}else ie.from>s&&v>ie.from&&(v=ie.from)}if($)for(var ke=0;ke<$.length;ke+=2)$[ke+1]==v&&(k+=" "+$[ke]);if(!B||B.from==s)for(var Me=0;Me<q.length;++Me)Ka(l,0,q[Me]);if(B&&(B.from||0)==s){if(Ka(l,(B.to==null?a+1:B.to)-s,B.marker,B.from==null),B.to==null)return;B.to==s&&(B=!1)}}if(s>=a)break;for(var ut=Math.min(a,v);;){if(f){var Ke=s+f.length;if(!B){var it=Ke>ut?f.slice(0,ut-s):f;l.addToken(l,it,h?h+C:C,H,s+it.length==v?k:"",d,K)}if(Ke>=ut){f=f.slice(ut-s),s=ut;break}s=Ke,H=""}f=n.slice(i,i=e[u++]),h=Ra(e[u++],l.cm.options)}}}function Io(r,l,e){this.line=l,this.rest=_r(l),this.size=this.rest?Ve(Ee(this.rest))-e+1:1,this.node=this.text=null,this.hidden=Zr(r,l)}function ql(r,l,e){for(var t=[],n,i=l;i<e;i=n){var o=new Io(r.doc,Se(r.doc,i),i);n=i+o.size,t.push(o)}return t}var Yn=null;function Zl(r){Yn?Yn.ops.push(r):r.ownsGroup=Yn={ops:[r],delayedCallbacks:[]}}function Li(r){var l=r.delayedCallbacks,e=0;do{for(;e<l.length;e++)l[e].call(null);for(var t=0;t<r.ops.length;t++){var n=r.ops[t];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(e<l.length)}function Js(r,l){var e=r.ownsGroup;if(!!e)try{Li(e)}finally{Yn=null,l(e)}}var ll=null;function Ht(r,l){var e=Rt(r,l);if(!!e.length){var t=Array.prototype.slice.call(arguments,2),n;Yn?n=Yn.delayedCallbacks:ll?n=ll:(n=ll=[],setTimeout(ol,0));for(var i=function(a){n.push(function(){return e[a].apply(null,t)})},o=0;o<e.length;++o)i(o)}}function ol(){var r=ll;ll=null;for(var l=0;l<r.length;++l)r[l]()}function Ft(r,l,e,t){for(var n=0;n<l.changes.length;n++){var i=l.changes[n];i=="text"?js(r,l):i=="gutter"?Ya(r,l,e,t):i=="class"?Ql(r,l):i=="widget"&&Ro(r,l,t)}l.changes=null}function al(r){return r.node==r.text&&(r.node=L("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),m&&S<8&&(r.node.style.zIndex=2)),r.node}function Xa(r,l){var e=l.bgClass?l.bgClass+" "+(l.line.bgClass||""):l.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),l.background)e?l.background.className=e:(l.background.parentNode.removeChild(l.background),l.background=null);else if(e){var t=al(l);l.background=t.insertBefore(L("div",null,e),t.firstChild),r.display.input.setUneditable(l.background)}}function Ti(r,l){var e=r.display.externalMeasured;return e&&e.line==l.line?(r.display.externalMeasured=null,l.measure=e.measure,e.built):Ba(r,l)}function js(r,l){var e=l.text.className,t=Ti(r,l);l.text==l.node&&(l.node=t.pre),l.text.parentNode.replaceChild(t.pre,l.text),l.text=t.pre,t.bgClass!=l.bgClass||t.textClass!=l.textClass?(l.bgClass=t.bgClass,l.textClass=t.textClass,Ql(r,l)):e&&(l.text.className=e)}function Ql(r,l){Xa(r,l),l.line.wrapClass?al(l).className=l.line.wrapClass:l.node!=l.text&&(l.node.className="");var e=l.textClass?l.textClass+" "+(l.line.textClass||""):l.line.textClass;l.text.className=e||""}function Ya(r,l,e,t){if(l.gutter&&(l.node.removeChild(l.gutter),l.gutter=null),l.gutterBackground&&(l.node.removeChild(l.gutterBackground),l.gutterBackground=null),l.line.gutterClass){var n=al(l);l.gutterBackground=L("div",null,"CodeMirror-gutter-background "+l.line.gutterClass,"left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px; width: "+t.gutterTotalWidth+"px"),r.display.input.setUneditable(l.gutterBackground),n.insertBefore(l.gutterBackground,l.text)}var i=l.line.gutterMarkers;if(r.options.lineNumbers||i){var o=al(l),a=l.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),r.display.input.setUneditable(a),o.insertBefore(a,l.text),l.line.gutterClass&&(a.className+=" "+l.line.gutterClass),r.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(l.lineNumber=a.appendChild(L("div",xr(r.options,e),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<r.display.gutterSpecs.length;++s){var u=r.display.gutterSpecs[s].className,f=i.hasOwnProperty(u)&&i[u];f&&a.appendChild(L("div",[f],"CodeMirror-gutter-elt","left: "+t.gutterLeft[u]+"px; width: "+t.gutterWidth[u]+"px"))}}}function Ro(r,l,e){l.alignable&&(l.alignable=null);for(var t=de("CodeMirror-linewidget"),n=l.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,t.test(n.className)&&l.node.removeChild(n);Za(r,l,e)}function qa(r,l,e,t){var n=Ti(r,l);return l.text=l.node=n.pre,n.bgClass&&(l.bgClass=n.bgClass),n.textClass&&(l.textClass=n.textClass),Ql(r,l),Ya(r,l,e,t),Za(r,l,t),l.node}function Za(r,l,e){if(Qa(r,l.line,l,e,!0),l.rest)for(var t=0;t<l.rest.length;t++)Qa(r,l.rest[t],l,e,!1)}function Qa(r,l,e,t,n){if(!!l.widgets)for(var i=al(e),o=0,a=l.widgets;o<a.length;++o){var s=a[o],u=L("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ja(s,u,e,t),r.display.input.setUneditable(u),n&&s.above?i.insertBefore(u,e.gutter||e.text):i.appendChild(u),Ht(s,"redraw")}}function Ja(r,l,e,t){if(r.noHScroll){(e.alignable||(e.alignable=[])).push(l);var n=t.wrapperWidth;l.style.left=t.fixedPos+"px",r.coverGutter||(n-=t.gutterTotalWidth,l.style.paddingLeft=t.gutterTotalWidth+"px"),l.style.width=n+"px"}r.coverGutter&&(l.style.zIndex=5,l.style.position="relative",r.noHScroll||(l.style.marginLeft=-t.gutterTotalWidth+"px"))}function Mi(r){if(r.height!=null)return r.height;var l=r.doc.cm;if(!l)return 0;if(!Je(document.body,r.node)){var e="position: relative;";r.coverGutter&&(e+="margin-left: -"+l.display.gutters.offsetWidth+"px;"),r.noHScroll&&(e+="width: "+l.display.wrapper.clientWidth+"px;"),fe(l.display.measure,L("div",[r.node],null,e))}return r.height=r.node.parentNode.offsetHeight}function on(r,l){for(var e=cr(l);e!=r.wrapper;e=e.parentNode)if(!e||e.nodeType==1&&e.getAttribute("cm-ignore-events")=="true"||e.parentNode==r.sizer&&e!=r.mover)return!0}function Tn(r){return r.lineSpace.offsetTop}function zr(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function sl(r){if(r.cachedPaddingH)return r.cachedPaddingH;var l=fe(r.measure,L("pre","x","CodeMirror-line-like")),e=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,t={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return!isNaN(t.left)&&!isNaN(t.right)&&(r.cachedPaddingH=t),t}function Sr(r){return Oe-r.display.nativeBarWidth}function Mn(r){return r.display.scroller.clientWidth-Sr(r)-r.display.barWidth}function Cr(r){return r.display.scroller.clientHeight-Sr(r)-r.display.barHeight}function qn(r,l,e){var t=r.options.lineWrapping,n=t&&Mn(r);if(!l.measure.heights||t&&l.measure.width!=n){var i=l.measure.heights=[];if(t){l.measure.width=n;for(var o=l.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var s=o[a],u=o[a+1];Math.abs(s.bottom-u.bottom)>2&&i.push((s.bottom+u.top)/2-e.top)}}i.push(e.bottom-e.top)}}function Jl(r,l,e){if(r.line==l)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var t=0;t<r.rest.length;t++)if(r.rest[t]==l)return{map:r.measure.maps[t],cache:r.measure.caches[t]};for(var n=0;n<r.rest.length;n++)if(Ve(r.rest[n])>e)return{map:r.measure.maps[n],cache:r.measure.caches[n],before:!0}}}function Vs(r,l){l=Wr(l);var e=Ve(l),t=r.display.externalMeasured=new Io(r.doc,l,e);t.lineN=e;var n=t.built=Ba(r,t);return t.text=n.pre,fe(r.display.lineMeasure,n.pre),t}function Bo(r,l,e,t){return kr(r,Zn(r,l),e,t)}function Uo(r,l){if(l>=r.display.viewFrom&&l<r.display.viewTo)return r.display.view[an(r,l)];var e=r.display.externalMeasured;if(e&&l>=e.lineN&&l<e.lineN+e.size)return e}function Zn(r,l){var e=Ve(l),t=Uo(r,e);t&&!t.text?t=null:t&&t.changes&&(Ft(r,t,e,Dn(r)),r.curOp.forceUpdate=!0),t||(t=Vs(r,l));var n=Jl(t,l,e);return{line:l,view:t,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function kr(r,l,e,t,n){l.before&&(e=-1);var i=e+(t||""),o;return l.cache.hasOwnProperty(i)?o=l.cache[i]:(l.rect||(l.rect=l.view.text.getBoundingClientRect()),l.hasHeights||(qn(r,l.view,l.rect),l.hasHeights=!0),o=Va(r,l,e,t),o.bogus||(l.cache[i]=o)),{left:o.left,right:o.right,top:n?o.rtop:o.top,bottom:n?o.rbottom:o.bottom}}var Qn={left:0,right:0,top:0,bottom:0};function Ir(r,l,e){for(var t,n,i,o,a,s,u=0;u<r.length;u+=3)if(a=r[u],s=r[u+1],l<a?(n=0,i=1,o="left"):l<s?(n=l-a,i=n+1):(u==r.length-3||l==s&&r[u+3]>l)&&(i=s-a,n=i-1,l>=s&&(o="right")),n!=null){if(t=r[u+2],a==s&&e==(t.insertLeft?"left":"right")&&(o=e),e=="left"&&n==0)for(;u&&r[u-2]==r[u-3]&&r[u-1].insertLeft;)t=r[(u-=3)+2],o="left";if(e=="right"&&n==s-a)for(;u<r.length-3&&r[u+3]==r[u+4]&&!r[u+5].insertLeft;)t=r[(u+=3)+2],o="right";break}return{node:t,start:n,end:i,collapse:o,coverStart:a,coverEnd:s}}function ja(r,l){var e=Qn;if(l=="left")for(var t=0;t<r.length&&(e=r[t]).left==e.right;t++);else for(var n=r.length-1;n>=0&&(e=r[n]).left==e.right;n--);return e}function Va(r,l,e,t){var n=Ir(l.map,e,t),i=n.node,o=n.start,a=n.end,s=n.collapse,u;if(i.nodeType==3){for(var f=0;f<4;f++){for(;o&&oe(l.line.text.charAt(n.coverStart+o));)--o;for(;n.coverStart+a<n.coverEnd&&oe(l.line.text.charAt(n.coverStart+a));)++a;if(m&&S<9&&o==0&&a==n.coverEnd-n.coverStart?u=i.parentNode.getBoundingClientRect():u=ja(Re(i,o,a).getClientRects(),t),u.left||u.right||o==0)break;a=o,o=o-1,s="right"}m&&S<11&&(u=$s(r.display.measure,u))}else{o>0&&(s=t="right");var h;r.options.lineWrapping&&(h=i.getClientRects()).length>1?u=h[t=="right"?h.length-1:0]:u=i.getBoundingClientRect()}if(m&&S<9&&!o&&(!u||!u.left&&!u.right)){var d=i.parentNode.getClientRects()[0];d?u={left:d.left,right:d.left+Tr(r.display),top:d.top,bottom:d.bottom}:u=Qn}for(var v=u.top-l.rect.top,C=u.bottom-l.rect.top,k=(v+C)/2,H=l.view.measure.heights,B=0;B<H.length-1&&!(k<H[B]);B++);var K=B?H[B-1]:0,q=H[B],$={left:(s=="right"?u.right:u.left)-l.rect.left,right:(s=="left"?u.left:u.right)-l.rect.left,top:K,bottom:q};return!u.left&&!u.right&&($.bogus=!0),r.options.singleCursorHeightPerLine||($.rtop=v,$.rbottom=C),$}function $s(r,l){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Yr(r))return l;var e=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI;return{left:l.left*e,right:l.right*e,top:l.top*t,bottom:l.bottom*t}}function $a(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var l=0;l<r.rest.length;l++)r.measure.caches[l]={}}function es(r){r.display.externalMeasure=null,G(r.display.lineMeasure);for(var l=0;l<r.display.view.length;l++)$a(r.display.view[l])}function Di(r){es(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Go(){return D&&X?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Oi(){return D&&X?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function jl(r){var l=Wr(r),e=l.widgets,t=0;if(e)for(var n=0;n<e.length;++n)e[n].above&&(t+=Mi(e[n]));return t}function ul(r,l,e,t,n){if(!n){var i=jl(l);e.top+=i,e.bottom+=i}if(t=="line")return e;t||(t="local");var o=Jt(l);if(t=="local"?o+=Tn(r.display):o-=r.display.viewOffset,t=="page"||t=="window"){var a=r.display.lineSpace.getBoundingClientRect();o+=a.top+(t=="window"?0:Oi());var s=a.left+(t=="window"?0:Go());e.left+=s,e.right+=s}return e.top+=o,e.bottom+=o,e}function Vl(r,l,e){if(e=="div")return l;var t=l.left,n=l.top;if(e=="page")t-=Go(),n-=Oi();else if(e=="local"||!e){var i=r.display.sizer.getBoundingClientRect();t+=i.left,n+=i.top}var o=r.display.lineSpace.getBoundingClientRect();return{left:t-o.left,top:n-o.top}}function Jn(r,l,e,t,n){return t||(t=Se(r.doc,l.line)),ul(r,t,Bo(r,t,l.ch,n),e)}function Lr(r,l,e,t,n,i){t=t||Se(r.doc,l.line),n||(n=Zn(r,t));function o(C,k){var H=kr(r,n,C,k?"right":"left",i);return k?H.left=H.right:H.right=H.left,ul(r,t,H,e)}var a=Ne(t,r.doc.direction),s=l.ch,u=l.sticky;if(s>=t.text.length?(s=t.text.length,u="before"):s<=0&&(s=0,u="after"),!a)return o(u=="before"?s-1:s,u=="before");function f(C,k,H){var B=a[k],K=B.level==1;return o(H?C-1:C,K!=H)}var h=We(a,s,u),d=be,v=f(s,h,u=="before");return d!=null&&(v.other=f(s,d,u!="before")),v}function fl(r,l){var e=0;l=xe(r.doc,l),r.options.lineWrapping||(e=Tr(r.display)*l.ch);var t=Se(r.doc,l.line),n=Jt(t)+Tn(r.display);return{left:e,right:e,top:n,bottom:n+t.height}}function pr(r,l,e,t,n){var i=c(r,l,e);return i.xRel=n,t&&(i.outside=t),i}function $l(r,l,e){var t=r.doc;if(e+=r.display.viewOffset,e<0)return pr(t.first,0,null,-1,-1);var n=Ut(t,e),i=t.first+t.size-1;if(n>i)return pr(t.first+t.size-1,Se(t,i).text.length,null,1,1);l<0&&(l=0);for(var o=Se(t,n);;){var a=ts(r,o,n,l,e),s=Ha(o,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;var u=s.find(1);if(u.line==n)return u;o=Se(t,n=u.line)}}function eo(r,l,e,t){t-=jl(l);var n=l.text.length,i=pe(function(o){return kr(r,e,o-1).bottom<=t},n,0);return n=pe(function(o){return kr(r,e,o).top>t},i,n),{begin:i,end:n}}function to(r,l,e,t){e||(e=Zn(r,l));var n=ul(r,l,kr(r,e,t),"line").top;return eo(r,l,e,n)}function ro(r,l,e,t){return r.bottom<=e?!1:r.top>e?!0:(t?r.left:r.right)>l}function ts(r,l,e,t,n){n-=Jt(l);var i=Zn(r,l),o=jl(l),a=0,s=l.text.length,u=!0,f=Ne(l,r.doc.direction);if(f){var h=(r.options.lineWrapping?eu:Ko)(r,l,e,i,f,t,n);u=h.level!=1,a=u?h.from:h.to-1,s=u?h.to:h.from-1}var d=null,v=null,C=pe(function(ne){var ie=kr(r,i,ne);return ie.top+=o,ie.bottom+=o,ro(ie,t,n,!1)?(ie.top<=n&&ie.left<=t&&(d=ne,v=ie),!0):!1},a,s),k,H,B=!1;if(v){var K=t-v.left<v.right-t,q=K==u;C=d+(q?0:1),H=q?"after":"before",k=K?v.left:v.right}else{!u&&(C==s||C==a)&&C++,H=C==0?"after":C==l.text.length?"before":kr(r,i,C-(u?1:0)).bottom+o<=n==u?"after":"before";var $=Lr(r,c(e,C,H),"line",l,i);k=$.left,B=n<$.top?-1:n>=$.bottom?1:0}return C=ce(l.text,C,1),pr(e,C,H,B,t-k)}function Ko(r,l,e,t,n,i,o){var a=pe(function(h){var d=n[h],v=d.level!=1;return ro(Lr(r,c(e,v?d.to:d.from,v?"before":"after"),"line",l,t),i,o,!0)},0,n.length-1),s=n[a];if(a>0){var u=s.level!=1,f=Lr(r,c(e,u?s.from:s.to,u?"after":"before"),"line",l,t);ro(f,i,o,!0)&&f.top>o&&(s=n[a-1])}return s}function eu(r,l,e,t,n,i,o){var a=eo(r,l,t,o),s=a.begin,u=a.end;/\s/.test(l.text.charAt(u-1))&&u--;for(var f=null,h=null,d=0;d<n.length;d++){var v=n[d];if(!(v.from>=u||v.to<=s)){var C=v.level!=1,k=kr(r,t,C?Math.min(u,v.to)-1:Math.max(s,v.from)).right,H=k<i?i-k+1e9:k-i;(!f||h>H)&&(f=v,h=H)}}return f||(f=n[n.length-1]),f.from<s&&(f={from:s,to:f.to,level:f.level}),f.to>u&&(f={from:f.from,to:u,level:f.level}),f}var jn;function Ni(r){if(r.cachedTextHeight!=null)return r.cachedTextHeight;if(jn==null){jn=L("pre",null,"CodeMirror-line-like");for(var l=0;l<49;++l)jn.appendChild(document.createTextNode("x")),jn.appendChild(L("br"));jn.appendChild(document.createTextNode("x"))}fe(r.measure,jn);var e=jn.offsetHeight/50;return e>3&&(r.cachedTextHeight=e),G(r.measure),e||1}function Tr(r){if(r.cachedCharWidth!=null)return r.cachedCharWidth;var l=L("span","xxxxxxxxxx"),e=L("pre",[l],"CodeMirror-line-like");fe(r.measure,e);var t=l.getBoundingClientRect(),n=(t.right-t.left)/10;return n>2&&(r.cachedCharWidth=n),n||10}function Dn(r){for(var l=r.display,e={},t={},n=l.gutters.clientLeft,i=l.gutters.firstChild,o=0;i;i=i.nextSibling,++o){var a=r.display.gutterSpecs[o].className;e[a]=i.offsetLeft+i.clientLeft+n,t[a]=i.clientWidth}return{fixedPos:On(l),gutterTotalWidth:l.gutters.offsetWidth,gutterLeft:e,gutterWidth:t,wrapperWidth:l.wrapper.clientWidth}}function On(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function no(r){var l=Ni(r.display),e=r.options.lineWrapping,t=e&&Math.max(5,r.display.scroller.clientWidth/Tr(r.display)-3);return function(n){if(Zr(r.doc,n))return 0;var i=0;if(n.widgets)for(var o=0;o<n.widgets.length;o++)n.widgets[o].height&&(i+=n.widgets[o].height);return e?i+(Math.ceil(n.text.length/t)||1)*l:i+l}}function hl(r){var l=r.doc,e=no(r);l.iter(function(t){var n=e(t);n!=t.height&&Bt(t,n)})}function Nn(r,l,e,t){var n=r.display;if(!e&&cr(l).getAttribute("cm-not-content")=="true")return null;var i,o,a=n.lineSpace.getBoundingClientRect();try{i=l.clientX-a.left,o=l.clientY-a.top}catch{return null}var s=$l(r,i,o),u;if(t&&s.xRel>0&&(u=Se(r.doc,s.line).text).length==s.ch){var f=Be(u,u.length,r.options.tabSize)-u.length;s=c(s.line,Math.max(0,Math.round((i-sl(r.display).left)/Tr(r.display))-f))}return s}function an(r,l){if(l>=r.display.viewTo||(l-=r.display.viewFrom,l<0))return null;for(var e=r.display.view,t=0;t<e.length;t++)if(l-=e[t].size,l<0)return t}function Et(r,l,e,t){l==null&&(l=r.doc.first),e==null&&(e=r.doc.first+r.doc.size),t||(t=0);var n=r.display;if(t&&e<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>l)&&(n.updateLineNumbers=l),r.curOp.viewChanged=!0,l>=n.viewTo)rn&&Ho(r.doc,l)<n.viewTo&&Dt(r);else if(e<=n.viewFrom)rn&&Ia(r.doc,e+t)>n.viewFrom?Dt(r):(n.viewFrom+=t,n.viewTo+=t);else if(l<=n.viewFrom&&e>=n.viewTo)Dt(r);else if(l<=n.viewFrom){var i=Rr(r,e,e+t,1);i?(n.view=n.view.slice(i.index),n.viewFrom=i.lineN,n.viewTo+=t):Dt(r)}else if(e>=n.viewTo){var o=Rr(r,l,l,-1);o?(n.view=n.view.slice(0,o.index),n.viewTo=o.lineN):Dt(r)}else{var a=Rr(r,l,l,-1),s=Rr(r,e,e+t,1);a&&s?(n.view=n.view.slice(0,a.index).concat(ql(r,a.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=t):Dt(r)}var u=n.externalMeasured;u&&(e<u.lineN?u.lineN+=t:l<u.lineN+u.size&&(n.externalMeasured=null))}function or(r,l,e){r.curOp.viewChanged=!0;var t=r.display,n=r.display.externalMeasured;if(n&&l>=n.lineN&&l<n.lineN+n.size&&(t.externalMeasured=null),!(l<t.viewFrom||l>=t.viewTo)){var i=t.view[an(r,l)];if(i.node!=null){var o=i.changes||(i.changes=[]);me(o,e)==-1&&o.push(e)}}}function Dt(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Rr(r,l,e,t){var n=an(r,l),i,o=r.display.view;if(!rn||e==r.doc.first+r.doc.size)return{index:n,lineN:e};for(var a=r.display.viewFrom,s=0;s<n;s++)a+=o[s].size;if(a!=l){if(t>0){if(n==o.length-1)return null;i=a+o[n].size-l,n++}else i=a-l;l+=i,e+=i}for(;Ho(r.doc,e)!=e;){if(n==(t<0?0:o.length-1))return null;e+=t*o[n-(t<0?1:0)].size,n+=t}return{index:n,lineN:e}}function An(r,l,e){var t=r.display,n=t.view;n.length==0||l>=t.viewTo||e<=t.viewFrom?(t.view=ql(r,l,e),t.viewFrom=l):(t.viewFrom>l?t.view=ql(r,l,t.viewFrom).concat(t.view):t.viewFrom<l&&(t.view=t.view.slice(an(r,l))),t.viewFrom=l,t.viewTo<e?t.view=t.view.concat(ql(r,t.viewTo,e)):t.viewTo>e&&(t.view=t.view.slice(0,an(r,e)))),t.viewTo=e}function cl(r){for(var l=r.display.view,e=0,t=0;t<l.length;t++){var n=l[t];!n.hidden&&(!n.node||n.changes)&&++e}return e}function dl(r){r.display.input.showSelection(r.display.input.prepareSelection())}function Xo(r,l){l===void 0&&(l=!0);var e=r.doc,t={},n=t.cursors=document.createDocumentFragment(),i=t.selection=document.createDocumentFragment(),o=r.options.$customCursor;o&&(l=!0);for(var a=0;a<e.sel.ranges.length;a++)if(!(!l&&a==e.sel.primIndex)){var s=e.sel.ranges[a];if(!(s.from().line>=r.display.viewTo||s.to().line<r.display.viewFrom)){var u=s.empty();if(o){var f=o(r,s);f&&Vn(r,f,n)}else(u||r.options.showCursorWhenSelecting)&&Vn(r,s.head,n);u||Yo(r,s,i)}}return t}function Vn(r,l,e){var t=Lr(r,l,"div",null,null,!r.options.singleCursorHeightPerLine),n=e.appendChild(L("div","\xA0","CodeMirror-cursor"));if(n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.height=Math.max(0,t.bottom-t.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var i=Jn(r,l,"div",null,null),o=i.right-i.left;n.style.width=(o>0?o:r.defaultCharWidth())+"px"}if(t.other){var a=e.appendChild(L("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=t.other.left+"px",a.style.top=t.other.top+"px",a.style.height=(t.other.bottom-t.other.top)*.85+"px"}}function pl(r,l){return r.top-l.top||r.left-l.left}function Yo(r,l,e){var t=r.display,n=r.doc,i=document.createDocumentFragment(),o=sl(r.display),a=o.left,s=Math.max(t.sizerWidth,Mn(r)-t.sizer.offsetLeft)-o.right,u=n.direction=="ltr";function f(q,$,ne,ie){$<0&&($=0),$=Math.round($),ie=Math.round(ie),i.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+q+`px;
                             top: `+$+"px; width: "+(ne==null?s-q:ne)+`px;
                             height: `+(ie-$)+"px"))}function h(q,$,ne){var ie=Se(n,q),ve=ie.text.length,ge,ke;function Me(it,pt){return Jn(r,c(q,it),"div",ie,pt)}function ut(it,pt,Xe){var lt=to(r,ie,null,it),Ye=pt=="ltr"==(Xe=="after")?"left":"right",_e=Xe=="after"?lt.begin:lt.end-(/\s/.test(ie.text.charAt(lt.end-1))?2:1);return Me(_e,Ye)[Ye]}var Ke=Ne(ie,n.direction);return Le(Ke,$||0,ne==null?ve:ne,function(it,pt,Xe,lt){var Ye=Xe=="ltr",_e=Me(it,Ye?"left":"right"),$e=Me(pt-1,Ye?"right":"left"),yt=$==null&&it==0,Nt=ne==null&&pt==ve,At=lt==0,Zt=!Ke||lt==Ke.length-1;if($e.top-_e.top<=3){var et=(u?yt:Nt)&&At,Nr=(u?Nt:yt)&&Zt,wt=et?a:(Ye?_e:$e).left,Sn=Nr?s:(Ye?$e:_e).right;f(wt,_e.top,Sn-wt,_e.bottom)}else{var tr,Pt,Ar,Xt;Ye?(tr=u&&yt&&At?a:_e.left,Pt=u?s:ut(it,Xe,"before"),Ar=u?a:ut(pt,Xe,"after"),Xt=u&&Nt&&Zt?s:$e.right):(tr=u?ut(it,Xe,"before"):a,Pt=!u&&yt&&At?s:_e.right,Ar=!u&&Nt&&Zt?a:$e.left,Xt=u?ut(pt,Xe,"after"):s),f(tr,_e.top,Pt-tr,_e.bottom),_e.bottom<$e.top&&f(a,_e.bottom,null,$e.top),f(Ar,$e.top,Xt-Ar,$e.bottom)}(!ge||pl(_e,ge)<0)&&(ge=_e),pl($e,ge)<0&&(ge=$e),(!ke||pl(_e,ke)<0)&&(ke=_e),pl($e,ke)<0&&(ke=$e)}),{start:ge,end:ke}}var d=l.from(),v=l.to();if(d.line==v.line)h(d.line,d.ch,v.ch);else{var C=Se(n,d.line),k=Se(n,v.line),H=Wr(C)==Wr(k),B=h(d.line,d.ch,H?C.text.length+1:null).end,K=h(v.line,H?0:null,v.ch).start;H&&(B.top<K.top-2?(f(B.right,B.top,null,B.bottom),f(a,K.top,K.left,K.bottom)):f(B.right,B.top,K.left-B.right,B.bottom)),B.bottom<K.top&&f(a,B.bottom,null,K.top)}e.appendChild(i)}function Ai(r){if(!!r.state.focused){var l=r.display;clearInterval(l.blinker);var e=!0;l.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?l.blinker=setInterval(function(){r.hasFocus()||Pn(r),l.cursorDiv.style.visibility=(e=!e)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(l.cursorDiv.style.visibility="hidden")}}function rs(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||io(r))}function vl(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Pn(r))},100)}function io(r,l){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),r.options.readOnly!="nocursor"&&(r.state.focused||(vt(r,"focus",r,l),r.state.focused=!0,je(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),x&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),Ai(r))}function Pn(r,l){r.state.delayingBlurEvent||(r.state.focused&&(vt(r,"blur",r,l),r.state.focused=!1,ue(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function Pi(r){for(var l=r.display,e=l.lineDiv.offsetTop,t=Math.max(0,l.scroller.getBoundingClientRect().top),n=l.lineDiv.getBoundingClientRect().top,i=0,o=0;o<l.view.length;o++){var a=l.view[o],s=r.options.lineWrapping,u=void 0,f=0;if(!a.hidden){if(n+=a.line.height,m&&S<8){var h=a.node.offsetTop+a.node.offsetHeight;u=h-e,e=h}else{var d=a.node.getBoundingClientRect();u=d.bottom-d.top,!s&&a.text.firstChild&&(f=a.text.firstChild.getBoundingClientRect().right-d.left-1)}var v=a.line.height-u;if((v>.005||v<-.005)&&(n<t&&(i-=v),Bt(a.line,u),$n(a.line),a.rest))for(var C=0;C<a.rest.length;C++)$n(a.rest[C]);if(f>r.display.sizerWidth){var k=Math.ceil(f/Tr(r.display));k>r.display.maxLineLength&&(r.display.maxLineLength=k,r.display.maxLine=a.line,r.display.maxLineChanged=!0)}}}Math.abs(i)>2&&(l.scroller.scrollTop+=i)}function $n(r){if(r.widgets)for(var l=0;l<r.widgets.length;++l){var e=r.widgets[l],t=e.node.parentNode;t&&(e.height=t.offsetHeight)}}function ei(r,l,e){var t=e&&e.top!=null?Math.max(0,e.top):r.scroller.scrollTop;t=Math.floor(t-Tn(r));var n=e&&e.bottom!=null?e.bottom:t+r.wrapper.clientHeight,i=Ut(l,t),o=Ut(l,n);if(e&&e.ensure){var a=e.ensure.from.line,s=e.ensure.to.line;a<i?(i=a,o=Ut(l,Jt(Se(l,a))+r.wrapper.clientHeight)):Math.min(s,l.lastLine())>=o&&(i=Ut(l,Jt(Se(l,s))-r.wrapper.clientHeight),o=s)}return{from:i,to:Math.max(o,i+1)}}function ns(r,l){if(!Ge(r,"scrollCursorIntoView")){var e=r.display,t=e.sizer.getBoundingClientRect(),n=null;if(l.top+t.top<0?n=!0:l.bottom+t.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),n!=null&&!ee){var i=L("div","\u200B",null,`position: absolute;
                         top: `+(l.top-e.viewOffset-Tn(r.display))+`px;
                         height: `+(l.bottom-l.top+Sr(r)+e.barHeight)+`px;
                         left: `+l.left+"px; width: "+Math.max(2,l.right-l.left)+"px;");r.display.lineSpace.appendChild(i),i.scrollIntoView(n),r.display.lineSpace.removeChild(i)}}}function lo(r,l,e,t){t==null&&(t=0);var n;!r.options.lineWrapping&&l==e&&(e=l.sticky=="before"?c(l.line,l.ch+1,"before"):l,l=l.ch?c(l.line,l.sticky=="before"?l.ch-1:l.ch,"after"):l);for(var i=0;i<5;i++){var o=!1,a=Lr(r,l),s=!e||e==l?a:Lr(r,e);n={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top)-t,right:Math.max(a.left,s.left),bottom:Math.max(a.bottom,s.bottom)+t};var u=qo(r,n),f=r.doc.scrollTop,h=r.doc.scrollLeft;if(u.scrollTop!=null&&(Wn(r,u.scrollTop),Math.abs(r.doc.scrollTop-f)>1&&(o=!0)),u.scrollLeft!=null&&(Br(r,u.scrollLeft),Math.abs(r.doc.scrollLeft-h)>1&&(o=!0)),!o)break}return n}function tu(r,l){var e=qo(r,l);e.scrollTop!=null&&Wn(r,e.scrollTop),e.scrollLeft!=null&&Br(r,e.scrollLeft)}function qo(r,l){var e=r.display,t=Ni(r.display);l.top<0&&(l.top=0);var n=r.curOp&&r.curOp.scrollTop!=null?r.curOp.scrollTop:e.scroller.scrollTop,i=Cr(r),o={};l.bottom-l.top>i&&(l.bottom=l.top+i);var a=r.doc.height+zr(e),s=l.top<t,u=l.bottom>a-t;if(l.top<n)o.scrollTop=s?0:l.top;else if(l.bottom>n+i){var f=Math.min(l.top,(u?a:l.bottom)-i);f!=n&&(o.scrollTop=f)}var h=r.options.fixedGutter?0:e.gutters.offsetWidth,d=r.curOp&&r.curOp.scrollLeft!=null?r.curOp.scrollLeft:e.scroller.scrollLeft-h,v=Mn(r)-e.gutters.offsetWidth,C=l.right-l.left>v;return C&&(l.right=l.left+v),l.left<10?o.scrollLeft=0:l.left<d?o.scrollLeft=Math.max(0,l.left+h-(C?0:10)):l.right>v+d-3&&(o.scrollLeft=l.right+(C?0:10)-v),o}function Zo(r,l){l!=null&&(Fn(r),r.curOp.scrollTop=(r.curOp.scrollTop==null?r.doc.scrollTop:r.curOp.scrollTop)+l)}function En(r){Fn(r);var l=r.getCursor();r.curOp.scrollToPos={from:l,to:l,margin:r.options.cursorScrollMargin}}function ti(r,l,e){(l!=null||e!=null)&&Fn(r),l!=null&&(r.curOp.scrollLeft=l),e!=null&&(r.curOp.scrollTop=e)}function Ei(r,l){Fn(r),r.curOp.scrollToPos=l}function Fn(r){var l=r.curOp.scrollToPos;if(l){r.curOp.scrollToPos=null;var e=fl(r,l.from),t=fl(r,l.to);is(r,e,t,l.margin)}}function is(r,l,e,t){var n=qo(r,{left:Math.min(l.left,e.left),top:Math.min(l.top,e.top)-t,right:Math.max(l.right,e.right),bottom:Math.max(l.bottom,e.bottom)+t});ti(r,n.scrollLeft,n.scrollTop)}function Wn(r,l){Math.abs(r.doc.scrollTop-l)<2||(A||gl(r,{top:l}),Qo(r,l,!0),A&&gl(r),Wt(r,100))}function Qo(r,l,e){l=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,l)),!(r.display.scroller.scrollTop==l&&!e)&&(r.doc.scrollTop=l,r.display.scrollbars.setScrollTop(l),r.display.scroller.scrollTop!=l&&(r.display.scroller.scrollTop=l))}function Br(r,l,e,t){l=Math.max(0,Math.min(l,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),!((e?l==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-l)<2)&&!t)&&(r.doc.scrollLeft=l,ao(r),r.display.scroller.scrollLeft!=l&&(r.display.scroller.scrollLeft=l),r.display.scrollbars.setScrollLeft(l))}function Fi(r){var l=r.display,e=l.gutters.offsetWidth,t=Math.round(r.doc.height+zr(r.display));return{clientHeight:l.scroller.clientHeight,viewHeight:l.wrapper.clientHeight,scrollWidth:l.scroller.scrollWidth,clientWidth:l.scroller.clientWidth,viewWidth:l.wrapper.clientWidth,barLeft:r.options.fixedGutter?e:0,docHeight:t,scrollHeight:t+Sr(r)+l.barHeight,nativeBarWidth:l.nativeBarWidth,gutterWidth:e}}var vr=function(r,l,e){this.cm=e;var t=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t.tabIndex=n.tabIndex=-1,r(t),r(n),ye(t,"scroll",function(){t.clientHeight&&l(t.scrollTop,"vertical")}),ye(n,"scroll",function(){n.clientWidth&&l(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,m&&S<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};vr.prototype.update=function(r){var l=r.scrollWidth>r.clientWidth+1,e=r.scrollHeight>r.clientHeight+1,t=r.nativeBarWidth;if(e){this.vert.style.display="block",this.vert.style.bottom=l?t+"px":"0";var n=r.viewHeight-(l?t:0);this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+n)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(l){this.horiz.style.display="block",this.horiz.style.right=e?t+"px":"0",this.horiz.style.left=r.barLeft+"px";var i=r.viewWidth-r.barLeft-(e?t:0);this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+i)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&r.clientHeight>0&&(t==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:e?t:0,bottom:l?t:0}},vr.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},vr.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},vr.prototype.zeroWidthHack=function(){var r=V&&!J?"12px":"18px";this.horiz.style.height=this.vert.style.width=r,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Ce,this.disableVert=new Ce},vr.prototype.enableZeroWidthBar=function(r,l,e){r.style.visibility="";function t(){var n=r.getBoundingClientRect(),i=e=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);i!=r?r.style.visibility="hidden":l.set(1e3,t)}l.set(1e3,t)},vr.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var sn=function(){};sn.prototype.update=function(){return{bottom:0,right:0}},sn.prototype.setScrollLeft=function(){},sn.prototype.setScrollTop=function(){},sn.prototype.clear=function(){};function Mr(r,l){l||(l=Fi(r));var e=r.display.barWidth,t=r.display.barHeight;Wi(r,l);for(var n=0;n<4&&e!=r.display.barWidth||t!=r.display.barHeight;n++)e!=r.display.barWidth&&r.options.lineWrapping&&Pi(r),Wi(r,Fi(r)),e=r.display.barWidth,t=r.display.barHeight}function Wi(r,l){var e=r.display,t=e.scrollbars.update(l);e.sizer.style.paddingRight=(e.barWidth=t.right)+"px",e.sizer.style.paddingBottom=(e.barHeight=t.bottom)+"px",e.heightForcer.style.borderBottom=t.bottom+"px solid transparent",t.right&&t.bottom?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=t.bottom+"px",e.scrollbarFiller.style.width=t.right+"px"):e.scrollbarFiller.style.display="",t.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=t.bottom+"px",e.gutterFiller.style.width=l.gutterWidth+"px"):e.gutterFiller.style.display=""}var ri={native:vr,null:sn};function Jo(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&ue(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new ri[r.options.scrollbarStyle](function(l){r.display.wrapper.insertBefore(l,r.display.scrollbarFiller),ye(l,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),l.setAttribute("cm-not-content","true")},function(l,e){e=="horizontal"?Br(r,l):Wn(r,l)},r),r.display.scrollbars.addClass&&je(r.display.wrapper,r.display.scrollbars.addClass)}var ls=0;function _n(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ls,markArrays:null},Zl(r.curOp)}function ni(r){var l=r.curOp;l&&Js(l,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;ii(e)})}function ii(r){for(var l=r.ops,e=0;e<l.length;e++)li(l[e]);for(var t=0;t<l.length;t++)ru(l[t]);for(var n=0;n<l.length;n++)nu(l[n]);for(var i=0;i<l.length;i++)iu(l[i]);for(var o=0;o<l.length;o++)lu(l[o])}function li(r){var l=r.cm,e=l.display;ou(l),r.updateMaxLine&&Hr(l),r.mustUpdate=r.viewChanged||r.forceUpdate||r.scrollTop!=null||r.scrollToPos&&(r.scrollToPos.from.line<e.viewFrom||r.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&l.options.lineWrapping,r.update=r.mustUpdate&&new Hn(l,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function ru(r){r.updatedDisplay=r.mustUpdate&&jo(r.cm,r.update)}function nu(r){var l=r.cm,e=l.display;r.updatedDisplay&&Pi(l),r.barMeasure=Fi(l),e.maxLineChanged&&!l.options.lineWrapping&&(r.adjustWidthTo=Bo(l,e.maxLine,e.maxLine.text.length).left+3,l.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(e.scroller.clientWidth,e.sizer.offsetLeft+r.adjustWidthTo+Sr(l)+l.display.barWidth),r.maxScrollLeft=Math.max(0,e.sizer.offsetLeft+r.adjustWidthTo-Mn(l))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=e.input.prepareSelection())}function iu(r){var l=r.cm;r.adjustWidthTo!=null&&(l.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<l.doc.scrollLeft&&Br(l,Math.min(l.display.scroller.scrollLeft,r.maxScrollLeft),!0),l.display.maxLineChanged=!1);var e=r.focus&&r.focus==Fe();r.preparedSelection&&l.display.input.showSelection(r.preparedSelection,e),(r.updatedDisplay||r.startHeight!=l.doc.height)&&Mr(l,r.barMeasure),r.updatedDisplay&&Vo(l,r.barMeasure),r.selectionChanged&&Ai(l),l.state.focused&&r.updateInput&&l.display.input.reset(r.typing),e&&rs(r.cm)}function lu(r){var l=r.cm,e=l.display,t=l.doc;if(r.updatedDisplay&&os(l,r.update),e.wheelStartX!=null&&(r.scrollTop!=null||r.scrollLeft!=null||r.scrollToPos)&&(e.wheelStartX=e.wheelStartY=null),r.scrollTop!=null&&Qo(l,r.scrollTop,r.forceScroll),r.scrollLeft!=null&&Br(l,r.scrollLeft,!0,!0),r.scrollToPos){var n=lo(l,xe(t,r.scrollToPos.from),xe(t,r.scrollToPos.to),r.scrollToPos.margin);ns(l,n)}var i=r.maybeHiddenMarkers,o=r.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||vt(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&vt(o[s],"unhide");e.wrapper.offsetHeight&&(t.scrollTop=l.display.scroller.scrollTop),r.changeObjs&&vt(l,"changes",l,r.changeObjs),r.update&&r.update.finish()}function ar(r,l){if(r.curOp)return l();_n(r);try{return l()}finally{ni(r)}}function zt(r,l){return function(){if(r.curOp)return l.apply(r,arguments);_n(r);try{return l.apply(r,arguments)}finally{ni(r)}}}function dt(r){return function(){if(this.curOp)return r.apply(this,arguments);_n(this);try{return r.apply(this,arguments)}finally{ni(this)}}}function Ze(r){return function(){var l=this.cm;if(!l||l.curOp)return r.apply(this,arguments);_n(l);try{return r.apply(this,arguments)}finally{ni(l)}}}function Wt(r,l){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(l,kt(It,r))}function It(r){var l=r.doc;if(!(l.highlightFrontier>=r.display.viewTo)){var e=+new Date+r.options.workTime,t=wi(r,l.highlightFrontier),n=[];l.iter(t.line,Math.min(l.first+l.size,r.display.viewTo+500),function(i){if(t.line>=r.display.viewFrom){var o=i.styles,a=i.text.length>r.options.maxHighlightLength?lr(l.mode,t.state):null,s=Ji(r,i,t,!0);a&&(t.state=a),i.styles=s.styles;var u=i.styleClasses,f=s.classes;f?i.styleClasses=f:u&&(i.styleClasses=null);for(var h=!o||o.length!=i.styles.length||u!=f&&(!u||!f||u.bgClass!=f.bgClass||u.textClass!=f.textClass),d=0;!h&&d<o.length;++d)h=o[d]!=i.styles[d];h&&n.push(t.line),i.stateAfter=t.save(),t.nextLine()}else i.text.length<=r.options.maxHighlightLength&&Bl(r,i.text,t),i.stateAfter=t.line%5==0?t.save():null,t.nextLine();if(+new Date>e)return Wt(r,r.options.workDelay),!0}),l.highlightFrontier=t.line,l.modeFrontier=Math.max(l.modeFrontier,t.line),n.length&&ar(r,function(){for(var i=0;i<n.length;i++)or(r,n[i],"text")})}}var Hn=function(r,l,e){var t=r.display;this.viewport=l,this.visible=ei(t,r.doc,l),this.editorIsHidden=!t.wrapper.offsetWidth,this.wrapperHeight=t.wrapper.clientHeight,this.wrapperWidth=t.wrapper.clientWidth,this.oldDisplayWidth=Mn(r),this.force=e,this.dims=Dn(r),this.events=[]};Hn.prototype.signal=function(r,l){qe(r,l)&&this.events.push(arguments)},Hn.prototype.finish=function(){for(var r=0;r<this.events.length;r++)vt.apply(null,this.events[r])};function ou(r){var l=r.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=Sr(r)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=Sr(r)+"px",l.scrollbarsClipped=!0)}function oo(r){if(r.hasFocus())return null;var l=Fe();if(!l||!Je(r.display.lineDiv,l))return null;var e={activeElt:l};if(window.getSelection){var t=window.getSelection();t.anchorNode&&t.extend&&Je(r.display.lineDiv,t.anchorNode)&&(e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset)}return e}function au(r){if(!(!r||!r.activeElt||r.activeElt==Fe())&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&Je(document.body,r.anchorNode)&&Je(document.body,r.focusNode))){var l=window.getSelection(),e=document.createRange();e.setEnd(r.anchorNode,r.anchorOffset),e.collapse(!1),l.removeAllRanges(),l.addRange(e),l.extend(r.focusNode,r.focusOffset)}}function jo(r,l){var e=r.display,t=r.doc;if(l.editorIsHidden)return Dt(r),!1;if(!l.force&&l.visible.from>=e.viewFrom&&l.visible.to<=e.viewTo&&(e.updateLineNumbers==null||e.updateLineNumbers>=e.viewTo)&&e.renderedView==e.view&&cl(r)==0)return!1;so(r)&&(Dt(r),l.dims=Dn(r));var n=t.first+t.size,i=Math.max(l.visible.from-r.options.viewportMargin,t.first),o=Math.min(n,l.visible.to+r.options.viewportMargin);e.viewFrom<i&&i-e.viewFrom<20&&(i=Math.max(t.first,e.viewFrom)),e.viewTo>o&&e.viewTo-o<20&&(o=Math.min(n,e.viewTo)),rn&&(i=Ho(r.doc,i),o=Ia(r.doc,o));var a=i!=e.viewFrom||o!=e.viewTo||e.lastWrapHeight!=l.wrapperHeight||e.lastWrapWidth!=l.wrapperWidth;An(r,i,o),e.viewOffset=Jt(Se(r.doc,e.viewFrom)),r.display.mover.style.top=e.viewOffset+"px";var s=cl(r);if(!a&&s==0&&!l.force&&e.renderedView==e.view&&(e.updateLineNumbers==null||e.updateLineNumbers>=e.viewTo))return!1;var u=oo(r);return s>4&&(e.lineDiv.style.display="none"),as(r,e.updateLineNumbers,l.dims),s>4&&(e.lineDiv.style.display=""),e.renderedView=e.view,au(u),G(e.cursorDiv),G(e.selectionDiv),e.gutters.style.height=e.sizer.style.minHeight=0,a&&(e.lastWrapHeight=l.wrapperHeight,e.lastWrapWidth=l.wrapperWidth,Wt(r,400)),e.updateLineNumbers=null,!0}function os(r,l){for(var e=l.viewport,t=!0;;t=!1){if(!t||!r.options.lineWrapping||l.oldDisplayWidth==Mn(r)){if(e&&e.top!=null&&(e={top:Math.min(r.doc.height+zr(r.display)-Cr(r),e.top)}),l.visible=ei(r.display,r.doc,e),l.visible.from>=r.display.viewFrom&&l.visible.to<=r.display.viewTo)break}else t&&(l.visible=ei(r.display,r.doc,e));if(!jo(r,l))break;Pi(r);var n=Fi(r);dl(r),Mr(r,n),Vo(r,n),l.force=!1}l.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(l.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function gl(r,l){var e=new Hn(r,l);if(jo(r,e)){Pi(r),os(r,e);var t=Fi(r);dl(r),Mr(r,t),Vo(r,t),e.finish()}}function as(r,l,e){var t=r.display,n=r.options.lineNumbers,i=t.lineDiv,o=i.firstChild;function a(C){var k=C.nextSibling;return x&&V&&r.display.currentWheelTarget==C?C.style.display="none":C.parentNode.removeChild(C),k}for(var s=t.view,u=t.viewFrom,f=0;f<s.length;f++){var h=s[f];if(!h.hidden)if(!h.node||h.node.parentNode!=i){var d=qa(r,h,u,e);i.insertBefore(d,o)}else{for(;o!=h.node;)o=a(o);var v=n&&l!=null&&l<=u&&h.lineNumber;h.changes&&(me(h.changes,"gutter")>-1&&(v=!1),Ft(r,h,u,e)),v&&(G(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(xr(r.options,u)))),o=h.node.nextSibling}u+=h.size}for(;o;)o=a(o)}function yl(r){var l=r.gutters.offsetWidth;r.sizer.style.marginLeft=l+"px",Ht(r,"gutterChanged",r)}function Vo(r,l){r.display.sizer.style.minHeight=l.docHeight+"px",r.display.heightForcer.style.top=l.docHeight+"px",r.display.gutters.style.height=l.docHeight+r.display.barHeight+Sr(r)+"px"}function ao(r){var l=r.display,e=l.view;if(!(!l.alignWidgets&&(!l.gutters.firstChild||!r.options.fixedGutter))){for(var t=On(l)-l.scroller.scrollLeft+r.doc.scrollLeft,n=l.gutters.offsetWidth,i=t+"px",o=0;o<e.length;o++)if(!e[o].hidden){r.options.fixedGutter&&(e[o].gutter&&(e[o].gutter.style.left=i),e[o].gutterBackground&&(e[o].gutterBackground.style.left=i));var a=e[o].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=i}r.options.fixedGutter&&(l.gutters.style.left=t+n+"px")}}function so(r){if(!r.options.lineNumbers)return!1;var l=r.doc,e=xr(r.options,l.first+l.size-1),t=r.display;if(e.length!=t.lineNumChars){var n=t.measure.appendChild(L("div",[L("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=n.firstChild.offsetWidth,o=n.offsetWidth-i;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(i,t.lineGutter.offsetWidth-o)+1,t.lineNumWidth=t.lineNumInnerWidth+o,t.lineNumChars=t.lineNumInnerWidth?e.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",yl(r.display),!0}return!1}function uo(r,l){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n],o=null;if(typeof i!="string"&&(o=i.style,i=i.className),i=="CodeMirror-linenumbers")if(l)t=!0;else continue;e.push({className:i,style:o})}return l&&!t&&e.push({className:"CodeMirror-linenumbers",style:null}),e}function $o(r){var l=r.gutters,e=r.gutterSpecs;G(l),r.lineGutter=null;for(var t=0;t<e.length;++t){var n=e[t],i=n.className,o=n.style,a=l.appendChild(L("div",null,"CodeMirror-gutter "+i));o&&(a.style.cssText=o),i=="CodeMirror-linenumbers"&&(r.lineGutter=a,a.style.width=(r.lineNumWidth||1)+"px")}l.style.display=e.length?"":"none",yl(r)}function oi(r){$o(r.display),Et(r),ao(r)}function ss(r,l,e,t){var n=this;this.input=e,n.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Ae("div",null,"CodeMirror-code"),n.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=L("div",null,"CodeMirror-cursors"),n.measure=L("div",null,"CodeMirror-measure"),n.lineMeasure=L("div",null,"CodeMirror-measure"),n.lineSpace=Ae("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var i=Ae("div",[n.lineSpace],"CodeMirror-lines");n.mover=L("div",[i],null,"position: relative"),n.sizer=L("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=L("div",null,null,"position: absolute; height: "+Oe+"px; width: 1px;"),n.gutters=L("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=L("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=L("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),n.wrapper.setAttribute("translate","no"),m&&S<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!x&&!(A&&te)&&(n.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(n.wrapper):r(n.wrapper)),n.viewFrom=n.viewTo=l.first,n.reportedViewFrom=n.reportedViewTo=l.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=uo(t.gutters,t.lineNumbers),$o(n),e.init(n)}var zn=0,un=null;m?un=-.53:A?un=15:D?un=-.7:E&&(un=-1/3);function ml(r){var l=r.wheelDeltaX,e=r.wheelDeltaY;return l==null&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(l=r.detail),e==null&&r.detail&&r.axis==r.VERTICAL_AXIS?e=r.detail:e==null&&(e=r.wheelDelta),{x:l,y:e}}function fn(r){var l=ml(r);return l.x*=un,l.y*=un,l}function ea(r,l){D&&R>=102&&(r.display.chromeScrollHack==null?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var e=ml(l),t=e.x,n=e.y,i=un;l.deltaMode===0&&(t=l.deltaX,n=l.deltaY,i=1);var o=r.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(!!(t&&s||n&&u)){if(n&&V&&x){e:for(var f=l.target,h=o.view;f!=a;f=f.parentNode)for(var d=0;d<h.length;d++)if(h[d].node==f){r.display.currentWheelTarget=f;break e}}if(t&&!A&&!F&&i!=null){n&&u&&Wn(r,Math.max(0,a.scrollTop+n*i)),Br(r,Math.max(0,a.scrollLeft+t*i)),(!n||n&&u)&&rt(l),o.wheelStartX=null;return}if(n&&i!=null){var v=n*i,C=r.doc.scrollTop,k=C+o.wrapper.clientHeight;v<0?C=Math.max(0,C+v-50):k=Math.min(r.doc.height,k+v+50),gl(r,{top:C,bottom:k})}zn<20&&l.deltaMode!==0&&(o.wheelStartX==null?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=t,o.wheelDY=n,setTimeout(function(){if(o.wheelStartX!=null){var H=a.scrollLeft-o.wheelStartX,B=a.scrollTop-o.wheelStartY,K=B&&o.wheelDY&&B/o.wheelDY||H&&o.wheelDX&&H/o.wheelDX;o.wheelStartX=o.wheelStartY=null,!!K&&(un=(un*zn+K)/(zn+1),++zn)}},200)):(o.wheelDX+=t,o.wheelDY+=n))}}var gr=function(r,l){this.ranges=r,this.primIndex=l};gr.prototype.primary=function(){return this.ranges[this.primIndex]},gr.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var l=0;l<this.ranges.length;l++){var e=this.ranges[l],t=r.ranges[l];if(!I(e.anchor,t.anchor)||!I(e.head,t.head))return!1}return!0},gr.prototype.deepCopy=function(){for(var r=[],l=0;l<this.ranges.length;l++)r[l]=new at(re(this.ranges[l].anchor),re(this.ranges[l].head));return new gr(r,this.primIndex)},gr.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},gr.prototype.contains=function(r,l){l||(l=r);for(var e=0;e<this.ranges.length;e++){var t=this.ranges[e];if(T(l,t.from())>=0&&T(r,t.to())<=0)return e}return-1};var at=function(r,l){this.anchor=r,this.head=l};at.prototype.from=function(){return He(this.anchor,this.head)},at.prototype.to=function(){return Te(this.anchor,this.head)},at.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Mt(r,l,e){var t=r&&r.options.selectionsMayTouch,n=l[e];l.sort(function(d,v){return T(d.from(),v.from())}),e=me(l,n);for(var i=1;i<l.length;i++){var o=l[i],a=l[i-1],s=T(a.to(),o.from());if(t&&!o.empty()?s>0:s>=0){var u=He(a.from(),o.from()),f=Te(a.to(),o.to()),h=a.empty()?o.from()==o.head:a.from()==a.head;i<=e&&--e,l.splice(--i,2,new at(h?f:u,h?u:f))}}return new gr(l,e)}function Ie(r,l){return new gr([new at(r,l||r)],0)}function Gt(r){return r.text?c(r.from.line+r.text.length-1,Ee(r.text).length+(r.text.length==1?r.from.ch:0)):r.to}function hn(r,l){if(T(r,l.from)<0)return r;if(T(r,l.to)<=0)return Gt(l);var e=r.line+l.text.length-(l.to.line-l.from.line)-1,t=r.ch;return r.line==l.to.line&&(t+=Gt(l).ch-l.to.ch),c(e,t)}function Qr(r,l){for(var e=[],t=0;t<r.sel.ranges.length;t++){var n=r.sel.ranges[t];e.push(new at(hn(n.anchor,l),hn(n.head,l)))}return Mt(r.cm,e,r.sel.primIndex)}function ta(r,l,e){return r.line==l.line?c(e.line,r.ch-l.ch+e.ch):c(e.line+(r.line-l.line),r.ch)}function ra(r,l,e){for(var t=[],n=c(r.first,0),i=n,o=0;o<l.length;o++){var a=l[o],s=ta(a.from,n,i),u=ta(Gt(a),n,i);if(n=a.to,i=u,e=="around"){var f=r.sel.ranges[o],h=T(f.head,f.anchor)<0;t[o]=new at(h?u:s,h?s:u)}else t[o]=new at(s,s)}return new gr(t,r.sel.primIndex)}function fo(r){r.doc.mode=Ln(r.options,r.doc.modeOption),bl(r)}function bl(r){r.doc.iter(function(l){l.stateAfter&&(l.stateAfter=null),l.styles&&(l.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Wt(r,100),r.state.modeGen++,r.curOp&&Et(r)}function ho(r,l){return l.from.ch==0&&l.to.ch==0&&Ee(l.text)==""&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function ai(r,l,e,t){function n(K){return e?e[K]:null}function i(K,q,$){zo(K,q,$,t),Ht(K,"change",K,l)}function o(K,q){for(var $=[],ne=K;ne<q;++ne)$.push(new ln(u[ne],n(ne),t));return $}var a=l.from,s=l.to,u=l.text,f=Se(r,a.line),h=Se(r,s.line),d=Ee(u),v=n(u.length-1),C=s.line-a.line;if(l.full)r.insert(0,o(0,u.length)),r.remove(u.length,r.size-u.length);else if(ho(r,l)){var k=o(0,u.length-1);i(h,h.text,v),C&&r.remove(a.line,C),k.length&&r.insert(a.line,k)}else if(f==h)if(u.length==1)i(f,f.text.slice(0,a.ch)+d+f.text.slice(s.ch),v);else{var H=o(1,u.length-1);H.push(new ln(d+f.text.slice(s.ch),v,t)),i(f,f.text.slice(0,a.ch)+u[0],n(0)),r.insert(a.line+1,H)}else if(u.length==1)i(f,f.text.slice(0,a.ch)+u[0]+h.text.slice(s.ch),n(0)),r.remove(a.line+1,C);else{i(f,f.text.slice(0,a.ch)+u[0],n(0)),i(h,d+h.text.slice(s.ch),v);var B=o(1,u.length-1);C>1&&r.remove(a.line+1,C-1),r.insert(a.line+1,B)}Ht(r,"change",r,l)}function cn(r,l,e){function t(n,i,o){if(n.linked)for(var a=0;a<n.linked.length;++a){var s=n.linked[a];if(s.doc!=i){var u=o&&s.sharedHist;e&&!u||(l(s.doc,u),t(s.doc,n,u))}}}t(r,null,!0)}function co(r,l){if(l.cm)throw new Error("This document is already in use.");r.doc=l,l.cm=r,hl(r),fo(r),dn(r),r.options.direction=l.direction,r.options.lineWrapping||Hr(r),r.options.mode=l.modeOption,Et(r)}function dn(r){(r.doc.direction=="rtl"?je:ue)(r.display.lineDiv,"CodeMirror-rtl")}function us(r){ar(r,function(){dn(r),Et(r)})}function wl(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function na(r,l){var e={from:re(l.from),to:Gt(l),text:ct(r,l.from,l.to)};return hs(r,e,l.from.line,l.to.line+1),cn(r,function(t){return hs(t,e,l.from.line,l.to.line+1)},!0),e}function xl(r){for(;r.length;){var l=Ee(r);if(l.ranges)r.pop();else break}}function ia(r,l){if(l)return xl(r.done),Ee(r.done);if(r.done.length&&!Ee(r.done).ranges)return Ee(r.done);if(r.done.length>1&&!r.done[r.done.length-2].ranges)return r.done.pop(),Ee(r.done)}function la(r,l,e,t){var n=r.history;n.undone.length=0;var i=+new Date,o,a;if((n.lastOp==t||n.lastOrigin==l.origin&&l.origin&&(l.origin.charAt(0)=="+"&&n.lastModTime>i-(r.cm?r.cm.options.historyEventDelay:500)||l.origin.charAt(0)=="*"))&&(o=ia(n,n.lastOp==t)))a=Ee(o.changes),T(l.from,l.to)==0&&T(l.from,a.to)==0?a.to=Gt(l):o.changes.push(na(r,l));else{var s=Ee(n.done);for((!s||!s.ranges)&&po(r.sel,n.done),o={changes:[na(r,l)],generation:n.generation},n.done.push(o);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(e),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=i,n.lastOp=n.lastSelOp=t,n.lastOrigin=n.lastSelOrigin=l.origin,a||vt(r,"historyAdded")}function su(r,l,e,t){var n=l.charAt(0);return n=="*"||n=="+"&&e.ranges.length==t.ranges.length&&e.somethingSelected()==t.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}function fs(r,l,e,t){var n=r.history,i=t&&t.origin;e==n.lastSelOp||i&&n.lastSelOrigin==i&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==i||su(r,i,Ee(n.done),l))?n.done[n.done.length-1]=l:po(l,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=i,n.lastSelOp=e,t&&t.clearRedo!==!1&&xl(n.undone)}function po(r,l){var e=Ee(l);e&&e.ranges&&e.equals(r)||l.push(r)}function hs(r,l,e,t){var n=l["spans_"+r.id],i=0;r.iter(Math.max(r.first,e),Math.min(r.first+r.size,t),function(o){o.markedSpans&&((n||(n=l["spans_"+r.id]={}))[i]=o.markedSpans),++i})}function vo(r){if(!r)return null;for(var l,e=0;e<r.length;++e)r[e].marker.explicitlyCleared?l||(l=r.slice(0,e)):l&&l.push(r[e]);return l?l.length?l:null:r}function cs(r,l){var e=l["spans_"+r.id];if(!e)return null;for(var t=[],n=0;n<l.text.length;++n)t.push(vo(e[n]));return t}function ds(r,l){var e=cs(r,l),t=Fo(r,l);if(!e)return t;if(!t)return e;for(var n=0;n<e.length;++n){var i=e[n],o=t[n];if(i&&o){e:for(var a=0;a<o.length;++a){for(var s=o[a],u=0;u<i.length;++u)if(i[u].marker==s.marker)continue e;i.push(s)}}else o&&(e[n]=o)}return e}function _i(r,l,e){for(var t=[],n=0;n<r.length;++n){var i=r[n];if(i.ranges){t.push(e?gr.prototype.deepCopy.call(i):i);continue}var o=i.changes,a=[];t.push({changes:a});for(var s=0;s<o.length;++s){var u=o[s],f=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),l)for(var h in u)(f=h.match(/^spans_(\d+)$/))&&me(l,Number(f[1]))>-1&&(Ee(a)[h]=u[h],delete u[h])}}return t}function go(r,l,e,t){if(t){var n=r.anchor;if(e){var i=T(l,n)<0;i!=T(e,n)<0?(n=l,l=e):i!=T(l,e)<0&&(l=e)}return new at(n,l)}else return new at(e||l,l)}function pn(r,l,e,t,n){n==null&&(n=r.cm&&(r.cm.display.shift||r.extend)),qt(r,new gr([go(r.sel.primary(),l,e,n)],0),t)}function yo(r,l,e){for(var t=[],n=r.cm&&(r.cm.display.shift||r.extend),i=0;i<r.sel.ranges.length;i++)t[i]=go(r.sel.ranges[i],l[i],null,n);var o=Mt(r.cm,t,r.sel.primIndex);qt(r,o,e)}function Hi(r,l,e,t){var n=r.sel.ranges.slice(0);n[l]=e,qt(r,Mt(r.cm,n,r.sel.primIndex),t)}function oa(r,l,e,t){qt(r,Ie(l,e),t)}function aa(r,l,e){var t={ranges:l.ranges,update:function(n){this.ranges=[];for(var i=0;i<n.length;i++)this.ranges[i]=new at(xe(r,n[i].anchor),xe(r,n[i].head))},origin:e&&e.origin};return vt(r,"beforeSelectionChange",r,t),r.cm&&vt(r.cm,"beforeSelectionChange",r.cm,t),t.ranges!=l.ranges?Mt(r.cm,t.ranges,t.ranges.length-1):l}function sa(r,l,e){var t=r.history.done,n=Ee(t);n&&n.ranges?(t[t.length-1]=l,Sl(r,l,e)):qt(r,l,e)}function qt(r,l,e){Sl(r,l,e),fs(r,r.sel,r.cm?r.cm.curOp.id:NaN,e)}function Sl(r,l,e){(qe(r,"beforeSelectionChange")||r.cm&&qe(r.cm,"beforeSelectionChange"))&&(l=aa(r,l,e));var t=e&&e.bias||(T(l.primary().head,r.sel.primary().head)<0?-1:1);Kt(r,ua(r,l,t,!0)),!(e&&e.scroll===!1)&&r.cm&&r.cm.getOption("readOnly")!="nocursor"&&En(r.cm)}function Kt(r,l){l.equals(r.sel)||(r.sel=l,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,ft(r.cm)),Ht(r,"cursorActivity",r))}function Cl(r){Kt(r,ua(r,r.sel,null,!1))}function ua(r,l,e,t){for(var n,i=0;i<l.ranges.length;i++){var o=l.ranges[i],a=l.ranges.length==r.sel.ranges.length&&r.sel.ranges[i],s=kl(r,o.anchor,a&&a.anchor,e,t),u=o.head==o.anchor?s:kl(r,o.head,a&&a.head,e,t);(n||s!=o.anchor||u!=o.head)&&(n||(n=l.ranges.slice(0,i)),n[i]=new at(s,u))}return n?Mt(r.cm,n,l.primIndex):l}function si(r,l,e,t,n){var i=Se(r,l.line);if(i.markedSpans)for(var o=0;o<i.markedSpans.length;++o){var a=i.markedSpans[o],s=a.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,f="selectRight"in s?!s.selectRight:s.inclusiveRight;if((a.from==null||(u?a.from<=l.ch:a.from<l.ch))&&(a.to==null||(f?a.to>=l.ch:a.to>l.ch))){if(n&&(vt(s,"beforeCursorEnter"),s.explicitlyCleared))if(i.markedSpans){--o;continue}else break;if(!s.atomic)continue;if(e){var h=s.find(t<0?1:-1),d=void 0;if((t<0?f:u)&&(h=ui(r,h,-t,h&&h.line==l.line?i:null)),h&&h.line==l.line&&(d=T(h,e))&&(t<0?d<0:d>0))return si(r,h,l,t,n)}var v=s.find(t<0?-1:1);return(t<0?u:f)&&(v=ui(r,v,t,v.line==l.line?i:null)),v?si(r,v,l,t,n):null}}return l}function kl(r,l,e,t,n){var i=t||1,o=si(r,l,e,i,n)||!n&&si(r,l,e,i,!0)||si(r,l,e,-i,n)||!n&&si(r,l,e,-i,!0);return o||(r.cantEdit=!0,c(r.first,0))}function ui(r,l,e,t){return e<0&&l.ch==0?l.line>r.first?xe(r,c(l.line-1)):null:e>0&&l.ch==(t||Se(r,l.line)).text.length?l.line<r.first+r.size-1?c(l.line+1,0):null:new c(l.line,l.ch+e)}function Ll(r){r.setSelection(c(r.firstLine(),0),c(r.lastLine()),Qt)}function fa(r,l,e){var t={canceled:!1,from:l.from,to:l.to,text:l.text,origin:l.origin,cancel:function(){return t.canceled=!0}};return e&&(t.update=function(n,i,o,a){n&&(t.from=xe(r,n)),i&&(t.to=xe(r,i)),o&&(t.text=o),a!==void 0&&(t.origin=a)}),vt(r,"beforeChange",r,t),r.cm&&vt(r.cm,"beforeChange",r.cm,t),t.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:t.from,to:t.to,text:t.text,origin:t.origin}}function fi(r,l,e){if(r.cm){if(!r.cm.curOp)return zt(r.cm,fi)(r,l,e);if(r.cm.state.suppressEdits)return}if(!((qe(r,"beforeChange")||r.cm&&qe(r.cm,"beforeChange"))&&(l=fa(r,l,!0),!l))){var t=Ea&&!e&&Wo(r,l.from,l.to);if(t)for(var n=t.length-1;n>=0;--n)ha(r,{from:t[n].from,to:t[n].to,text:n?[""]:l.text,origin:l.origin});else ha(r,l)}}function ha(r,l){if(!(l.text.length==1&&l.text[0]==""&&T(l.from,l.to)==0)){var e=Qr(r,l);la(r,l,e,r.cm?r.cm.curOp.id:NaN),In(r,l,e,Fo(r,l));var t=[];cn(r,function(n,i){!i&&me(t,n.history)==-1&&(da(n.history,l),t.push(n.history)),In(n,l,null,Fo(n,l))})}}function vn(r,l,e){var t=r.cm&&r.cm.state.suppressEdits;if(!(t&&!e)){for(var n=r.history,i,o=r.sel,a=l=="undo"?n.done:n.undone,s=l=="undo"?n.undone:n.done,u=0;u<a.length&&(i=a[u],!(e?i.ranges&&!i.equals(r.sel):!i.ranges));u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(i=a.pop(),i.ranges){if(po(i,s),e&&!i.equals(r.sel)){qt(r,i,{clearRedo:!1});return}o=i}else if(t){a.push(i);return}else break;var f=[];po(o,s),s.push({changes:f,generation:n.generation}),n.generation=i.generation||++n.maxGeneration;for(var h=qe(r,"beforeChange")||r.cm&&qe(r.cm,"beforeChange"),d=function(k){var H=i.changes[k];if(H.origin=l,h&&!fa(r,H,!1))return a.length=0,{};f.push(na(r,H));var B=k?Qr(r,H):Ee(a);In(r,H,B,ds(r,H)),!k&&r.cm&&r.cm.scrollIntoView({from:H.from,to:Gt(H)});var K=[];cn(r,function(q,$){!$&&me(K,q.history)==-1&&(da(q.history,H),K.push(q.history)),In(q,H,null,ds(q,H))})},v=i.changes.length-1;v>=0;--v){var C=d(v);if(C)return C.v}}}}function ca(r,l){if(l!=0&&(r.first+=l,r.sel=new gr(jt(r.sel.ranges,function(n){return new at(c(n.anchor.line+l,n.anchor.ch),c(n.head.line+l,n.head.ch))}),r.sel.primIndex),r.cm)){Et(r.cm,r.first,r.first-l,l);for(var e=r.cm.display,t=e.viewFrom;t<e.viewTo;t++)or(r.cm,t,"gutter")}}function In(r,l,e,t){if(r.cm&&!r.cm.curOp)return zt(r.cm,In)(r,l,e,t);if(l.to.line<r.first){ca(r,l.text.length-1-(l.to.line-l.from.line));return}if(!(l.from.line>r.lastLine())){if(l.from.line<r.first){var n=l.text.length-1-(r.first-l.from.line);ca(r,n),l={from:c(r.first,0),to:c(l.to.line+n,l.to.ch),text:[Ee(l.text)],origin:l.origin}}var i=r.lastLine();l.to.line>i&&(l={from:l.from,to:c(i,Se(r,i).text.length),text:[l.text[0]],origin:l.origin}),l.removed=ct(r,l.from,l.to),e||(e=Qr(r,l)),r.cm?ps(r.cm,l,t):ai(r,l,t),Sl(r,e,Qt),r.cantEdit&&kl(r,c(r.firstLine(),0))&&(r.cantEdit=!1)}}function ps(r,l,e){var t=r.doc,n=r.display,i=l.from,o=l.to,a=!1,s=i.line;r.options.lineWrapping||(s=Ve(Wr(Se(t,i.line))),t.iter(s,o.line+1,function(v){if(v==n.maxLine)return a=!0,!0})),t.sel.contains(l.from,l.to)>-1&&ft(r),ai(t,l,e,no(r)),r.options.lineWrapping||(t.iter(s,i.line+l.text.length,function(v){var C=Ci(v);C>n.maxLineLength&&(n.maxLine=v,n.maxLineLength=C,n.maxLineChanged=!0,a=!1)}),a&&(r.curOp.updateMaxLine=!0)),Pa(t,i.line),Wt(r,400);var u=l.text.length-(o.line-i.line)-1;l.full?Et(r):i.line==o.line&&l.text.length==1&&!ho(r.doc,l)?or(r,i.line,"text"):Et(r,i.line,o.line+1,u);var f=qe(r,"changes"),h=qe(r,"change");if(h||f){var d={from:i,to:o,text:l.text,removed:l.removed,origin:l.origin};h&&Ht(r,"change",r,d),f&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(d)}r.display.selForContextMenu=null}function Jr(r,l,e,t,n){var i;t||(t=e),T(t,e)<0&&(i=[t,e],e=i[0],t=i[1]),typeof l=="string"&&(l=r.splitLines(l)),fi(r,{from:e,to:t,text:l,origin:n})}function vs(r,l,e,t){e<r.line?r.line+=t:l<r.line&&(r.line=l,r.ch=0)}function hi(r,l,e,t){for(var n=0;n<r.length;++n){var i=r[n],o=!0;if(i.ranges){i.copied||(i=r[n]=i.deepCopy(),i.copied=!0);for(var a=0;a<i.ranges.length;a++)vs(i.ranges[a].anchor,l,e,t),vs(i.ranges[a].head,l,e,t);continue}for(var s=0;s<i.changes.length;++s){var u=i.changes[s];if(e<u.from.line)u.from=c(u.from.line+t,u.from.ch),u.to=c(u.to.line+t,u.to.ch);else if(l<=u.to.line){o=!1;break}}o||(r.splice(0,n+1),n=0)}}function da(r,l){var e=l.from.line,t=l.to.line,n=l.text.length-(t-e)-1;hi(r.done,e,t,n),hi(r.undone,e,t,n)}function zi(r,l,e,t){var n=l,i=l;return typeof l=="number"?i=Se(r,nt(r,l)):n=Ve(l),n==null?null:(t(i,n)&&r.cm&&or(r.cm,n,e),i)}function Ii(r){this.lines=r,this.parent=null;for(var l=0,e=0;e<r.length;++e)r[e].parent=this,l+=r[e].height;this.height=l}Ii.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,l){for(var e=r,t=r+l;e<t;++e){var n=this.lines[e];this.height-=n.height,ki(n),Ht(n,"delete")}this.lines.splice(r,l)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,l,e){this.height+=e,this.lines=this.lines.slice(0,r).concat(l).concat(this.lines.slice(r));for(var t=0;t<l.length;++t)l[t].parent=this},iterN:function(r,l,e){for(var t=r+l;r<t;++r)if(e(this.lines[r]))return!0}};function gn(r){this.children=r;for(var l=0,e=0,t=0;t<r.length;++t){var n=r[t];l+=n.chunkSize(),e+=n.height,n.parent=this}this.size=l,this.height=e,this.parent=null}gn.prototype={chunkSize:function(){return this.size},removeInner:function(r,l){this.size-=l;for(var e=0;e<this.children.length;++e){var t=this.children[e],n=t.chunkSize();if(r<n){var i=Math.min(l,n-r),o=t.height;if(t.removeInner(r,i),this.height-=o-t.height,n==i&&(this.children.splice(e--,1),t.parent=null),(l-=i)==0)break;r=0}else r-=n}if(this.size-l<25&&(this.children.length>1||!(this.children[0]instanceof Ii))){var a=[];this.collapse(a),this.children=[new Ii(a)],this.children[0].parent=this}},collapse:function(r){for(var l=0;l<this.children.length;++l)this.children[l].collapse(r)},insertInner:function(r,l,e){this.size+=l.length,this.height+=e;for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<=i){if(n.insertInner(r,l,e),n.lines&&n.lines.length>50){for(var o=n.lines.length%25+25,a=o;a<n.lines.length;){var s=new Ii(n.lines.slice(a,a+=25));n.height-=s.height,this.children.splice(++t,0,s),s.parent=this}n.lines=n.lines.slice(0,o),this.maybeSpill()}break}r-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var l=r.children.splice(r.children.length-5,5),e=new gn(l);if(r.parent){r.size-=e.size,r.height-=e.height;var n=me(r.parent.children,r);r.parent.children.splice(n+1,0,e)}else{var t=new gn(r.children);t.parent=r,r.children=[t,e],r=t}e.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,l,e){for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<i){var o=Math.min(l,i-r);if(n.iterN(r,o,e))return!0;if((l-=o)==0)break;r=0}else r-=i}}};var yn=function(r,l,e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.doc=r,this.node=l};yn.prototype.clear=function(){var r=this.doc.cm,l=this.line.widgets,e=this.line,t=Ve(e);if(!(t==null||!l)){for(var n=0;n<l.length;++n)l[n]==this&&l.splice(n--,1);l.length||(e.widgets=null);var i=Mi(this);Bt(e,Math.max(0,e.height-i)),r&&(ar(r,function(){Ri(r,e,-i),or(r,t,"widget")}),Ht(r,"lineWidgetCleared",r,this,t))}},yn.prototype.changed=function(){var r=this,l=this.height,e=this.doc.cm,t=this.line;this.height=null;var n=Mi(this)-l;!n||(Zr(this.doc,t)||Bt(t,t.height+n),e&&ar(e,function(){e.curOp.forceUpdate=!0,Ri(e,t,n),Ht(e,"lineWidgetChanged",e,r,Ve(t))}))},br(yn);function Ri(r,l,e){Jt(l)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&Zo(r,e)}function Tl(r,l,e,t){var n=new yn(r,e,t),i=r.cm;return i&&n.noHScroll&&(i.display.alignWidgets=!0),zi(r,l,"widget",function(o){var a=o.widgets||(o.widgets=[]);if(n.insertAt==null?a.push(n):a.splice(Math.min(a.length,Math.max(0,n.insertAt)),0,n),n.line=o,i&&!Zr(r,o)){var s=Jt(o)<r.scrollTop;Bt(o,o.height+Mi(n)),s&&Zo(i,n.height),i.curOp.forceUpdate=!0}return!0}),i&&Ht(i,"lineWidgetAdded",i,n,typeof l=="number"?l:Ve(l)),n}var pa=0,Rn=function(r,l){this.lines=[],this.type=l,this.doc=r,this.id=++pa};Rn.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,l=r&&!r.curOp;if(l&&_n(r),qe(this,"clear")){var e=this.find();e&&Ht(this,"clear",e.from,e.to)}for(var t=null,n=null,i=0;i<this.lines.length;++i){var o=this.lines[i],a=Vi(o.markedSpans,this);r&&!this.collapsed?or(r,Ve(o),"text"):r&&(a.to!=null&&(n=Ve(o)),a.from!=null&&(t=Ve(o))),o.markedSpans=Kl(o.markedSpans,a),a.from==null&&this.collapsed&&!Zr(this.doc,o)&&r&&Bt(o,Ni(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Wr(this.lines[s]),f=Ci(u);f>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=f,r.display.maxLineChanged=!0)}t!=null&&r&&this.collapsed&&Et(r,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&Cl(r.doc)),r&&Ht(r,"markerCleared",r,this,t,n),l&&ni(r),this.parent&&this.parent.clear()}},Rn.prototype.find=function(r,l){r==null&&this.type=="bookmark"&&(r=1);for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],o=Vi(i.markedSpans,this);if(o.from!=null&&(e=c(l?i:Ve(i),o.from),r==-1))return e;if(o.to!=null&&(t=c(l?i:Ve(i),o.to),r==1))return t}return e&&{from:e,to:t}},Rn.prototype.changed=function(){var r=this,l=this.find(-1,!0),e=this,t=this.doc.cm;!l||!t||ar(t,function(){var n=l.line,i=Ve(l.line),o=Uo(t,i);if(o&&($a(o),t.curOp.selectionChanged=t.curOp.forceUpdate=!0),t.curOp.updateMaxLine=!0,!Zr(e.doc,n)&&e.height!=null){var a=e.height;e.height=null;var s=Mi(e)-a;s&&Bt(n,n.height+s)}Ht(t,"markerChanged",t,r)})},Rn.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(!l.maybeHiddenMarkers||me(l.maybeHiddenMarkers,this)==-1)&&(l.maybeUnhiddenMarkers||(l.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},Rn.prototype.detachLine=function(r){if(this.lines.splice(me(this.lines,r),1),!this.lines.length&&this.doc.cm){var l=this.doc.cm.curOp;(l.maybeHiddenMarkers||(l.maybeHiddenMarkers=[])).push(this)}},br(Rn);function ci(r,l,e,t,n){if(t&&t.shared)return Bi(r,l,e,t,n);if(r.cm&&!r.cm.curOp)return zt(r.cm,ci)(r,l,e,t,n);var i=new Rn(r,n),o=T(l,e);if(t&&Yt(t,i,!1),o>0||o==0&&i.clearWhenEmpty!==!1)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=Ae("span",[i.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if(il(r,l.line,l,e,i)||l.line!=e.line&&il(r,e.line,l,e,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");nn()}i.addToHistory&&la(r,{from:l,to:e,origin:"markText"},r.sel,NaN);var a=l.line,s=r.cm,u;if(r.iter(a,e.line+1,function(h){s&&i.collapsed&&!s.options.lineWrapping&&Wr(h)==s.display.maxLine&&(u=!0),i.collapsed&&a!=l.line&&Bt(h,0),$i(h,new Gl(i,a==l.line?l.ch:null,a==e.line?e.ch:null),r.cm&&r.cm.curOp),++a}),i.collapsed&&r.iter(l.line,e.line+1,function(h){Zr(r,h)&&Bt(h,0)}),i.clearOnEnter&&ye(i,"beforeCursorEnter",function(){return i.clear()}),i.readOnly&&(Fa(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),i.collapsed&&(i.id=++pa,i.atomic=!0),s){if(u&&(s.curOp.updateMaxLine=!0),i.collapsed)Et(s,l.line,e.line+1);else if(i.className||i.startStyle||i.endStyle||i.css||i.attributes||i.title)for(var f=l.line;f<=e.line;f++)or(s,f,"text");i.atomic&&Cl(s.doc),Ht(s,"markerAdded",s,i)}return i}var Dr=function(r,l){this.markers=r,this.primary=l;for(var e=0;e<r.length;++e)r[e].parent=this};Dr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();Ht(this,"clear")}},Dr.prototype.find=function(r,l){return this.primary.find(r,l)},br(Dr);function Bi(r,l,e,t,n){t=Yt(t),t.shared=!1;var i=[ci(r,l,e,t,n)],o=i[0],a=t.widgetNode;return cn(r,function(s){a&&(t.widgetNode=a.cloneNode(!0)),i.push(ci(s,xe(s,l),xe(s,e),t,n));for(var u=0;u<s.linked.length;++u)if(s.linked[u].isParent)return;o=Ee(i)}),new Dr(i,o)}function Ui(r){return r.findMarks(c(r.first,0),r.clipPos(c(r.lastLine())),function(l){return l.parent})}function uu(r,l){for(var e=0;e<l.length;e++){var t=l[e],n=t.find(),i=r.clipPos(n.from),o=r.clipPos(n.to);if(T(i,o)){var a=ci(r,i,o,t.primary,t.primary.type);t.markers.push(a),a.parent=t}}}function gs(r){for(var l=function(t){var n=r[t],i=[n.primary.doc];cn(n.primary.doc,function(s){return i.push(s)});for(var o=0;o<n.markers.length;o++){var a=n.markers[o];me(i,a.doc)==-1&&(a.parent=null,n.markers.splice(o--,1))}},e=0;e<r.length;e++)l(e)}var fu=0,$t=function(r,l,e,t,n){if(!(this instanceof $t))return new $t(r,l,e,t,n);e==null&&(e=0),gn.call(this,[new Ii([new ln("",null)])]),this.first=e,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=e;var i=c(e,0);this.sel=Ie(i),this.history=new wl(null),this.id=++fu,this.modeOption=l,this.lineSep=t,this.direction=n=="rtl"?"rtl":"ltr",this.extend=!1,typeof r=="string"&&(r=this.splitLines(r)),ai(this,{from:i,to:i,text:r}),qt(this,Ie(i),Qt)};$t.prototype=w(gn.prototype,{constructor:$t,iter:function(r,l,e){e?this.iterN(r-this.first,l-r,e):this.iterN(this.first,this.first+this.size,r)},insert:function(r,l){for(var e=0,t=0;t<l.length;++t)e+=l[t].height;this.insertInner(r-this.first,l,e)},remove:function(r,l){this.removeInner(r-this.first,l)},getValue:function(r){var l=we(this,this.first,this.first+this.size);return r===!1?l:l.join(r||this.lineSeparator())},setValue:Ze(function(r){var l=c(this.first,0),e=this.first+this.size-1;fi(this,{from:l,to:c(e,Se(this,e).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&ti(this.cm,0,0),qt(this,Ie(l),Qt)}),replaceRange:function(r,l,e,t){l=xe(this,l),e=e?xe(this,e):l,Jr(this,r,l,e,t)},getRange:function(r,l,e){var t=ct(this,xe(this,r),xe(this,l));return e===!1?t:e===""?t.join(""):t.join(e||this.lineSeparator())},getLine:function(r){var l=this.getLineHandle(r);return l&&l.text},getLineHandle:function(r){if(Qe(this,r))return Se(this,r)},getLineNumber:function(r){return Ve(r)},getLineHandleVisualStart:function(r){return typeof r=="number"&&(r=Se(this,r)),Wr(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return xe(this,r)},getCursor:function(r){var l=this.sel.primary(),e;return r==null||r=="head"?e=l.head:r=="anchor"?e=l.anchor:r=="end"||r=="to"||r===!1?e=l.to():e=l.from(),e},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ze(function(r,l,e){oa(this,xe(this,typeof r=="number"?c(r,l||0):r),null,e)}),setSelection:Ze(function(r,l,e){oa(this,xe(this,r),xe(this,l||r),e)}),extendSelection:Ze(function(r,l,e){pn(this,xe(this,r),l&&xe(this,l),e)}),extendSelections:Ze(function(r,l){yo(this,De(this,r),l)}),extendSelectionsBy:Ze(function(r,l){var e=jt(this.sel.ranges,r);yo(this,De(this,e),l)}),setSelections:Ze(function(r,l,e){if(!!r.length){for(var t=[],n=0;n<r.length;n++)t[n]=new at(xe(this,r[n].anchor),xe(this,r[n].head||r[n].anchor));l==null&&(l=Math.min(r.length-1,this.sel.primIndex)),qt(this,Mt(this.cm,t,l),e)}}),addSelection:Ze(function(r,l,e){var t=this.sel.ranges.slice(0);t.push(new at(xe(this,r),xe(this,l||r))),qt(this,Mt(this.cm,t,t.length-1),e)}),getSelection:function(r){for(var l=this.sel.ranges,e,t=0;t<l.length;t++){var n=ct(this,l[t].from(),l[t].to());e=e?e.concat(n):n}return r===!1?e:e.join(r||this.lineSeparator())},getSelections:function(r){for(var l=[],e=this.sel.ranges,t=0;t<e.length;t++){var n=ct(this,e[t].from(),e[t].to());r!==!1&&(n=n.join(r||this.lineSeparator())),l[t]=n}return l},replaceSelection:function(r,l,e){for(var t=[],n=0;n<this.sel.ranges.length;n++)t[n]=r;this.replaceSelections(t,l,e||"+input")},replaceSelections:Ze(function(r,l,e){for(var t=[],n=this.sel,i=0;i<n.ranges.length;i++){var o=n.ranges[i];t[i]={from:o.from(),to:o.to(),text:this.splitLines(r[i]),origin:e}}for(var a=l&&l!="end"&&ra(this,t,l),s=t.length-1;s>=0;s--)fi(this,t[s]);a?sa(this,a):this.cm&&En(this.cm)}),undo:Ze(function(){vn(this,"undo")}),redo:Ze(function(){vn(this,"redo")}),undoSelection:Ze(function(){vn(this,"undo",!0)}),redoSelection:Ze(function(){vn(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,l=0,e=0,t=0;t<r.done.length;t++)r.done[t].ranges||++l;for(var n=0;n<r.undone.length;n++)r.undone[n].ranges||++e;return{undo:l,redo:e}},clearHistory:function(){var r=this;this.history=new wl(this.history),cn(this,function(l){return l.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:_i(this.history.done),undone:_i(this.history.undone)}},setHistory:function(r){var l=this.history=new wl(this.history);l.done=_i(r.done.slice(0),null,!0),l.undone=_i(r.undone.slice(0),null,!0)},setGutterMarker:Ze(function(r,l,e){return zi(this,r,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[l]=e,!e&&Z(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Ze(function(r){var l=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[r]&&zi(l,e,"gutter",function(){return e.gutterMarkers[r]=null,Z(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(r){var l;if(typeof r=="number"){if(!Qe(this,r)||(l=r,r=Se(this,r),!r))return null}else if(l=Ve(r),l==null)return null;return{line:l,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Ze(function(r,l,e){return zi(this,r,l=="gutter"?"gutter":"class",function(t){var n=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass";if(!t[n])t[n]=e;else{if(de(e).test(t[n]))return!1;t[n]+=" "+e}return!0})}),removeLineClass:Ze(function(r,l,e){return zi(this,r,l=="gutter"?"gutter":"class",function(t){var n=l=="text"?"textClass":l=="background"?"bgClass":l=="gutter"?"gutterClass":"wrapClass",i=t[n];if(i)if(e==null)t[n]=null;else{var o=i.match(de(e));if(!o)return!1;var a=o.index+o[0].length;t[n]=i.slice(0,o.index)+(!o.index||a==i.length?"":" ")+i.slice(a)||null}else return!1;return!0})}),addLineWidget:Ze(function(r,l,e){return Tl(this,r,l,e)}),removeLineWidget:function(r){r.clear()},markText:function(r,l,e){return ci(this,xe(this,r),xe(this,l),e,e&&e.type||"range")},setBookmark:function(r,l){var e={replacedWith:l&&(l.nodeType==null?l.widget:l),insertLeft:l&&l.insertLeft,clearWhenEmpty:!1,shared:l&&l.shared,handleMouseEvents:l&&l.handleMouseEvents};return r=xe(this,r),ci(this,r,r,e,"bookmark")},findMarksAt:function(r){r=xe(this,r);var l=[],e=Se(this,r.line).markedSpans;if(e)for(var t=0;t<e.length;++t){var n=e[t];(n.from==null||n.from<=r.ch)&&(n.to==null||n.to>=r.ch)&&l.push(n.marker.parent||n.marker)}return l},findMarks:function(r,l,e){r=xe(this,r),l=xe(this,l);var t=[],n=r.line;return this.iter(r.line,l.line+1,function(i){var o=i.markedSpans;if(o)for(var a=0;a<o.length;a++){var s=o[a];!(s.to!=null&&n==r.line&&r.ch>=s.to||s.from==null&&n!=r.line||s.from!=null&&n==l.line&&s.from>=l.ch)&&(!e||e(s.marker))&&t.push(s.marker.parent||s.marker)}++n}),t},getAllMarks:function(){var r=[];return this.iter(function(l){var e=l.markedSpans;if(e)for(var t=0;t<e.length;++t)e[t].from!=null&&r.push(e[t].marker)}),r},posFromIndex:function(r){var l,e=this.first,t=this.lineSeparator().length;return this.iter(function(n){var i=n.text.length+t;if(i>r)return l=r,!0;r-=i,++e}),xe(this,c(e,l))},indexFromPos:function(r){r=xe(this,r);var l=r.ch;if(r.line<this.first||r.ch<0)return 0;var e=this.lineSeparator().length;return this.iter(this.first,r.line,function(t){l+=t.text.length+e}),l},copy:function(r){var l=new $t(we(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return l.scrollTop=this.scrollTop,l.scrollLeft=this.scrollLeft,l.sel=this.sel,l.extend=!1,r&&(l.history.undoDepth=this.history.undoDepth,l.setHistory(this.getHistory())),l},linkedDoc:function(r){r||(r={});var l=this.first,e=this.first+this.size;r.from!=null&&r.from>l&&(l=r.from),r.to!=null&&r.to<e&&(e=r.to);var t=new $t(we(this,l,e),r.mode||this.modeOption,l,this.lineSep,this.direction);return r.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:r.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],uu(t,Ui(this)),t},unlinkDoc:function(r){if(r instanceof St&&(r=r.doc),this.linked)for(var l=0;l<this.linked.length;++l){var e=this.linked[l];if(e.doc==r){this.linked.splice(l,1),r.unlinkDoc(this),gs(Ui(this));break}}if(r.history==this.history){var t=[r.id];cn(r,function(n){return t.push(n.id)},!0),r.history=new wl(null),r.history.done=_i(this.history.done,t),r.history.undone=_i(this.history.undone,t)}},iterLinkedDocs:function(r){cn(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):Cn(r)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ze(function(r){r!="rtl"&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(l){return l.order=null}),this.cm&&us(this.cm))})}),$t.prototype.eachLine=$t.prototype.iter;var ys=0;function er(r){var l=this;if(bs(l),!(Ge(l,r)||on(l.display,r))){rt(r),m&&(ys=+new Date);var e=Nn(l,r,!0),t=r.dataTransfer.files;if(!(!e||l.isReadOnly()))if(t&&t.length&&window.FileReader&&window.File)for(var n=t.length,i=Array(n),o=0,a=function(){++o==n&&zt(l,function(){e=xe(l.doc,e);var v={from:e,to:e,text:l.doc.splitLines(i.filter(function(C){return C!=null}).join(l.doc.lineSeparator())),origin:"paste"};fi(l.doc,v),sa(l.doc,Ie(xe(l.doc,e),xe(l.doc,Gt(v))))})()},s=function(v,C){if(l.options.allowDropFileTypes&&me(l.options.allowDropFileTypes,v.type)==-1){a();return}var k=new FileReader;k.onerror=function(){return a()},k.onload=function(){var H=k.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(H)){a();return}i[C]=H,a()},k.readAsText(v)},u=0;u<t.length;u++)s(t[u],u);else{if(l.state.draggingText&&l.doc.sel.contains(e)>-1){l.state.draggingText(r),setTimeout(function(){return l.display.input.focus()},20);return}try{var f=r.dataTransfer.getData("Text");if(f){var h;if(l.state.draggingText&&!l.state.draggingText.copy&&(h=l.listSelections()),Sl(l.doc,Ie(e,e)),h)for(var d=0;d<h.length;++d)Jr(l.doc,"",h[d].anchor,h[d].head,"drag");l.replaceSelection(f,"around","paste"),l.display.input.focus()}}catch{}}}}function ms(r,l){if(m&&(!r.state.draggingText||+new Date-ys<100)){nr(l);return}if(!(Ge(r,l)||on(r.display,l))&&(l.dataTransfer.setData("Text",r.getSelection()),l.dataTransfer.effectAllowed="copyMove",l.dataTransfer.setDragImage&&!E)){var e=L("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",F&&(e.width=e.height=1,r.display.wrapper.appendChild(e),e._top=e.offsetTop),l.dataTransfer.setDragImage(e,0,0),F&&e.parentNode.removeChild(e)}}function hu(r,l){var e=Nn(r,l);if(!!e){var t=document.createDocumentFragment();Vn(r,e,t),r.display.dragCursor||(r.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),fe(r.display.dragCursor,t)}}function bs(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function ws(r){if(!!document.getElementsByClassName){for(var l=document.getElementsByClassName("CodeMirror"),e=[],t=0;t<l.length;t++){var n=l[t].CodeMirror;n&&e.push(n)}e.length&&e[0].operation(function(){for(var i=0;i<e.length;i++)r(e[i])})}}var va=!1;function xs(){va||(Ss(),va=!0)}function Ss(){var r;ye(window,"resize",function(){r==null&&(r=setTimeout(function(){r=null,ws(cu)},100))}),ye(window,"blur",function(){return ws(Pn)})}function cu(r){var l=r.display;l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.scrollbarsClipped=!1,r.setSize()}for(var Bn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ml=0;Ml<10;Ml++)Bn[Ml+48]=Bn[Ml+96]=String(Ml);for(var Ur=65;Ur<=90;Ur++)Bn[Ur]=String.fromCharCode(Ur);for(var mn=1;mn<=12;mn++)Bn[mn+111]=Bn[mn+63235]="F"+mn;var Or={};Or.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Or.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Or.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Or.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Or.default=V?Or.macDefault:Or.pcDefault;function Dl(r){var l=r.split(/-(?!$)/);r=l[l.length-1];for(var e,t,n,i,o=0;o<l.length-1;o++){var a=l[o];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))t=!0;else if(/^s(hift)?$/i.test(a))n=!0;else throw new Error("Unrecognized modifier name: "+a)}return e&&(r="Alt-"+r),t&&(r="Ctrl-"+r),i&&(r="Cmd-"+r),n&&(r="Shift-"+r),r}function bn(r){var l={};for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];if(/^(name|fallthrough|(de|at)tach)$/.test(e))continue;if(t=="..."){delete r[e];continue}for(var n=jt(e.split(" "),Dl),i=0;i<n.length;i++){var o=void 0,a=void 0;i==n.length-1?(a=n.join(" "),o=t):(a=n.slice(0,i+1).join(" "),o="...");var s=l[a];if(!s)l[a]=o;else if(s!=o)throw new Error("Inconsistent bindings for "+a)}delete r[e]}for(var u in l)r[u]=l[u];return r}function Gi(r,l,e,t){l=Ol(l);var n=l.call?l.call(r,t):l[r];if(n===!1)return"nothing";if(n==="...")return"multi";if(n!=null&&e(n))return"handled";if(l.fallthrough){if(Object.prototype.toString.call(l.fallthrough)!="[object Array]")return Gi(r,l.fallthrough,e,t);for(var i=0;i<l.fallthrough.length;i++){var o=Gi(r,l.fallthrough[i],e,t);if(o)return o}}}function Cs(r){var l=typeof r=="string"?r:Bn[r.keyCode];return l=="Ctrl"||l=="Alt"||l=="Shift"||l=="Mod"}function di(r,l,e){var t=r;return l.altKey&&t!="Alt"&&(r="Alt-"+r),(j?l.metaKey:l.ctrlKey)&&t!="Ctrl"&&(r="Ctrl-"+r),(j?l.ctrlKey:l.metaKey)&&t!="Mod"&&(r="Cmd-"+r),!e&&l.shiftKey&&t!="Shift"&&(r="Shift-"+r),r}function ga(r,l){if(F&&r.keyCode==34&&r.char)return!1;var e=Bn[r.keyCode];return e==null||r.altGraphKey?!1:(r.keyCode==3&&r.code&&(e=r.code),di(e,r,l))}function Ol(r){return typeof r=="string"?Or[r]:r}function pi(r,l){for(var e=r.doc.sel.ranges,t=[],n=0;n<e.length;n++){for(var i=l(e[n]);t.length&&T(i.from,Ee(t).to)<=0;){var o=t.pop();if(T(o.from,i.from)<0){i.from=o.from;break}}t.push(i)}ar(r,function(){for(var a=t.length-1;a>=0;a--)Jr(r.doc,"",t[a].from,t[a].to,"+delete");En(r)})}function Ki(r,l,e){var t=ce(r.text,l+e,e);return t<0||t>r.text.length?null:t}function Un(r,l,e){var t=Ki(r,l.ch,e);return t==null?null:new c(l.line,t,e<0?"after":"before")}function Nl(r,l,e,t,n){if(r){l.doc.direction=="rtl"&&(n=-n);var i=Ne(e,l.doc.direction);if(i){var o=n<0?Ee(i):i[0],a=n<0==(o.level==1),s=a?"after":"before",u;if(o.level>0||l.doc.direction=="rtl"){var f=Zn(l,e);u=n<0?e.text.length-1:0;var h=kr(l,f,u).top;u=pe(function(d){return kr(l,f,d).top==h},n<0==(o.level==1)?o.from:o.to-1,u),s=="before"&&(u=Ki(e,u,1))}else u=n<0?o.to:o.from;return new c(t,u,s)}}return new c(t,n<0?e.text.length:0,n<0?"before":"after")}function ya(r,l,e,t){var n=Ne(l,r.doc.direction);if(!n)return Un(l,e,t);e.ch>=l.text.length?(e.ch=l.text.length,e.sticky="before"):e.ch<=0&&(e.ch=0,e.sticky="after");var i=We(n,e.ch,e.sticky),o=n[i];if(r.doc.direction=="ltr"&&o.level%2==0&&(t>0?o.to>e.ch:o.from<e.ch))return Un(l,e,t);var a=function(B,K){return Ki(l,B instanceof c?B.ch:B,K)},s,u=function(B){return r.options.lineWrapping?(s=s||Zn(r,l),to(r,l,s,B)):{begin:0,end:l.text.length}},f=u(e.sticky=="before"?a(e,-1):e.ch);if(r.doc.direction=="rtl"||o.level==1){var h=o.level==1==t<0,d=a(e,h?1:-1);if(d!=null&&(h?d<=o.to&&d<=f.end:d>=o.from&&d>=f.begin)){var v=h?"before":"after";return new c(e.line,d,v)}}var C=function(B,K,q){for(var $=function(ge,ke){return ke?new c(e.line,a(ge,1),"before"):new c(e.line,ge,"after")};B>=0&&B<n.length;B+=K){var ne=n[B],ie=K>0==(ne.level!=1),ve=ie?q.begin:a(q.end,-1);if(ne.from<=ve&&ve<ne.to||(ve=ie?ne.from:a(ne.to,-1),q.begin<=ve&&ve<q.end))return $(ve,ie)}},k=C(i+t,t,f);if(k)return k;var H=t>0?f.end:a(f.begin,-1);return H!=null&&!(t>0&&H==l.text.length)&&(k=C(t>0?0:n.length-1,t,u(H)),k)?k:null}var vi={selectAll:Ll,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),Qt)},killLine:function(r){return pi(r,function(l){if(l.empty()){var e=Se(r.doc,l.head.line).text.length;return l.head.ch==e&&l.head.line<r.lastLine()?{from:l.head,to:c(l.head.line+1,0)}:{from:l.head,to:c(l.head.line,e)}}else return{from:l.from(),to:l.to()}})},deleteLine:function(r){return pi(r,function(l){return{from:c(l.from().line,0),to:xe(r.doc,c(l.to().line+1,0))}})},delLineLeft:function(r){return pi(r,function(l){return{from:c(l.from().line,0),to:l.from()}})},delWrappedLineLeft:function(r){return pi(r,function(l){var e=r.charCoords(l.head,"div").top+5,t=r.coordsChar({left:0,top:e},"div");return{from:t,to:l.from()}})},delWrappedLineRight:function(r){return pi(r,function(l){var e=r.charCoords(l.head,"div").top+5,t=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div");return{from:l.from(),to:t}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(c(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(c(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(l){return ks(r,l.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(l){return ma(r,l.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(l){return Al(r,l.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(l){var e=r.cursorCoords(l.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div")},ot)},goLineLeft:function(r){return r.extendSelectionsBy(function(l){var e=r.cursorCoords(l.head,"div").top+5;return r.coordsChar({left:0,top:e},"div")},ot)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(l){var e=r.cursorCoords(l.head,"div").top+5,t=r.coordsChar({left:0,top:e},"div");return t.ch<r.getLine(t.line).search(/\S/)?ma(r,l.head):t},ot)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("	")},insertSoftTab:function(r){for(var l=[],e=r.listSelections(),t=r.options.tabSize,n=0;n<e.length;n++){var i=e[n].from(),o=Be(r.getLine(i.line),i.ch,t);l.push(rr(t-o%t))}r.replaceSelections(l)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return ar(r,function(){for(var l=r.listSelections(),e=[],t=0;t<l.length;t++)if(!!l[t].empty()){var n=l[t].head,i=Se(r.doc,n.line).text;if(i){if(n.ch==i.length&&(n=new c(n.line,n.ch-1)),n.ch>0)n=new c(n.line,n.ch+1),r.replaceRange(i.charAt(n.ch-1)+i.charAt(n.ch-2),c(n.line,n.ch-2),n,"+transpose");else if(n.line>r.doc.first){var o=Se(r.doc,n.line-1).text;o&&(n=new c(n.line,1),r.replaceRange(i.charAt(0)+r.doc.lineSeparator()+o.charAt(o.length-1),c(n.line-1,o.length-1),n,"+transpose"))}}e.push(new at(n,n))}r.setSelections(e)})},newlineAndIndent:function(r){return ar(r,function(){for(var l=r.listSelections(),e=l.length-1;e>=0;e--)r.replaceRange(r.doc.lineSeparator(),l[e].anchor,l[e].head,"+input");l=r.listSelections();for(var t=0;t<l.length;t++)r.indentLine(l[t].from().line,null,!0);En(r)})},openLine:function(r){return r.replaceSelection(`
`,"start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function ks(r,l){var e=Se(r.doc,l),t=Wr(e);return t!=e&&(l=Ve(t)),Nl(!0,r,t,l,1)}function Al(r,l){var e=Se(r.doc,l),t=za(e);return t!=e&&(l=Ve(t)),Nl(!0,r,e,l,-1)}function ma(r,l){var e=ks(r,l.line),t=Se(r.doc,e.line),n=Ne(t,r.doc.direction);if(!n||n[0].level==0){var i=Math.max(e.ch,t.text.search(/\S/)),o=l.line==e.line&&l.ch<=i&&l.ch;return c(e.line,o?0:i,e.sticky)}return e}function mo(r,l,e){if(typeof l=="string"&&(l=vi[l],!l))return!1;r.display.input.ensurePolled();var t=r.display.shift,n=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),e&&(r.display.shift=!1),n=l(r)!=Pe}finally{r.display.shift=t,r.state.suppressEdits=!1}return n}function Ls(r,l,e){for(var t=0;t<r.state.keyMaps.length;t++){var n=Gi(l,r.state.keyMaps[t],e,r);if(n)return n}return r.options.extraKeys&&Gi(l,r.options.extraKeys,e,r)||Gi(l,r.options.keyMap,e,r)}var bo=new Ce;function Pl(r,l,e,t){var n=r.state.keySeq;if(n){if(Cs(l))return"handled";if(/\'$/.test(l)?r.state.keySeq=null:bo.set(50,function(){r.state.keySeq==n&&(r.state.keySeq=null,r.display.input.reset())}),Ts(r,n+" "+l,e,t))return!0}return Ts(r,l,e,t)}function Ts(r,l,e,t){var n=Ls(r,l,t);return n=="multi"&&(r.state.keySeq=l),n=="handled"&&Ht(r,"keyHandled",r,l,e),(n=="handled"||n=="multi")&&(rt(e),Ai(r)),!!n}function Xi(r,l){var e=ga(l,!0);return e?l.shiftKey&&!r.state.keySeq?Pl(r,"Shift-"+e,l,function(t){return mo(r,t,!0)})||Pl(r,e,l,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return mo(r,t)}):Pl(r,e,l,function(t){return mo(r,t)}):!1}function Ms(r,l,e){return Pl(r,"'"+e+"'",l,function(t){return mo(r,t,!0)})}var wo=null;function Ds(r){var l=this;if(!(r.target&&r.target!=l.display.input.getField())&&(l.curOp.focus=Fe(),!Ge(l,r))){m&&S<11&&r.keyCode==27&&(r.returnValue=!1);var e=r.keyCode;l.display.shift=e==16||r.shiftKey;var t=Xi(l,r);F&&(wo=t?e:null,!t&&e==88&&!Qi&&(V?r.metaKey:r.ctrlKey)&&l.replaceSelection("",null,"cut")),A&&!V&&!t&&e==46&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),e==18&&!/\bCodeMirror-crosshair\b/.test(l.display.lineDiv.className)&&ba(l)}}function ba(r){var l=r.display.lineDiv;je(l,"CodeMirror-crosshair");function e(t){(t.keyCode==18||!t.altKey)&&(ue(l,"CodeMirror-crosshair"),se(document,"keyup",e),se(document,"mouseover",e))}ye(document,"keyup",e),ye(document,"mouseover",e)}function wa(r){r.keyCode==16&&(this.doc.sel.shift=!1),Ge(this,r)}function Os(r){var l=this;if(!(r.target&&r.target!=l.display.input.getField())&&!(on(l.display,r)||Ge(l,r)||r.ctrlKey&&!r.altKey||V&&r.metaKey)){var e=r.keyCode,t=r.charCode;if(F&&e==wo){wo=null,rt(r);return}if(!(F&&(!r.which||r.which<10)&&Xi(l,r))){var n=String.fromCharCode(t==null?e:t);n!="\b"&&(Ms(l,r,n)||l.display.input.onKeyPress(r))}}}var Ns=400,xo=function(r,l,e){this.time=r,this.pos=l,this.button=e};xo.prototype.compare=function(r,l,e){return this.time+Ns>r&&T(l,this.pos)==0&&e==this.button};var El,gi;function Fl(r,l){var e=+new Date;return gi&&gi.compare(e,r,l)?(El=gi=null,"triple"):El&&El.compare(e,r,l)?(gi=new xo(e,r,l),El=null,"double"):(El=new xo(e,r,l),gi=null,"single")}function Yi(r){var l=this,e=l.display;if(!(Ge(l,r)||e.activeTouch&&e.input.supportsTouch())){if(e.input.ensurePolled(),e.shift=r.shiftKey,on(e,r)){x||(e.scroller.draggable=!1,setTimeout(function(){return e.scroller.draggable=!0},100));return}if(!xa(l,r)){var t=Nn(l,r),n=Kr(r),i=t?Fl(t,n):"single";window.focus(),n==1&&l.state.selectingText&&l.state.selectingText(r),!(t&&du(l,n,t,i,r))&&(n==1?t?pu(l,t,i,r):cr(r)==e.scroller&&rt(r):n==2?(t&&pn(l.doc,t),setTimeout(function(){return e.input.focus()},20)):n==3&&(he?l.display.input.onContextMenu(r):vl(l)))}}}function du(r,l,e,t,n){var i="Click";return t=="double"?i="Double"+i:t=="triple"&&(i="Triple"+i),i=(l==1?"Left":l==2?"Middle":"Right")+i,Pl(r,di(i,n),n,function(o){if(typeof o=="string"&&(o=vi[o]),!o)return!1;var a=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),a=o(r,e)!=Pe}finally{r.state.suppressEdits=!1}return a})}function As(r,l,e){var t=r.getOption("configureMouse"),n=t?t(r,l,e):{};if(n.unit==null){var i=le?e.shiftKey&&e.metaKey:e.altKey;n.unit=i?"rectangle":l=="single"?"char":l=="double"?"word":"line"}return(n.extend==null||r.doc.extend)&&(n.extend=r.doc.extend||e.shiftKey),n.addNew==null&&(n.addNew=V?e.metaKey:e.ctrlKey),n.moveOnDrag==null&&(n.moveOnDrag=!(V?e.altKey:e.ctrlKey)),n}function pu(r,l,e,t){m?setTimeout(kt(rs,r),0):r.curOp.focus=Fe();var n=As(r,e,t),i=r.doc.sel,o;r.options.dragDrop&&Vt&&!r.isReadOnly()&&e=="single"&&(o=i.contains(l))>-1&&(T((o=i.ranges[o]).from(),l)<0||l.xRel>0)&&(T(o.to(),l)>0||l.xRel<0)?vu(r,t,l,n):gu(r,t,l,n)}function vu(r,l,e,t){var n=r.display,i=!1,o=zt(r,function(u){x&&(n.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:vl(r)),se(n.wrapper.ownerDocument,"mouseup",o),se(n.wrapper.ownerDocument,"mousemove",a),se(n.scroller,"dragstart",s),se(n.scroller,"drop",o),i||(rt(u),t.addNew||pn(r.doc,e,null,null,t.extend),x&&!E||m&&S==9?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),a=function(u){i=i||Math.abs(l.clientX-u.clientX)+Math.abs(l.clientY-u.clientY)>=10},s=function(){return i=!0};x&&(n.scroller.draggable=!0),r.state.draggingText=o,o.copy=!t.moveOnDrag,ye(n.wrapper.ownerDocument,"mouseup",o),ye(n.wrapper.ownerDocument,"mousemove",a),ye(n.scroller,"dragstart",s),ye(n.scroller,"drop",o),r.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}function Ps(r,l,e){if(e=="char")return new at(l,l);if(e=="word")return r.findWordAt(l);if(e=="line")return new at(c(l.line,0),xe(r.doc,c(l.line+1,0)));var t=e(r,l);return new at(t.from,t.to)}function gu(r,l,e,t){m&&vl(r);var n=r.display,i=r.doc;rt(l);var o,a,s=i.sel,u=s.ranges;if(t.addNew&&!t.extend?(a=i.sel.contains(e),a>-1?o=u[a]:o=new at(e,e)):(o=i.sel.primary(),a=i.sel.primIndex),t.unit=="rectangle")t.addNew||(o=new at(e,e)),e=Nn(r,l,!0,!0),a=-1;else{var f=Ps(r,e,t.unit);t.extend?o=go(o,f.anchor,f.head,t.extend):o=f}t.addNew?a==-1?(a=u.length,qt(i,Mt(r,u.concat([o]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&t.unit=="char"&&!t.extend?(qt(i,Mt(r,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),s=i.sel):Hi(i,a,o,ze):(a=0,qt(i,new gr([o],0),ze),s=i.sel);var h=e;function d(q){if(T(h,q)!=0)if(h=q,t.unit=="rectangle"){for(var $=[],ne=r.options.tabSize,ie=Be(Se(i,e.line).text,e.ch,ne),ve=Be(Se(i,q.line).text,q.ch,ne),ge=Math.min(ie,ve),ke=Math.max(ie,ve),Me=Math.min(e.line,q.line),ut=Math.min(r.lastLine(),Math.max(e.line,q.line));Me<=ut;Me++){var Ke=Se(i,Me).text,it=fr(Ke,ge,ne);ge==ke?$.push(new at(c(Me,it),c(Me,it))):Ke.length>it&&$.push(new at(c(Me,it),c(Me,fr(Ke,ke,ne))))}$.length||$.push(new at(e,e)),qt(i,Mt(r,s.ranges.slice(0,a).concat($),a),{origin:"*mouse",scroll:!1}),r.scrollIntoView(q)}else{var pt=o,Xe=Ps(r,q,t.unit),lt=pt.anchor,Ye;T(Xe.anchor,lt)>0?(Ye=Xe.head,lt=He(pt.from(),Xe.anchor)):(Ye=Xe.anchor,lt=Te(pt.to(),Xe.head));var _e=s.ranges.slice(0);_e[a]=Es(r,new at(xe(i,lt),Ye)),qt(i,Mt(r,_e,a),ze)}}var v=n.wrapper.getBoundingClientRect(),C=0;function k(q){var $=++C,ne=Nn(r,q,!0,t.unit=="rectangle");if(!!ne)if(T(ne,h)!=0){r.curOp.focus=Fe(),d(ne);var ie=ei(n,i);(ne.line>=ie.to||ne.line<ie.from)&&setTimeout(zt(r,function(){C==$&&k(q)}),150)}else{var ve=q.clientY<v.top?-20:q.clientY>v.bottom?20:0;ve&&setTimeout(zt(r,function(){C==$&&(n.scroller.scrollTop+=ve,k(q))}),50)}}function H(q){r.state.selectingText=!1,C=1/0,q&&(rt(q),n.input.focus()),se(n.wrapper.ownerDocument,"mousemove",B),se(n.wrapper.ownerDocument,"mouseup",K),i.history.lastSelOrigin=null}var B=zt(r,function(q){q.buttons===0||!Kr(q)?H(q):k(q)}),K=zt(r,H);r.state.selectingText=K,ye(n.wrapper.ownerDocument,"mousemove",B),ye(n.wrapper.ownerDocument,"mouseup",K)}function Es(r,l){var e=l.anchor,t=l.head,n=Se(r.doc,e.line);if(T(e,t)==0&&e.sticky==t.sticky)return l;var i=Ne(n);if(!i)return l;var o=We(i,e.ch,e.sticky),a=i[o];if(a.from!=e.ch&&a.to!=e.ch)return l;var s=o+(a.from==e.ch==(a.level!=1)?0:1);if(s==0||s==i.length)return l;var u;if(t.line!=e.line)u=(t.line-e.line)*(r.doc.direction=="ltr"?1:-1)>0;else{var f=We(i,t.ch,t.sticky),h=f-o||(t.ch-e.ch)*(a.level==1?-1:1);f==s-1||f==s?u=h<0:u=h>0}var d=i[s+(u?-1:0)],v=u==(d.level==1),C=v?d.from:d.to,k=v?"after":"before";return e.ch==C&&e.sticky==k?l:new at(new c(e.line,C,k),t)}function Fs(r,l,e,t){var n,i;if(l.touches)n=l.touches[0].clientX,i=l.touches[0].clientY;else try{n=l.clientX,i=l.clientY}catch{return!1}if(n>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;t&&rt(l);var o=r.display,a=o.lineDiv.getBoundingClientRect();if(i>a.bottom||!qe(r,e))return xt(l);i-=a.top-o.viewOffset;for(var s=0;s<r.display.gutterSpecs.length;++s){var u=o.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=n){var f=Ut(r.doc,i),h=r.display.gutterSpecs[s];return vt(r,e,r,f,h.className,l),xt(l)}}}function xa(r,l){return Fs(r,l,"gutterClick",!0)}function Sa(r,l){on(r.display,l)||Ca(r,l)||Ge(r,l,"contextmenu")||he||r.display.input.onContextMenu(l)}function Ca(r,l){return qe(r,"gutterContextMenu")?Fs(r,l,"gutterContextMenu",!1):!1}function ka(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Di(r)}var qi={toString:function(){return"CodeMirror.Init"}},La={},wn={};function Ws(r){var l=r.optionHandlers;function e(t,n,i,o){r.defaults[t]=n,i&&(l[t]=o?function(a,s,u){u!=qi&&i(a,s,u)}:i)}r.defineOption=e,r.Init=qi,e("value","",function(t,n){return t.setValue(n)},!0),e("mode",null,function(t,n){t.doc.modeOption=n,fo(t)},!0),e("indentUnit",2,fo,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){bl(t),Di(t),Et(t)},!0),e("lineSeparator",null,function(t,n){if(t.doc.lineSep=n,!!n){var i=[],o=t.doc.first;t.doc.iter(function(s){for(var u=0;;){var f=s.text.indexOf(n,u);if(f==-1)break;u=f+n.length,i.push(c(o,f))}o++});for(var a=i.length-1;a>=0;a--)Jr(t.doc,n,i[a],c(i[a].line,i[a].ch+n.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),i!=qi&&t.refresh()}),e("specialCharPlaceholder",Ua,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",te?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,n){return t.getInputField().spellcheck=n},!0),e("autocorrect",!1,function(t,n){return t.getInputField().autocorrect=n},!0),e("autocapitalize",!1,function(t,n){return t.getInputField().autocapitalize=n},!0),e("rtlMoveVisually",!ae),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){ka(t),oi(t)},!0),e("keyMap","default",function(t,n,i){var o=Ol(n),a=i!=qi&&Ol(i);a&&a.detach&&a.detach(t,o),o.attach&&o.attach(t,a||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,yu,!0),e("gutters",[],function(t,n){t.display.gutterSpecs=uo(n,t.options.lineNumbers),oi(t)},!0),e("fixedGutter",!0,function(t,n){t.display.gutters.style.left=n?On(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return Mr(t)},!0),e("scrollbarStyle","native",function(t){Jo(t),Mr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t,n){t.display.gutterSpecs=uo(t.options.gutters,n),oi(t)},!0),e("firstLineNumber",1,oi,!0),e("lineNumberFormatter",function(t){return t},oi,!0),e("showCursorWhenSelecting",!1,dl,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,n){n=="nocursor"&&(Pn(t),t.display.input.blur()),t.display.input.readOnlyChanged(n)}),e("screenReaderLabel",null,function(t,n){n=n===""?null:n,t.display.input.screenReaderLabelChanged(n)}),e("disableInput",!1,function(t,n){n||t.display.input.reset()},!0),e("dragDrop",!0,So),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,dl,!0),e("singleCursorHeightPerLine",!0,dl,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,bl,!0),e("addModeClass",!1,bl,!0),e("pollInterval",100),e("undoDepth",200,function(t,n){return t.doc.history.undoDepth=n}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,bl,!0),e("moveInputWithCursor",!0,function(t,n){n||t.display.input.resetPosition()}),e("tabindex",null,function(t,n){return t.display.input.getField().tabIndex=n||""}),e("autofocus",null),e("direction","ltr",function(t,n){return t.doc.setDirection(n)},!0),e("phrases",null)}function So(r,l,e){var t=e&&e!=qi;if(!l!=!t){var n=r.display.dragFunctions,i=l?ye:se;i(r.display.scroller,"dragstart",n.start),i(r.display.scroller,"dragenter",n.enter),i(r.display.scroller,"dragover",n.over),i(r.display.scroller,"dragleave",n.leave),i(r.display.scroller,"drop",n.drop)}}function yu(r){r.options.lineWrapping?(je(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(ue(r.display.wrapper,"CodeMirror-wrap"),Hr(r)),hl(r),Et(r),Di(r),setTimeout(function(){return Mr(r)},100)}function St(r,l){var e=this;if(!(this instanceof St))return new St(r,l);this.options=l=l?Yt(l):{},Yt(La,l,!1);var t=l.value;typeof t=="string"?t=new $t(t,l.mode,null,l.lineSeparator,l.direction):l.mode&&(t.modeOption=l.mode),this.doc=t;var n=new St.inputStyles[l.inputStyle](this),i=this.display=new ss(r,t,n,l);i.wrapper.CodeMirror=this,ka(this),l.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Jo(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ce,keySeq:null,specialChars:null},l.autofocus&&!te&&i.input.focus(),m&&S<11&&setTimeout(function(){return e.display.input.reset(!0)},20),mu(this),xs(),_n(this),this.curOp.forceUpdate=!0,co(this,t),l.autofocus&&!te||this.hasFocus()?setTimeout(function(){e.hasFocus()&&!e.state.focused&&io(e)},20):Pn(this);for(var o in wn)wn.hasOwnProperty(o)&&wn[o](this,l[o],qi);so(this),l.finishInit&&l.finishInit(this);for(var a=0;a<bt.length;++a)bt[a](this);ni(this),x&&l.lineWrapping&&getComputedStyle(i.lineDiv).textRendering=="optimizelegibility"&&(i.lineDiv.style.textRendering="auto")}St.defaults=La,St.optionHandlers=wn;function mu(r){var l=r.display;ye(l.scroller,"mousedown",zt(r,Yi)),m&&S<11?ye(l.scroller,"dblclick",zt(r,function(s){if(!Ge(r,s)){var u=Nn(r,s);if(!(!u||xa(r,s)||on(r.display,s))){rt(s);var f=r.findWordAt(u);pn(r.doc,f.anchor,f.head)}}})):ye(l.scroller,"dblclick",function(s){return Ge(r,s)||rt(s)}),ye(l.scroller,"contextmenu",function(s){return Sa(r,s)}),ye(l.input.getField(),"contextmenu",function(s){l.scroller.contains(s.target)||Sa(r,s)});var e,t={end:0};function n(){l.activeTouch&&(e=setTimeout(function(){return l.activeTouch=null},1e3),t=l.activeTouch,t.end=+new Date)}function i(s){if(s.touches.length!=1)return!1;var u=s.touches[0];return u.radiusX<=1&&u.radiusY<=1}function o(s,u){if(u.left==null)return!0;var f=u.left-s.left,h=u.top-s.top;return f*f+h*h>20*20}ye(l.scroller,"touchstart",function(s){if(!Ge(r,s)&&!i(s)&&!xa(r,s)){l.input.ensurePolled(),clearTimeout(e);var u=+new Date;l.activeTouch={start:u,moved:!1,prev:u-t.end<=300?t:null},s.touches.length==1&&(l.activeTouch.left=s.touches[0].pageX,l.activeTouch.top=s.touches[0].pageY)}}),ye(l.scroller,"touchmove",function(){l.activeTouch&&(l.activeTouch.moved=!0)}),ye(l.scroller,"touchend",function(s){var u=l.activeTouch;if(u&&!on(l,s)&&u.left!=null&&!u.moved&&new Date-u.start<300){var f=r.coordsChar(l.activeTouch,"page"),h;!u.prev||o(u,u.prev)?h=new at(f,f):!u.prev.prev||o(u,u.prev.prev)?h=r.findWordAt(f):h=new at(c(f.line,0),xe(r.doc,c(f.line+1,0))),r.setSelection(h.anchor,h.head),r.focus(),rt(s)}n()}),ye(l.scroller,"touchcancel",n),ye(l.scroller,"scroll",function(){l.scroller.clientHeight&&(Wn(r,l.scroller.scrollTop),Br(r,l.scroller.scrollLeft,!0),vt(r,"scroll",r))}),ye(l.scroller,"mousewheel",function(s){return ea(r,s)}),ye(l.scroller,"DOMMouseScroll",function(s){return ea(r,s)}),ye(l.wrapper,"scroll",function(){return l.wrapper.scrollTop=l.wrapper.scrollLeft=0}),l.dragFunctions={enter:function(s){Ge(r,s)||nr(s)},over:function(s){Ge(r,s)||(hu(r,s),nr(s))},start:function(s){return ms(r,s)},drop:zt(r,er),leave:function(s){Ge(r,s)||bs(r)}};var a=l.input.getField();ye(a,"keyup",function(s){return wa.call(r,s)}),ye(a,"keydown",zt(r,Ds)),ye(a,"keypress",zt(r,Os)),ye(a,"focus",function(s){return io(r,s)}),ye(a,"blur",function(s){return Pn(r,s)})}var bt=[];St.defineInitHook=function(r){return bt.push(r)};function Wl(r,l,e,t){var n=r.doc,i;e==null&&(e="add"),e=="smart"&&(n.mode.indent?i=wi(r,l).state:e="prev");var o=r.options.tabSize,a=Se(n,l),s=Be(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var u=a.text.match(/^\s*/)[0],f;if(!t&&!/\S/.test(a.text))f=0,e="not";else if(e=="smart"&&(f=n.mode.indent(i,a.text.slice(u.length),a.text),f==Pe||f>150)){if(!t)return;e="prev"}e=="prev"?l>n.first?f=Be(Se(n,l-1).text,null,o):f=0:e=="add"?f=s+r.options.indentUnit:e=="subtract"?f=s-r.options.indentUnit:typeof e=="number"&&(f=s+e),f=Math.max(0,f);var h="",d=0;if(r.options.indentWithTabs)for(var v=Math.floor(f/o);v;--v)d+=o,h+="	";if(d<f&&(h+=rr(f-d)),h!=u)return Jr(n,h,c(l,0),c(l,u.length),"+input"),a.stateAfter=null,!0;for(var C=0;C<n.sel.ranges.length;C++){var k=n.sel.ranges[C];if(k.head.line==l&&k.head.ch<u.length){var H=c(l,u.length);Hi(n,C,new at(H,H));break}}}var yr=null;function Gn(r){yr=r}function mr(r,l,e,t,n){var i=r.doc;r.display.shift=!1,t||(t=i.sel);var o=+new Date-200,a=n=="paste"||r.state.pasteIncoming>o,s=Cn(l),u=null;if(a&&t.ranges.length>1)if(yr&&yr.text.join(`
`)==l){if(t.ranges.length%yr.text.length==0){u=[];for(var f=0;f<yr.text.length;f++)u.push(i.splitLines(yr.text[f]))}}else s.length==t.ranges.length&&r.options.pasteLinesPerSelection&&(u=jt(s,function(B){return[B]}));for(var h=r.curOp.updateInput,d=t.ranges.length-1;d>=0;d--){var v=t.ranges[d],C=v.from(),k=v.to();v.empty()&&(e&&e>0?C=c(C.line,C.ch-e):r.state.overwrite&&!a?k=c(k.line,Math.min(Se(i,k.line).text.length,k.ch+Ee(s).length)):a&&yr&&yr.lineWise&&yr.text.join(`
`)==s.join(`
`)&&(C=k=c(C.line,0)));var H={from:C,to:k,text:u?u[d%u.length]:s,origin:n||(a?"paste":r.state.cutIncoming>o?"cut":"+input")};fi(r.doc,H),Ht(r,"inputRead",r,H)}l&&!a&&Co(r,l),En(r),r.curOp.updateInput<2&&(r.curOp.updateInput=h),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function _l(r,l){var e=r.clipboardData&&r.clipboardData.getData("Text");if(e)return r.preventDefault(),!l.isReadOnly()&&!l.options.disableInput&&l.hasFocus()&&ar(l,function(){return mr(l,e,0,null,"paste")}),!0}function Co(r,l){if(!(!r.options.electricChars||!r.options.smartIndent))for(var e=r.doc.sel,t=e.ranges.length-1;t>=0;t--){var n=e.ranges[t];if(!(n.head.ch>100||t&&e.ranges[t-1].head.line==n.head.line)){var i=r.getModeAt(n.head),o=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(l.indexOf(i.electricChars.charAt(a))>-1){o=Wl(r,n.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(Se(r.doc,n.head.line).text.slice(0,n.head.ch))&&(o=Wl(r,n.head.line,"smart"));o&&Ht(r,"electricInput",r,n.head.line)}}}function Ta(r){for(var l=[],e=[],t=0;t<r.doc.sel.ranges.length;t++){var n=r.doc.sel.ranges[t].head.line,i={anchor:c(n,0),head:c(n+1,0)};e.push(i),l.push(r.getRange(i.anchor,i.head))}return{text:l,ranges:e}}function Ma(r,l,e,t){r.setAttribute("autocorrect",e?"":"off"),r.setAttribute("autocapitalize",t?"":"off"),r.setAttribute("spellcheck",!!l)}function Da(){var r=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),l=L("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?r.style.width="1000px":r.setAttribute("wrap","off"),z&&(r.style.border="1px solid black"),Ma(r),l}function _s(r){var l=r.optionHandlers,e=r.helpers={};r.prototype={constructor:r,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,o=i[t];i[t]==n&&t!="mode"||(i[t]=n,l.hasOwnProperty(t)&&zt(this,l[t])(this,n,o),vt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,n){this.state.keyMaps[n?"push":"unshift"](Ol(t))},removeKeyMap:function(t){for(var n=this.state.keyMaps,i=0;i<n.length;++i)if(n[i]==t||n[i].name==t)return n.splice(i,1),!0},addOverlay:dt(function(t,n){var i=t.token?t:r.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");Ue(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(o){return o.priority}),this.state.modeGen++,Et(this)}),removeOverlay:dt(function(t){for(var n=this.state.overlays,i=0;i<n.length;++i){var o=n[i].modeSpec;if(o==t||typeof t=="string"&&o.name==t){n.splice(i,1),this.state.modeGen++,Et(this);return}}}),indentLine:dt(function(t,n,i){typeof n!="string"&&typeof n!="number"&&(n==null?n=this.options.smartIndent?"smart":"prev":n=n?"add":"subtract"),Qe(this.doc,t)&&Wl(this,t,n,i)}),indentSelection:dt(function(t){for(var n=this.doc.sel.ranges,i=-1,o=0;o<n.length;o++){var a=n[o];if(a.empty())a.head.line>i&&(Wl(this,a.head.line,t,!0),i=a.head.line,o==this.doc.sel.primIndex&&En(this));else{var s=a.from(),u=a.to(),f=Math.max(i,s.line);i=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var h=f;h<i;++h)Wl(this,h,t);var d=this.doc.sel.ranges;s.ch==0&&n.length==d.length&&d[o].from().ch>0&&Hi(this.doc,o,new at(s,d[o].to()),Qt)}}}),getTokenAt:function(t,n){return Ul(this,t,n)},getLineTokens:function(t,n){return Ul(this,c(t),n,!0)},getTokenTypeAt:function(t){t=xe(this.doc,t);var n=Fr(this,Se(this.doc,t.line)),i=0,o=(n.length-1)/2,a=t.ch,s;if(a==0)s=n[2];else for(;;){var u=i+o>>1;if((u?n[u*2-1]:0)>=a)o=u;else if(n[u*2+1]<a)i=u+1;else{s=n[u*2+2];break}}var f=s?s.indexOf("overlay "):-1;return f<0?s:f==0?null:s.slice(0,f-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?r.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(t,n){return this.getHelpers(t,n)[0]},getHelpers:function(t,n){var i=[];if(!e.hasOwnProperty(n))return i;var o=e[n],a=this.getModeAt(t);if(typeof a[n]=="string")o[a[n]]&&i.push(o[a[n]]);else if(a[n])for(var s=0;s<a[n].length;s++){var u=o[a[n][s]];u&&i.push(u)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var f=0;f<o._global.length;f++){var h=o._global[f];h.pred(a,this)&&me(i,h.val)==-1&&i.push(h.val)}return i},getStateAfter:function(t,n){var i=this.doc;return t=nt(i,t==null?i.first+i.size-1:t),wi(this,t+1,n).state},cursorCoords:function(t,n){var i,o=this.doc.sel.primary();return t==null?i=o.head:typeof t=="object"?i=xe(this.doc,t):i=t?o.from():o.to(),Lr(this,i,n||"page")},charCoords:function(t,n){return Jn(this,xe(this.doc,t),n||"page")},coordsChar:function(t,n){return t=Vl(this,t,n||"page"),$l(this,t.left,t.top)},lineAtHeight:function(t,n){return t=Vl(this,{top:t,left:0},n||"page").top,Ut(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,n,i){var o=!1,a;if(typeof t=="number"){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,o=!0),a=Se(this.doc,t)}else a=t;return ul(this,a,{top:0,left:0},n||"page",i||o).top+(o?this.doc.height-Jt(a):0)},defaultTextHeight:function(){return Ni(this.display)},defaultCharWidth:function(){return Tr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,n,i,o,a){var s=this.display;t=Lr(this,xe(this.doc,t));var u=t.bottom,f=t.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),s.sizer.appendChild(n),o=="over")u=t.top;else if(o=="above"||o=="near"){var h=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(o=="above"||t.bottom+n.offsetHeight>h)&&t.top>n.offsetHeight?u=t.top-n.offsetHeight:t.bottom+n.offsetHeight<=h&&(u=t.bottom),f+n.offsetWidth>d&&(f=d-n.offsetWidth)}n.style.top=u+"px",n.style.left=n.style.right="",a=="right"?(f=s.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):(a=="left"?f=0:a=="middle"&&(f=(s.sizer.clientWidth-n.offsetWidth)/2),n.style.left=f+"px"),i&&tu(this,{left:f,top:u,right:f+n.offsetWidth,bottom:u+n.offsetHeight})},triggerOnKeyDown:dt(Ds),triggerOnKeyPress:dt(Os),triggerOnKeyUp:wa,triggerOnMouseDown:dt(Yi),execCommand:function(t){if(vi.hasOwnProperty(t))return vi[t].call(null,this)},triggerElectric:dt(function(t){Co(this,t)}),findPosH:function(t,n,i,o){var a=1;n<0&&(a=-1,n=-n);for(var s=xe(this.doc,t),u=0;u<n&&(s=ko(this.doc,s,a,i,o),!s.hitSide);++u);return s},moveH:dt(function(t,n){var i=this;this.extendSelectionsBy(function(o){return i.display.shift||i.doc.extend||o.empty()?ko(i.doc,o.head,t,n,i.options.rtlMoveVisually):t<0?o.from():o.to()},ot)}),deleteH:dt(function(t,n){var i=this.doc.sel,o=this.doc;i.somethingSelected()?o.replaceSelection("",null,"+delete"):pi(this,function(a){var s=ko(o,a.head,t,n,!1);return t<0?{from:s,to:a.head}:{from:a.head,to:s}})}),findPosV:function(t,n,i,o){var a=1,s=o;n<0&&(a=-1,n=-n);for(var u=xe(this.doc,t),f=0;f<n;++f){var h=Lr(this,u,"div");if(s==null?s=h.left:h.left=s,u=Hs(this,h,a,i),u.hitSide)break}return u},moveV:dt(function(t,n){var i=this,o=this.doc,a=[],s=!this.display.shift&&!o.extend&&o.sel.somethingSelected();if(o.extendSelectionsBy(function(f){if(s)return t<0?f.from():f.to();var h=Lr(i,f.head,"div");f.goalColumn!=null&&(h.left=f.goalColumn),a.push(h.left);var d=Hs(i,h,t,n);return n=="page"&&f==o.sel.primary()&&Zo(i,Jn(i,d,"div").top-h.top),d},ot),a.length)for(var u=0;u<o.sel.ranges.length;u++)o.sel.ranges[u].goalColumn=a[u]}),findWordAt:function(t){var n=this.doc,i=Se(n,t.line).text,o=t.ch,a=t.ch;if(i){var s=this.getHelper(t,"wordChars");(t.sticky=="before"||a==i.length)&&o?--o:++a;for(var u=i.charAt(o),f=Y(u,s)?function(h){return Y(h,s)}:/\s/.test(u)?function(h){return/\s/.test(h)}:function(h){return!/\s/.test(h)&&!Y(h)};o>0&&f(i.charAt(o-1));)--o;for(;a<i.length&&f(i.charAt(a));)++a}return new at(c(t.line,o),c(t.line,a))},toggleOverwrite:function(t){t!=null&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?je(this.display.cursorDiv,"CodeMirror-overwrite"):ue(this.display.cursorDiv,"CodeMirror-overwrite"),vt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Fe()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dt(function(t,n){ti(this,t,n)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Sr(this)-this.display.barHeight,width:t.scrollWidth-Sr(this)-this.display.barWidth,clientHeight:Cr(this),clientWidth:Mn(this)}},scrollIntoView:dt(function(t,n){t==null?(t={from:this.doc.sel.primary().head,to:null},n==null&&(n=this.options.cursorScrollMargin)):typeof t=="number"?t={from:c(t,0),to:null}:t.from==null&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=n||0,t.from.line!=null?Ei(this,t):is(this,t.from,t.to,t.margin)}),setSize:dt(function(t,n){var i=this,o=function(s){return typeof s=="number"||/^\d+$/.test(String(s))?s+"px":s};t!=null&&(this.display.wrapper.style.width=o(t)),n!=null&&(this.display.wrapper.style.height=o(n)),this.options.lineWrapping&&es(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(s){if(s.widgets){for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){or(i,a,"widget");break}}++a}),this.curOp.forceUpdate=!0,vt(this,"refresh",this)}),operation:function(t){return ar(this,t)},startOperation:function(){return _n(this)},endOperation:function(){return ni(this)},refresh:dt(function(){var t=this.display.cachedTextHeight;Et(this),this.curOp.forceUpdate=!0,Di(this),ti(this,this.doc.scrollLeft,this.doc.scrollTop),yl(this.display),(t==null||Math.abs(t-Ni(this.display))>.5||this.options.lineWrapping)&&hl(this),vt(this,"refresh",this)}),swapDoc:dt(function(t){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),co(this,t),Di(this),this.display.input.reset(),ti(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,Ht(this,"swapDoc",this,n),n}),phrase:function(t){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},br(r),r.registerHelper=function(t,n,i){e.hasOwnProperty(t)||(e[t]=r[t]={_global:[]}),e[t][n]=i},r.registerGlobalHelper=function(t,n,i,o){r.registerHelper(t,n,o),e[t]._global.push({pred:i,val:o})}}function ko(r,l,e,t,n){var i=l,o=e,a=Se(r,l.line),s=n&&r.direction=="rtl"?-e:e;function u(){var K=l.line+s;return K<r.first||K>=r.first+r.size?!1:(l=new c(K,l.ch,l.sticky),a=Se(r,K))}function f(K){var q;if(t=="codepoint"){var $=a.text.charCodeAt(l.ch+(e>0?0:-1));if(isNaN($))q=null;else{var ne=e>0?$>=55296&&$<56320:$>=56320&&$<57343;q=new c(l.line,Math.max(0,Math.min(a.text.length,l.ch+e*(ne?2:1))),-e)}}else n?q=ya(r.cm,a,l,e):q=Un(a,l,e);if(q==null)if(!K&&u())l=Nl(n,r.cm,a,l.line,s);else return!1;else l=q;return!0}if(t=="char"||t=="codepoint")f();else if(t=="column")f(!0);else if(t=="word"||t=="group")for(var h=null,d=t=="group",v=r.cm&&r.cm.getHelper(l,"wordChars"),C=!0;!(e<0&&!f(!C));C=!1){var k=a.text.charAt(l.ch)||`
`,H=Y(k,v)?"w":d&&k==`
`?"n":!d||/\s/.test(k)?null:"p";if(d&&!C&&!H&&(H="s"),h&&h!=H){e<0&&(e=1,f(),l.sticky="after");break}if(H&&(h=H),e>0&&!f(!C))break}var B=kl(r,l,i,o,!0);return I(i,B)&&(B.hitSide=!0),B}function Hs(r,l,e,t){var n=r.doc,i=l.left,o;if(t=="page"){var a=Math.min(r.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),s=Math.max(a-.5*Ni(r.display),3);o=(e>0?l.bottom:l.top)+e*s}else t=="line"&&(o=e>0?l.bottom+3:l.top-3);for(var u;u=$l(r,i,o),!!u.outside;){if(e<0?o<=0:o>=n.height){u.hitSide=!0;break}o+=e*5}return u}var st=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ce,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};st.prototype.init=function(r){var l=this,e=this,t=e.cm,n=e.div=r.lineDiv;n.contentEditable=!0,Ma(n,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize);function i(a){for(var s=a.target;s;s=s.parentNode){if(s==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(s.className))break}return!1}ye(n,"paste",function(a){!i(a)||Ge(t,a)||_l(a,t)||S<=11&&setTimeout(zt(t,function(){return l.updateFromDOM()}),20)}),ye(n,"compositionstart",function(a){l.composing={data:a.data,done:!1}}),ye(n,"compositionupdate",function(a){l.composing||(l.composing={data:a.data,done:!1})}),ye(n,"compositionend",function(a){l.composing&&(a.data!=l.composing.data&&l.readFromDOMSoon(),l.composing.done=!0)}),ye(n,"touchstart",function(){return e.forceCompositionEnd()}),ye(n,"input",function(){l.composing||l.readFromDOMSoon()});function o(a){if(!(!i(a)||Ge(t,a))){if(t.somethingSelected())Gn({lineWise:!1,text:t.getSelections()}),a.type=="cut"&&t.replaceSelection("",null,"cut");else if(t.options.lineWiseCopyCut){var s=Ta(t);Gn({lineWise:!0,text:s.text}),a.type=="cut"&&t.operation(function(){t.setSelections(s.ranges,0,Qt),t.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var u=yr.text.join(`
`);if(a.clipboardData.setData("Text",u),a.clipboardData.getData("Text")==u){a.preventDefault();return}}var f=Da(),h=f.firstChild;t.display.lineSpace.insertBefore(f,t.display.lineSpace.firstChild),h.value=yr.text.join(`
`);var d=Fe();ur(h),setTimeout(function(){t.display.lineSpace.removeChild(f),d.focus(),d==n&&e.showPrimarySelection()},50)}}ye(n,"copy",o),ye(n,"cut",o)},st.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},st.prototype.prepareSelection=function(){var r=Xo(this.cm,!1);return r.focus=Fe()==this.div,r},st.prototype.showSelection=function(r,l){!r||!this.cm.display.view.length||((r.focus||l)&&this.showPrimarySelection(),this.showMultipleSelections(r))},st.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},st.prototype.showPrimarySelection=function(){var r=this.getSelection(),l=this.cm,e=l.doc.sel.primary(),t=e.from(),n=e.to();if(l.display.viewTo==l.display.viewFrom||t.line>=l.display.viewTo||n.line<l.display.viewFrom){r.removeAllRanges();return}var i=xn(l,r.anchorNode,r.anchorOffset),o=xn(l,r.focusNode,r.focusOffset);if(!(i&&!i.bad&&o&&!o.bad&&T(He(i,o),t)==0&&T(Te(i,o),n)==0)){var a=l.display.view,s=t.line>=l.display.viewFrom&&Oa(l,t)||{node:a[0].measure.map[2],offset:0},u=n.line<l.display.viewTo&&Oa(l,n);if(!u){var f=a[a.length-1].measure,h=f.maps?f.maps[f.maps.length-1]:f.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!s||!u){r.removeAllRanges();return}var d=r.rangeCount&&r.getRangeAt(0),v;try{v=Re(s.node,s.offset,u.offset,u.node)}catch{}v&&(!A&&l.state.focused?(r.collapse(s.node,s.offset),v.collapsed||(r.removeAllRanges(),r.addRange(v))):(r.removeAllRanges(),r.addRange(v)),d&&r.anchorNode==null?r.addRange(d):A&&this.startGracePeriod()),this.rememberSelection()}},st.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},st.prototype.showMultipleSelections=function(r){fe(this.cm.display.cursorDiv,r.cursors),fe(this.cm.display.selectionDiv,r.selection)},st.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},st.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var l=r.getRangeAt(0).commonAncestorContainer;return Je(this.div,l)},st.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Fe()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},st.prototype.blur=function(){this.div.blur()},st.prototype.getField=function(){return this.div},st.prototype.supportsTouch=function(){return!0},st.prototype.receivedFocus=function(){var r=this,l=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):ar(this.cm,function(){return l.cm.curOp.selectionChanged=!0});function e(){l.cm.state.focused&&(l.pollSelection(),l.polling.set(l.cm.options.pollInterval,e))}this.polling.set(this.cm.options.pollInterval,e)},st.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},st.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var r=this.getSelection(),l=this.cm;if(X&&D&&this.cm.display.gutterSpecs.length&&ht(r.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var e=xn(l,r.anchorNode,r.anchorOffset),t=xn(l,r.focusNode,r.focusOffset);e&&t&&ar(l,function(){qt(l.doc,Ie(e,t),Qt),(e.bad||t.bad)&&(l.curOp.selectionChanged=!0)})}}},st.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var r=this.cm,l=r.display,e=r.doc.sel.primary(),t=e.from(),n=e.to();if(t.ch==0&&t.line>r.firstLine()&&(t=c(t.line-1,Se(r.doc,t.line-1).length)),n.ch==Se(r.doc,n.line).text.length&&n.line<r.lastLine()&&(n=c(n.line+1,0)),t.line<l.viewFrom||n.line>l.viewTo-1)return!1;var i,o,a;t.line==l.viewFrom||(i=an(r,t.line))==0?(o=Ve(l.view[0].line),a=l.view[0].node):(o=Ve(l.view[i].line),a=l.view[i-1].node.nextSibling);var s=an(r,n.line),u,f;if(s==l.view.length-1?(u=l.viewTo-1,f=l.lineDiv.lastChild):(u=Ve(l.view[s+1].line)-1,f=l.view[s+1].node.previousSibling),!a)return!1;for(var h=r.doc.splitLines(bu(r,a,f,o,u)),d=ct(r.doc,c(o,0),c(u,Se(r.doc,u).text.length));h.length>1&&d.length>1;)if(Ee(h)==Ee(d))h.pop(),d.pop(),u--;else if(h[0]==d[0])h.shift(),d.shift(),o++;else break;for(var v=0,C=0,k=h[0],H=d[0],B=Math.min(k.length,H.length);v<B&&k.charCodeAt(v)==H.charCodeAt(v);)++v;for(var K=Ee(h),q=Ee(d),$=Math.min(K.length-(h.length==1?v:0),q.length-(d.length==1?v:0));C<$&&K.charCodeAt(K.length-C-1)==q.charCodeAt(q.length-C-1);)++C;if(h.length==1&&d.length==1&&o==t.line)for(;v&&v>t.ch&&K.charCodeAt(K.length-C-1)==q.charCodeAt(q.length-C-1);)v--,C++;h[h.length-1]=K.slice(0,K.length-C).replace(/^\u200b+/,""),h[0]=h[0].slice(v).replace(/\u200b+$/,"");var ne=c(o,v),ie=c(u,d.length?Ee(d).length-C:0);if(h.length>1||h[0]||T(ne,ie))return Jr(r.doc,h,ne,ie,"+input"),!0},st.prototype.ensurePolled=function(){this.forceCompositionEnd()},st.prototype.reset=function(){this.forceCompositionEnd()},st.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},st.prototype.readFromDOMSoon=function(){var r=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing)if(r.composing.done)r.composing=null;else return;r.updateFromDOM()},80))},st.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&ar(this.cm,function(){return Et(r.cm)})},st.prototype.setUneditable=function(r){r.contentEditable="false"},st.prototype.onKeyPress=function(r){r.charCode==0||this.composing||(r.preventDefault(),this.cm.isReadOnly()||zt(this.cm,mr)(this.cm,String.fromCharCode(r.charCode==null?r.keyCode:r.charCode),0))},st.prototype.readOnlyChanged=function(r){this.div.contentEditable=String(r!="nocursor")},st.prototype.onContextMenu=function(){},st.prototype.resetPosition=function(){},st.prototype.needsContentAttribute=!0;function Oa(r,l){var e=Uo(r,l.line);if(!e||e.hidden)return null;var t=Se(r.doc,l.line),n=Jl(e,t,l.line),i=Ne(t,r.doc.direction),o="left";if(i){var a=We(i,l.ch);o=a%2?"right":"left"}var s=Ir(n.map,l.ch,o);return s.offset=s.collapse=="right"?s.end:s.start,s}function ht(r){for(var l=r;l;l=l.parentNode)if(/CodeMirror-gutter-wrapper/.test(l.className))return!0;return!1}function yi(r,l){return l&&(r.bad=!0),r}function bu(r,l,e,t,n){var i="",o=!1,a=r.doc.lineSeparator(),s=!1;function u(v){return function(C){return C.id==v}}function f(){o&&(i+=a,s&&(i+=a),o=s=!1)}function h(v){v&&(f(),i+=v)}function d(v){if(v.nodeType==1){var C=v.getAttribute("cm-text");if(C){h(C);return}var k=v.getAttribute("cm-marker"),H;if(k){var B=r.findMarks(c(t,0),c(n+1,0),u(+k));B.length&&(H=B[0].find(0))&&h(ct(r.doc,H.from,H.to).join(a));return}if(v.getAttribute("contenteditable")=="false")return;var K=/^(pre|div|p|li|table|br)$/i.test(v.nodeName);if(!/^br$/i.test(v.nodeName)&&v.textContent.length==0)return;K&&f();for(var q=0;q<v.childNodes.length;q++)d(v.childNodes[q]);/^(pre|p)$/i.test(v.nodeName)&&(s=!0),K&&(o=!0)}else v.nodeType==3&&h(v.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;d(l),l!=e;)l=l.nextSibling,s=!1;return i}function xn(r,l,e){var t;if(l==r.display.lineDiv){if(t=r.display.lineDiv.childNodes[e],!t)return yi(r.clipPos(c(r.display.viewTo-1)),!0);l=null,e=0}else for(t=l;;t=t.parentNode){if(!t||t==r.display.lineDiv)return null;if(t.parentNode&&t.parentNode==r.display.lineDiv)break}for(var n=0;n<r.display.view.length;n++){var i=r.display.view[n];if(i.node==t)return wu(i,l,e)}}function wu(r,l,e){var t=r.text.firstChild,n=!1;if(!l||!Je(t,l))return yi(c(Ve(r.line),0),!0);if(l==t&&(n=!0,l=t.childNodes[e],e=0,!l)){var i=r.rest?Ee(r.rest):r.line;return yi(c(Ve(i),i.text.length),n)}var o=l.nodeType==3?l:null,a=l;for(!o&&l.childNodes.length==1&&l.firstChild.nodeType==3&&(o=l.firstChild,e&&(e=o.nodeValue.length));a.parentNode!=t;)a=a.parentNode;var s=r.measure,u=s.maps;function f(H,B,K){for(var q=-1;q<(u?u.length:0);q++)for(var $=q<0?s.map:u[q],ne=0;ne<$.length;ne+=3){var ie=$[ne+2];if(ie==H||ie==B){var ve=Ve(q<0?r.line:r.rest[q]),ge=$[ne]+K;return(K<0||ie!=H)&&(ge=$[ne+(K?1:0)]),c(ve,ge)}}}var h=f(o,a,e);if(h)return yi(h,n);for(var d=a.nextSibling,v=o?o.nodeValue.length-e:0;d;d=d.nextSibling){if(h=f(d,d.firstChild,0),h)return yi(c(h.line,h.ch-v),n);v+=d.textContent.length}for(var C=a.previousSibling,k=e;C;C=C.previousSibling){if(h=f(C,C.firstChild,-1),h)return yi(c(h.line,h.ch+k),n);k+=C.textContent.length}}var Ct=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new Ce,this.hasSelection=!1,this.composing=null};Ct.prototype.init=function(r){var l=this,e=this,t=this.cm;this.createField(r);var n=this.textarea;r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),z&&(n.style.width="0px"),ye(n,"input",function(){m&&S>=9&&l.hasSelection&&(l.hasSelection=null),e.poll()}),ye(n,"paste",function(o){Ge(t,o)||_l(o,t)||(t.state.pasteIncoming=+new Date,e.fastPoll())});function i(o){if(!Ge(t,o)){if(t.somethingSelected())Gn({lineWise:!1,text:t.getSelections()});else if(t.options.lineWiseCopyCut){var a=Ta(t);Gn({lineWise:!0,text:a.text}),o.type=="cut"?t.setSelections(a.ranges,null,Qt):(e.prevInput="",n.value=a.text.join(`
`),ur(n))}else return;o.type=="cut"&&(t.state.cutIncoming=+new Date)}}ye(n,"cut",i),ye(n,"copy",i),ye(r.scroller,"paste",function(o){if(!(on(r,o)||Ge(t,o))){if(!n.dispatchEvent){t.state.pasteIncoming=+new Date,e.focus();return}var a=new Event("paste");a.clipboardData=o.clipboardData,n.dispatchEvent(a)}}),ye(r.lineSpace,"selectstart",function(o){on(r,o)||rt(o)}),ye(n,"compositionstart",function(){var o=t.getCursor("from");e.composing&&e.composing.range.clear(),e.composing={start:o,range:t.markText(o,t.getCursor("to"),{className:"CodeMirror-composing"})}}),ye(n,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})},Ct.prototype.createField=function(r){this.wrapper=Da(),this.textarea=this.wrapper.firstChild},Ct.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},Ct.prototype.prepareSelection=function(){var r=this.cm,l=r.display,e=r.doc,t=Xo(r);if(r.options.moveInputWithCursor){var n=Lr(r,e.sel.primary().head,"div"),i=l.wrapper.getBoundingClientRect(),o=l.lineDiv.getBoundingClientRect();t.teTop=Math.max(0,Math.min(l.wrapper.clientHeight-10,n.top+o.top-i.top)),t.teLeft=Math.max(0,Math.min(l.wrapper.clientWidth-10,n.left+o.left-i.left))}return t},Ct.prototype.showSelection=function(r){var l=this.cm,e=l.display;fe(e.cursorDiv,r.cursors),fe(e.selectionDiv,r.selection),r.teTop!=null&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},Ct.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing)){var l=this.cm;if(l.somethingSelected()){this.prevInput="";var e=l.getSelection();this.textarea.value=e,l.state.focused&&ur(this.textarea),m&&S>=9&&(this.hasSelection=e)}else r||(this.prevInput=this.textarea.value="",m&&S>=9&&(this.hasSelection=null))}},Ct.prototype.getField=function(){return this.textarea},Ct.prototype.supportsTouch=function(){return!1},Ct.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!te||Fe()!=this.textarea))try{this.textarea.focus()}catch{}},Ct.prototype.blur=function(){this.textarea.blur()},Ct.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ct.prototype.receivedFocus=function(){this.slowPoll()},Ct.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},Ct.prototype.fastPoll=function(){var r=!1,l=this;l.pollingFast=!0;function e(){var t=l.poll();!t&&!r?(r=!0,l.polling.set(60,e)):(l.pollingFast=!1,l.slowPoll())}l.polling.set(20,e)},Ct.prototype.poll=function(){var r=this,l=this.cm,e=this.textarea,t=this.prevInput;if(this.contextMenuPending||!l.state.focused||Il(e)&&!t&&!this.composing||l.isReadOnly()||l.options.disableInput||l.state.keySeq)return!1;var n=e.value;if(n==t&&!l.somethingSelected())return!1;if(m&&S>=9&&this.hasSelection===n||V&&/[\uf700-\uf7ff]/.test(n))return l.display.input.reset(),!1;if(l.doc.sel==l.display.selForContextMenu){var i=n.charCodeAt(0);if(i==8203&&!t&&(t="\u200B"),i==8666)return this.reset(),this.cm.execCommand("undo")}for(var o=0,a=Math.min(t.length,n.length);o<a&&t.charCodeAt(o)==n.charCodeAt(o);)++o;return ar(l,function(){mr(l,n.slice(o),t.length-o,null,r.composing?"*compose":null),n.length>1e3||n.indexOf(`
`)>-1?e.value=r.prevInput="":r.prevInput=n,r.composing&&(r.composing.range.clear(),r.composing.range=l.markText(r.composing.start,l.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ct.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ct.prototype.onKeyPress=function(){m&&S>=9&&(this.hasSelection=null),this.fastPoll()},Ct.prototype.onContextMenu=function(r){var l=this,e=l.cm,t=e.display,n=l.textarea;l.contextMenuPending&&l.contextMenuPending();var i=Nn(e,r),o=t.scroller.scrollTop;if(!i||F)return;var a=e.options.resetSelectionOnContextMenu;a&&e.doc.sel.contains(i)==-1&&zt(e,qt)(e.doc,Ie(i),Qt);var s=n.style.cssText,u=l.wrapper.style.cssText,f=l.wrapper.offsetParent.getBoundingClientRect();l.wrapper.style.cssText="position: static",n.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(r.clientY-f.top-5)+"px; left: "+(r.clientX-f.left-5)+`px;
      z-index: 1000; background: `+(m?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var h;x&&(h=window.scrollY),t.input.focus(),x&&window.scrollTo(null,h),t.input.reset(),e.somethingSelected()||(n.value=l.prevInput=" "),l.contextMenuPending=v,t.selForContextMenu=e.doc.sel,clearTimeout(t.detectingSelectAll);function d(){if(n.selectionStart!=null){var k=e.somethingSelected(),H="\u200B"+(k?n.value:"");n.value="\u21DA",n.value=H,l.prevInput=k?"":"\u200B",n.selectionStart=1,n.selectionEnd=H.length,t.selForContextMenu=e.doc.sel}}function v(){if(l.contextMenuPending==v&&(l.contextMenuPending=!1,l.wrapper.style.cssText=u,n.style.cssText=s,m&&S<9&&t.scrollbars.setScrollTop(t.scroller.scrollTop=o),n.selectionStart!=null)){(!m||m&&S<9)&&d();var k=0,H=function(){t.selForContextMenu==e.doc.sel&&n.selectionStart==0&&n.selectionEnd>0&&l.prevInput=="\u200B"?zt(e,Ll)(e):k++<10?t.detectingSelectAll=setTimeout(H,500):(t.selForContextMenu=null,t.input.reset())};t.detectingSelectAll=setTimeout(H,200)}}if(m&&S>=9&&d(),he){nr(r);var C=function(){se(window,"mouseup",C),setTimeout(v,20)};ye(window,"mouseup",C)}else setTimeout(v,50)},Ct.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled=r=="nocursor",this.textarea.readOnly=!!r},Ct.prototype.setUneditable=function(){},Ct.prototype.needsContentAttribute=!1;function xu(r,l){if(l=l?Yt(l):{},l.value=r.value,!l.tabindex&&r.tabIndex&&(l.tabindex=r.tabIndex),!l.placeholder&&r.placeholder&&(l.placeholder=r.placeholder),l.autofocus==null){var e=Fe();l.autofocus=e==r||r.getAttribute("autofocus")!=null&&e==document.body}function t(){r.value=a.getValue()}var n;if(r.form&&(ye(r.form,"submit",t),!l.leaveSubmitMethodAlone)){var i=r.form;n=i.submit;try{var o=i.submit=function(){t(),i.submit=n,i.submit(),i.submit=o}}catch{}}l.finishInit=function(s){s.save=t,s.getTextArea=function(){return r},s.toTextArea=function(){s.toTextArea=isNaN,t(),r.parentNode.removeChild(s.getWrapperElement()),r.style.display="",r.form&&(se(r.form,"submit",t),!l.leaveSubmitMethodAlone&&typeof r.form.submit=="function"&&(r.form.submit=n))}},r.style.display="none";var a=St(function(s){return r.parentNode.insertBefore(s,r.nextSibling)},l);return a}function Ot(r){r.off=se,r.on=ye,r.wheelEventPixels=fn,r.Doc=$t,r.splitLines=Cn,r.countColumn=Be,r.findColumn=fr,r.isWordChar=U,r.Pass=Pe,r.signal=vt,r.Line=ln,r.changeEnd=Gt,r.scrollbarModel=ri,r.Pos=c,r.cmpPos=T,r.modes=wr,r.mimeModes=en,r.resolveMode=Xn,r.getMode=Ln,r.modeExtensions=_t,r.extendMode=tn,r.copyState=lr,r.startState=qr,r.innerMode=bi,r.commands=vi,r.keyMap=Or,r.keyName=ga,r.isModifierKey=Cs,r.lookupKey=Gi,r.normalizeKeyMap=bn,r.StringStream=gt,r.SharedTextMarker=Dr,r.TextMarker=Rn,r.LineWidget=yn,r.e_preventDefault=rt,r.e_stopPropagation=Tt,r.e_stop=nr,r.addClass=je,r.contains=Je,r.rmClass=ue,r.keyNames=Bn}Ws(St),_s(St);var Su="iter insert remove copy getEditor constructor".split(" ");for(var Lo in $t.prototype)$t.prototype.hasOwnProperty(Lo)&&me(Su,Lo)<0&&(St.prototype[Lo]=function(r){return function(){return r.apply(this.doc,arguments)}}($t.prototype[Lo]));return br($t),St.inputStyles={textarea:Ct,contenteditable:st},St.defineMode=function(r){!St.defaults.mode&&r!="null"&&(St.defaults.mode=r),Pr.apply(this,arguments)},St.defineMIME=kn,St.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),St.defineMIME("text/plain","null"),St.defineExtension=function(r,l){St.prototype[r]=l},St.defineDocExtension=function(r,l){$t.prototype[r]=l},St.fromTextArea=xu,Ot(St),St.version="5.65.6",St})})(mi);(function(W,O){(function(b){b(mi.exports)})(function(b){b.defineMode("javascript",function(_,A){var p=_.indentUnit,g=A.statementIndent,y=A.jsonld,m=A.json||y,S=A.trackScope!==!1,x=A.typescript,N=A.wordCharacters||/[\w$\xa1-\uffff]/,D=function(){function c(xe){return{type:xe,style:"keyword"}}var T=c("keyword a"),I=c("keyword b"),re=c("keyword c"),Te=c("keyword d"),He=c("operator"),nt={type:"atom",style:"atom"};return{if:c("if"),while:T,with:T,else:I,do:I,try:I,finally:I,return:Te,break:Te,continue:Te,new:c("new"),delete:re,void:re,throw:re,debugger:c("debugger"),var:c("var"),const:c("var"),let:c("var"),function:c("function"),catch:c("catch"),for:c("for"),switch:c("switch"),case:c("case"),default:c("default"),in:He,typeof:He,instanceof:He,true:nt,false:nt,null:nt,undefined:nt,NaN:nt,Infinity:nt,this:c("this"),class:c("class"),super:c("atom"),yield:re,export:c("export"),import:c("import"),extends:re,await:re}}(),R=/[+\-*&%=<>!?|~^@]/,F=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function E(c){for(var T=!1,I,re=!1;(I=c.next())!=null;){if(!T){if(I=="/"&&!re)return;I=="["?re=!0:re&&I=="]"&&(re=!1)}T=!T&&I=="\\"}}var J,ee;function z(c,T,I){return J=c,ee=I,T}function X(c,T){var I=c.next();if(I=='"'||I=="'")return T.tokenize=te(I),T.tokenize(c,T);if(I=="."&&c.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return z("number","number");if(I=="."&&c.match(".."))return z("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(I))return z(I);if(I=="="&&c.eat(">"))return z("=>","operator");if(I=="0"&&c.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return z("number","number");if(/\d/.test(I))return c.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),z("number","number");if(I=="/")return c.eat("*")?(T.tokenize=V,V(c,T)):c.eat("/")?(c.skipToEnd(),z("comment","comment")):xr(c,T,1)?(E(c),c.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),z("regexp","string-2")):(c.eat("="),z("operator","operator",c.current()));if(I=="`")return T.tokenize=le,le(c,T);if(I=="#"&&c.peek()=="!")return c.skipToEnd(),z("meta","meta");if(I=="#"&&c.eatWhile(N))return z("variable","property");if(I=="<"&&c.match("!--")||I=="-"&&c.match("->")&&!/\S/.test(c.string.slice(0,c.start)))return c.skipToEnd(),z("comment","comment");if(R.test(I))return(I!=">"||!T.lexical||T.lexical.type!=">")&&(c.eat("=")?(I=="!"||I=="=")&&c.eat("="):/[<>*+\-|&?]/.test(I)&&(c.eat(I),I==">"&&c.eat(I))),I=="?"&&c.eat(".")?z("."):z("operator","operator",c.current());if(N.test(I)){c.eatWhile(N);var re=c.current();if(T.lastType!="."){if(D.propertyIsEnumerable(re)){var Te=D[re];return z(Te.type,Te.style,re)}if(re=="async"&&c.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return z("async","keyword",re)}return z("variable","variable",re)}}function te(c){return function(T,I){var re=!1,Te;if(y&&T.peek()=="@"&&T.match(F))return I.tokenize=X,z("jsonld-keyword","meta");for(;(Te=T.next())!=null&&!(Te==c&&!re);)re=!re&&Te=="\\";return re||(I.tokenize=X),z("string","string")}}function V(c,T){for(var I=!1,re;re=c.next();){if(re=="/"&&I){T.tokenize=X;break}I=re=="*"}return z("comment","comment")}function le(c,T){for(var I=!1,re;(re=c.next())!=null;){if(!I&&(re=="`"||re=="$"&&c.eat("{"))){T.tokenize=X;break}I=!I&&re=="\\"}return z("quasi","string-2",c.current())}var ae="([{}])";function M(c,T){T.fatArrowAt&&(T.fatArrowAt=null);var I=c.string.indexOf("=>",c.start);if(!(I<0)){if(x){var re=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(c.string.slice(c.start,I));re&&(I=re.index)}for(var Te=0,He=!1,nt=I-1;nt>=0;--nt){var xe=c.string.charAt(nt),dr=ae.indexOf(xe);if(dr>=0&&dr<3){if(!Te){++nt;break}if(--Te==0){xe=="("&&(He=!0);break}}else if(dr>=3&&dr<6)++Te;else if(N.test(xe))He=!0;else if(/["'\/`]/.test(xe))for(;;--nt){if(nt==0)return;var De=c.string.charAt(nt-1);if(De==xe&&c.string.charAt(nt-2)!="\\"){nt--;break}}else if(He&&!Te){++nt;break}}He&&!Te&&(T.fatArrowAt=nt)}}var j={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function he(c,T,I,re,Te,He){this.indented=c,this.column=T,this.type=I,this.prev=Te,this.info=He,re!=null&&(this.align=re)}function de(c,T){if(!S)return!1;for(var I=c.localVars;I;I=I.next)if(I.name==T)return!0;for(var re=c.context;re;re=re.prev)for(var I=re.vars;I;I=I.next)if(I.name==T)return!0}function ue(c,T,I,re,Te){var He=c.cc;for(G.state=c,G.stream=Te,G.marked=null,G.cc=He,G.style=T,c.lexical.hasOwnProperty("align")||(c.lexical.align=!0);;){var nt=He.length?He.pop():m?ze:Pe;if(nt(I,re)){for(;He.length&&He[He.length-1].lex;)He.pop()();return G.marked?G.marked:I=="variable"&&de(c,re)?"variable-2":T}}}var G={state:null,column:null,marked:null,cc:null};function fe(){for(var c=arguments.length-1;c>=0;c--)G.cc.push(arguments[c])}function L(){return fe.apply(null,arguments),!0}function Ae(c,T){for(var I=T;I;I=I.next)if(I.name==c)return!0;return!1}function Re(c){var T=G.state;if(G.marked="def",!!S){if(T.context){if(T.lexical.info=="var"&&T.context&&T.context.block){var I=Je(c,T.context);if(I!=null){T.context=I;return}}else if(!Ae(c,T.localVars)){T.localVars=new sr(c,T.localVars);return}}A.globalVars&&!Ae(c,T.globalVars)&&(T.globalVars=new sr(c,T.globalVars))}}function Je(c,T){if(T)if(T.block){var I=Je(c,T.prev);return I?I==T.prev?T:new je(I,T.vars,!0):null}else return Ae(c,T.vars)?T:new je(T.prev,new sr(c,T.vars),!1);else return null}function Fe(c){return c=="public"||c=="private"||c=="protected"||c=="abstract"||c=="readonly"}function je(c,T,I){this.prev=c,this.vars=T,this.block=I}function sr(c,T){this.name=c,this.next=T}var ur=new sr("this",new sr("arguments",null));function kt(){G.state.context=new je(G.state.context,G.state.localVars,!1),G.state.localVars=ur}function Yt(){G.state.context=new je(G.state.context,G.state.localVars,!0),G.state.localVars=null}kt.lex=Yt.lex=!0;function Be(){G.state.localVars=G.state.context.vars,G.state.context=G.state.context.prev}Be.lex=!0;function Ce(c,T){var I=function(){var re=G.state,Te=re.indented;if(re.lexical.type=="stat")Te=re.lexical.indented;else for(var He=re.lexical;He&&He.type==")"&&He.align;He=He.prev)Te=He.indented;re.lexical=new he(Te,G.stream.column(),c,null,re.lexical,T)};return I.lex=!0,I}function me(){var c=G.state;c.lexical.prev&&(c.lexical.type==")"&&(c.indented=c.lexical.indented),c.lexical=c.lexical.prev)}me.lex=!0;function Oe(c){function T(I){return I==c?L():c==";"||I=="}"||I==")"||I=="]"?fe():L(T)}return T}function Pe(c,T){return c=="var"?L(Ce("vardef",T),Kr,Oe(";"),me):c=="keyword a"?L(Ce("form"),fr,Pe,me):c=="keyword b"?L(Ce("form"),Pe,me):c=="keyword d"?G.stream.match(/^\s*$/,!1)?L():L(Ce("stat"),rr,Oe(";"),me):c=="debugger"?L(Oe(";")):c=="{"?L(Ce("}"),Yt,tt,me,Be):c==";"?L():c=="if"?(G.state.lexical.info=="else"&&G.state.cc[G.state.cc.length-1]==me&&G.state.cc.pop()(),L(Ce("form"),fr,Pe,me,Cn)):c=="function"?L(Yr):c=="for"?L(Ce("form"),Yt,Il,Pe,Be,me):c=="class"||x&&T=="interface"?(G.marked="keyword",L(Ce("form",c=="class"?c:T),Xn,me)):c=="variable"?x&&T=="declare"?(G.marked="keyword",L(Pe)):x&&(T=="module"||T=="enum"||T=="type")&&G.stream.match(/^\s*\w/,!1)?(G.marked="keyword",T=="enum"?L(Ve):T=="type"?L(en,Oe("operator"),se,Oe(";")):L(Ce("form"),Vt,Oe("{"),Ce("}"),tt,me,me)):x&&T=="namespace"?(G.marked="keyword",L(Ce("form"),ze,Pe,me)):x&&T=="abstract"?(G.marked="keyword",L(Pe)):L(Ce("stat"),Q):c=="switch"?L(Ce("form"),fr,Oe("{"),Ce("}","switch"),Yt,tt,me,me,Be):c=="case"?L(ze,Oe(":")):c=="default"?L(Oe(":")):c=="catch"?L(Ce("form"),kt,Qt,Pe,me,Be):c=="export"?L(Ce("stat"),lr,me):c=="import"?L(Ce("stat"),qr,me):c=="async"?L(Pe):T=="@"?L(ze,Pe):fe(Ce("stat"),ze,Oe(";"),me)}function Qt(c){if(c=="(")return L(Pr,Oe(")"))}function ze(c,T){return hr(c,T,!1)}function ot(c,T){return hr(c,T,!0)}function fr(c){return c!="("?fe():L(Ce(")"),rr,Oe(")"),me)}function hr(c,T,I){if(G.state.fatArrowAt==G.stream.start){var re=I?P:w;if(c=="(")return L(kt,Ce(")"),be(Pr,")"),me,Oe("=>"),re,Be);if(c=="variable")return fe(kt,Vt,Oe("=>"),re,Be)}var Te=I?jt:Ee;return j.hasOwnProperty(c)?L(Te):c=="function"?L(Yr,Te):c=="class"||x&&T=="interface"?(G.marked="keyword",L(Ce("form"),kn,me)):c=="keyword c"||c=="async"?L(I?ot:ze):c=="("?L(Ce(")"),rr,Oe(")"),me,Te):c=="operator"||c=="spread"?L(I?ot:ze):c=="["?L(Ce("]"),Bt,me,Te):c=="{"?We(ce,"}",null,Te):c=="quasi"?fe(Ue,Te):c=="new"?L(U(I)):L()}function rr(c){return c.match(/[;\}\)\],]/)?fe():fe(ze)}function Ee(c,T){return c==","?L(rr):jt(c,T,!1)}function jt(c,T,I){var re=I==!1?Ee:jt,Te=I==!1?ze:ot;if(c=="=>")return L(kt,I?P:w,Be);if(c=="operator")return/\+\+|--/.test(T)||x&&T=="!"?L(re):x&&T=="<"&&G.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?L(Ce(">"),be(se,">"),me,re):T=="?"?L(ze,Oe(":"),Te):L(Te);if(c=="quasi")return fe(Ue,re);if(c!=";"){if(c=="(")return We(ot,")","call",re);if(c==".")return L(oe,re);if(c=="[")return L(Ce("]"),rr,Oe("]"),me,re);if(x&&T=="as")return G.marked="keyword",L(se,re);if(c=="regexp")return G.state.lastType=G.marked="operator",G.stream.backUp(G.stream.pos-G.stream.start-1),L(Te)}}function Ue(c,T){return c!="quasi"?fe():T.slice(T.length-2)!="${"?L(Ue):L(rr,Gr)}function Gr(c){if(c=="}")return G.marked="string-2",G.state.tokenize=le,L(Ue)}function w(c){return M(G.stream,G.state),fe(c=="{"?Pe:ze)}function P(c){return M(G.stream,G.state),fe(c=="{"?Pe:ot)}function U(c){return function(T){return T=="."?L(c?Z:Y):T=="variable"&&x?L(xt,c?jt:Ee):fe(c?ot:ze)}}function Y(c,T){if(T=="target")return G.marked="keyword",L(Ee)}function Z(c,T){if(T=="target")return G.marked="keyword",L(jt)}function Q(c){return c==":"?L(me,Pe):fe(Ee,Oe(";"),me)}function oe(c){if(c=="variable")return G.marked="property",L()}function ce(c,T){if(c=="async")return G.marked="property",L(ce);if(c=="variable"||G.style=="keyword"){if(G.marked="property",T=="get"||T=="set")return L(pe);var I;return x&&G.state.fatArrowAt==G.stream.start&&(I=G.stream.match(/^\s*:\s*/,!1))&&(G.state.fatArrowAt=G.stream.pos+I[0].length),L(Le)}else{if(c=="number"||c=="string")return G.marked=y?"property":G.style+" property",L(Le);if(c=="jsonld-keyword")return L(Le);if(x&&Fe(T))return G.marked="keyword",L(ce);if(c=="[")return L(ze,Ne,Oe("]"),Le);if(c=="spread")return L(ot,Le);if(T=="*")return G.marked="keyword",L(ce);if(c==":")return fe(Le)}}function pe(c){return c!="variable"?fe(Le):(G.marked="property",L(Yr))}function Le(c){if(c==":")return L(ot);if(c=="(")return fe(Yr)}function be(c,T,I){function re(Te,He){if(I?I.indexOf(Te)>-1:Te==","){var nt=G.state.lexical;return nt.info=="call"&&(nt.pos=(nt.pos||0)+1),L(function(xe,dr){return xe==T||dr==T?fe():fe(c)},re)}return Te==T||He==T?L():I&&I.indexOf(";")>-1?fe(c):L(Oe(T))}return function(Te,He){return Te==T||He==T?L():fe(c,re)}}function We(c,T,I){for(var re=3;re<arguments.length;re++)G.cc.push(arguments[re]);return L(Ce(T,I),be(c,T),me)}function tt(c){return c=="}"?L():fe(Pe,tt)}function Ne(c,T){if(x){if(c==":")return L(se);if(T=="?")return L(Ne)}}function mt(c,T){if(x&&(c==":"||T=="in"))return L(se)}function ye(c){if(x&&c==":")return G.stream.match(/^\s*\w+\s+is\b/,!1)?L(ze,Rt,se):L(se)}function Rt(c,T){if(T=="is")return G.marked="keyword",L()}function se(c,T){if(T=="keyof"||T=="typeof"||T=="infer"||T=="readonly")return G.marked="keyword",L(T=="typeof"?ot:se);if(c=="variable"||T=="void")return G.marked="type",L(Tt);if(T=="|"||T=="&")return L(se);if(c=="string"||c=="number"||c=="atom")return L(Tt);if(c=="[")return L(Ce("]"),be(se,"]",","),me,Tt);if(c=="{")return L(Ce("}"),Ge,me,Tt);if(c=="(")return L(be(rt,")"),vt,Tt);if(c=="<")return L(be(se,">"),se);if(c=="quasi")return fe(qe,Tt)}function vt(c){if(c=="=>")return L(se)}function Ge(c){return c.match(/[\}\)\]]/)?L():c==","||c==";"?L(Ge):fe(ft,Ge)}function ft(c,T){if(c=="variable"||G.style=="keyword")return G.marked="property",L(ft);if(T=="?"||c=="number"||c=="string")return L(ft);if(c==":")return L(se);if(c=="[")return L(Oe("variable"),mt,Oe("]"),ft);if(c=="(")return fe(wr,ft);if(!c.match(/[;\}\)\],]/))return L()}function qe(c,T){return c!="quasi"?fe():T.slice(T.length-2)!="${"?L(qe):L(se,br)}function br(c){if(c=="}")return G.marked="string-2",G.state.tokenize=le,L(qe)}function rt(c,T){return c=="variable"&&G.stream.match(/^\s*[?:]/,!1)||T=="?"?L(rt):c==":"?L(se):c=="spread"?L(rt):fe(se)}function Tt(c,T){if(T=="<")return L(Ce(">"),be(se,">"),me,Tt);if(T=="|"||c=="."||T=="&")return L(se);if(c=="[")return L(se,Oe("]"),Tt);if(T=="extends"||T=="implements")return G.marked="keyword",L(se);if(T=="?")return L(se,Oe(":"),se)}function xt(c,T){if(T=="<")return L(Ce(">"),be(se,">"),me,Tt)}function nr(){return fe(se,cr)}function cr(c,T){if(T=="=")return L(se)}function Kr(c,T){return T=="enum"?(G.marked="keyword",L(Ve)):fe(Vt,Ne,ir,No)}function Vt(c,T){if(x&&Fe(T))return G.marked="keyword",L(Vt);if(c=="variable")return Re(T),L();if(c=="spread")return L(Vt);if(c=="[")return We(Oo,"]");if(c=="{")return We(Kn,"}")}function Kn(c,T){return c=="variable"&&!G.stream.match(/^\s*:/,!1)?(Re(T),L(ir)):(c=="variable"&&(G.marked="property"),c=="spread"?L(Vt):c=="}"?fe():c=="["?L(ze,Oe("]"),Oe(":"),Kn):L(Oe(":"),Vt,ir))}function Oo(){return fe(Vt,ir)}function ir(c,T){if(T=="=")return L(ot)}function No(c){if(c==",")return L(Kr)}function Cn(c,T){if(c=="keyword b"&&T=="else")return L(Ce("form","else"),Pe,me)}function Il(c,T){if(T=="await")return L(Il);if(c=="(")return L(Ce(")"),Qi,me)}function Qi(c){return c=="var"?L(Kr,Xr):c=="variable"?L(Xr):fe(Xr)}function Xr(c,T){return c==")"?L():c==";"?L(Xr):T=="in"||T=="of"?(G.marked="keyword",L(ze,Xr)):fe(ze,Xr)}function Yr(c,T){if(T=="*")return G.marked="keyword",L(Yr);if(c=="variable")return Re(T),L(Yr);if(c=="(")return L(kt,Ce(")"),be(Pr,")"),me,ye,Pe,Be);if(x&&T=="<")return L(Ce(">"),be(nr,">"),me,Yr)}function wr(c,T){if(T=="*")return G.marked="keyword",L(wr);if(c=="variable")return Re(T),L(wr);if(c=="(")return L(kt,Ce(")"),be(Pr,")"),me,ye,Be);if(x&&T=="<")return L(Ce(">"),be(nr,">"),me,wr)}function en(c,T){if(c=="keyword"||c=="variable")return G.marked="type",L(en);if(T=="<")return L(Ce(">"),be(nr,">"),me)}function Pr(c,T){return T=="@"&&L(ze,Pr),c=="spread"?L(Pr):x&&Fe(T)?(G.marked="keyword",L(Pr)):x&&c=="this"?L(Ne,ir):fe(Vt,Ne,ir)}function kn(c,T){return c=="variable"?Xn(c,T):Ln(c,T)}function Xn(c,T){if(c=="variable")return Re(T),L(Ln)}function Ln(c,T){if(T=="<")return L(Ce(">"),be(nr,">"),me,Ln);if(T=="extends"||T=="implements"||x&&c==",")return T=="implements"&&(G.marked="keyword"),L(x?se:ze,Ln);if(c=="{")return L(Ce("}"),_t,me)}function _t(c,T){if(c=="async"||c=="variable"&&(T=="static"||T=="get"||T=="set"||x&&Fe(T))&&G.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return G.marked="keyword",L(_t);if(c=="variable"||G.style=="keyword")return G.marked="property",L(tn,_t);if(c=="number"||c=="string")return L(tn,_t);if(c=="[")return L(ze,Ne,Oe("]"),tn,_t);if(T=="*")return G.marked="keyword",L(_t);if(x&&c=="(")return fe(wr,_t);if(c==";"||c==",")return L(_t);if(c=="}")return L();if(T=="@")return L(ze,_t)}function tn(c,T){if(T=="!"||T=="?")return L(tn);if(c==":")return L(se,ir);if(T=="=")return L(ot);var I=G.state.lexical.prev,re=I&&I.info=="interface";return fe(re?wr:Yr)}function lr(c,T){return T=="*"?(G.marked="keyword",L(we,Oe(";"))):T=="default"?(G.marked="keyword",L(ze,Oe(";"))):c=="{"?L(be(bi,"}"),we,Oe(";")):fe(Pe)}function bi(c,T){if(T=="as")return G.marked="keyword",L(Oe("variable"));if(c=="variable")return fe(ot,bi)}function qr(c){return c=="string"?L():c=="("?fe(ze):c=="."?fe(Ee):fe(gt,Se,we)}function gt(c,T){return c=="{"?We(gt,"}"):(c=="variable"&&Re(T),T=="*"&&(G.marked="keyword"),L(ct))}function Se(c){if(c==",")return L(gt,Se)}function ct(c,T){if(T=="as")return G.marked="keyword",L(gt)}function we(c,T){if(T=="from")return G.marked="keyword",L(ze)}function Bt(c){return c=="]"?L():fe(be(ot,"]"))}function Ve(){return fe(Ce("form"),Vt,Oe("{"),Ce("}"),be(Ut,"}"),me,me)}function Ut(){return fe(Vt,ir)}function Qe(c,T){return c.lastType=="operator"||c.lastType==","||R.test(T.charAt(0))||/[,.]/.test(T.charAt(0))}function xr(c,T,I){return T.tokenize==X&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(T.lastType)||T.lastType=="quasi"&&/\{\s*$/.test(c.string.slice(0,c.pos-(I||0)))}return{startState:function(c){var T={tokenize:X,lastType:"sof",cc:[],lexical:new he((c||0)-p,0,"block",!1),localVars:A.localVars,context:A.localVars&&new je(null,null,!1),indented:c||0};return A.globalVars&&typeof A.globalVars=="object"&&(T.globalVars=A.globalVars),T},token:function(c,T){if(c.sol()&&(T.lexical.hasOwnProperty("align")||(T.lexical.align=!1),T.indented=c.indentation(),M(c,T)),T.tokenize!=V&&c.eatSpace())return null;var I=T.tokenize(c,T);return J=="comment"?I:(T.lastType=J=="operator"&&(ee=="++"||ee=="--")?"incdec":J,ue(T,I,J,ee,c))},indent:function(c,T){if(c.tokenize==V||c.tokenize==le)return b.Pass;if(c.tokenize!=X)return 0;var I=T&&T.charAt(0),re=c.lexical,Te;if(!/^\s*else\b/.test(T))for(var He=c.cc.length-1;He>=0;--He){var nt=c.cc[He];if(nt==me)re=re.prev;else if(nt!=Cn&&nt!=Be)break}for(;(re.type=="stat"||re.type=="form")&&(I=="}"||(Te=c.cc[c.cc.length-1])&&(Te==Ee||Te==jt)&&!/^[,\.=+\-*:?[\(]/.test(T));)re=re.prev;g&&re.type==")"&&re.prev.type=="stat"&&(re=re.prev);var xe=re.type,dr=I==xe;return xe=="vardef"?re.indented+(c.lastType=="operator"||c.lastType==","?re.info.length+1:0):xe=="form"&&I=="{"?re.indented:xe=="form"?re.indented+p:xe=="stat"?re.indented+(Qe(c,T)?g||p:0):re.info=="switch"&&!dr&&A.doubleIndentSwitch!=!1?re.indented+(/^(?:case|default)\b/.test(T)?p:2*p):re.align?re.column+(dr?0:1):re.indented+(dr?0:p)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:m?null:"/*",blockCommentEnd:m?null:"*/",blockCommentContinue:m?null:" * ",lineComment:m?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:m?"json":"javascript",jsonldMode:y,jsonMode:m,expressionAllowed:xr,skipExpression:function(c){ue(c,"atom","atom","true",new b.StringStream("",2,null))}}}),b.registerHelper("wordChars","javascript",/[\w$]/),b.defineMIME("text/javascript","javascript"),b.defineMIME("text/ecmascript","javascript"),b.defineMIME("application/javascript","javascript"),b.defineMIME("application/x-javascript","javascript"),b.defineMIME("application/ecmascript","javascript"),b.defineMIME("application/json",{name:"javascript",json:!0}),b.defineMIME("application/x-json",{name:"javascript",json:!0}),b.defineMIME("application/manifest+json",{name:"javascript",json:!0}),b.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),b.defineMIME("text/typescript",{name:"javascript",typescript:!0}),b.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var qf={exports:{}};(function(W,O){(function(b){b(mi.exports)})(function(b){function _(y,m,S,x){if(S&&S.call){var N=S;S=null}else var N=g(y,S,"rangeFinder");typeof m=="number"&&(m=b.Pos(m,0));var D=g(y,S,"minFoldSize");function R(ee){var z=N(y,m);if(!z||z.to.line-z.from.line<D)return null;if(x==="fold")return z;for(var X=y.findMarksAt(z.from),te=0;te<X.length;++te)if(X[te].__isFold){if(!ee)return null;z.cleared=!0,X[te].clear()}return z}var F=R(!0);if(g(y,S,"scanUp"))for(;!F&&m.line>y.firstLine();)m=b.Pos(m.line-1,0),F=R(!1);if(!(!F||F.cleared||x==="unfold")){var E=A(y,S,F);b.on(E,"mousedown",function(ee){J.clear(),b.e_preventDefault(ee)});var J=y.markText(F.from,F.to,{replacedWith:E,clearOnEnter:g(y,S,"clearOnEnter"),__isFold:!0});J.on("clear",function(ee,z){b.signal(y,"unfold",y,ee,z)}),b.signal(y,"fold",y,F.from,F.to)}}function A(y,m,S){var x=g(y,m,"widget");if(typeof x=="function"&&(x=x(S.from,S.to)),typeof x=="string"){var N=document.createTextNode(x);x=document.createElement("span"),x.appendChild(N),x.className="CodeMirror-foldmarker"}else x&&(x=x.cloneNode(!0));return x}b.newFoldFunction=function(y,m){return function(S,x){_(S,x,{rangeFinder:y,widget:m})}},b.defineExtension("foldCode",function(y,m,S){_(this,y,m,S)}),b.defineExtension("isFolded",function(y){for(var m=this.findMarksAt(y),S=0;S<m.length;++S)if(m[S].__isFold)return!0}),b.commands.toggleFold=function(y){y.foldCode(y.getCursor())},b.commands.fold=function(y){y.foldCode(y.getCursor(),null,"fold")},b.commands.unfold=function(y){y.foldCode(y.getCursor(),{scanUp:!1},"unfold")},b.commands.foldAll=function(y){y.operation(function(){for(var m=y.firstLine(),S=y.lastLine();m<=S;m++)y.foldCode(b.Pos(m,0),{scanUp:!1},"fold")})},b.commands.unfoldAll=function(y){y.operation(function(){for(var m=y.firstLine(),S=y.lastLine();m<=S;m++)y.foldCode(b.Pos(m,0),{scanUp:!1},"unfold")})},b.registerHelper("fold","combine",function(){var y=Array.prototype.slice.call(arguments,0);return function(m,S){for(var x=0;x<y.length;++x){var N=y[x](m,S);if(N)return N}}}),b.registerHelper("fold","auto",function(y,m){for(var S=y.getHelpers(m,"fold"),x=0;x<S.length;x++){var N=S[x](y,m);if(N)return N}});var p={rangeFinder:b.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1,clearOnEnter:!0};b.defineOption("foldOptions",null);function g(y,m,S){if(m&&m[S]!==void 0)return m[S];var x=y.options.foldOptions;return x&&x[S]!==void 0?x[S]:p[S]}b.defineExtension("foldOption",function(y,m){return g(this,y,m)})})})();(function(W,O){(function(b){b(mi.exports,qf.exports)})(function(b){b.defineOption("foldGutter",!1,function(E,J,ee){ee&&ee!=b.Init&&(E.clearGutter(E.state.foldGutter.options.gutter),E.state.foldGutter=null,E.off("gutterClick",N),E.off("changes",D),E.off("viewportChange",R),E.off("fold",F),E.off("unfold",F),E.off("swapDoc",D)),J&&(E.state.foldGutter=new A(p(J)),x(E),E.on("gutterClick",N),E.on("changes",D),E.on("viewportChange",R),E.on("fold",F),E.on("unfold",F),E.on("swapDoc",D))});var _=b.Pos;function A(E){this.options=E,this.from=this.to=0}function p(E){return E===!0&&(E={}),E.gutter==null&&(E.gutter="CodeMirror-foldgutter"),E.indicatorOpen==null&&(E.indicatorOpen="CodeMirror-foldgutter-open"),E.indicatorFolded==null&&(E.indicatorFolded="CodeMirror-foldgutter-folded"),E}function g(E,J){for(var ee=E.findMarks(_(J,0),_(J+1,0)),z=0;z<ee.length;++z)if(ee[z].__isFold){var X=ee[z].find(-1);if(X&&X.line===J)return ee[z]}}function y(E){if(typeof E=="string"){var J=document.createElement("div");return J.className=E+" CodeMirror-guttermarker-subtle",J}else return E.cloneNode(!0)}function m(E,J,ee){var z=E.state.foldGutter.options,X=J-1,te=E.foldOption(z,"minFoldSize"),V=E.foldOption(z,"rangeFinder"),le=typeof z.indicatorFolded=="string"&&S(z.indicatorFolded),ae=typeof z.indicatorOpen=="string"&&S(z.indicatorOpen);E.eachLine(J,ee,function(M){++X;var j=null,he=M.gutterMarkers;if(he&&(he=he[z.gutter]),g(E,X)){if(le&&he&&le.test(he.className))return;j=y(z.indicatorFolded)}else{var de=_(X,0),ue=V&&V(E,de);if(ue&&ue.to.line-ue.from.line>=te){if(ae&&he&&ae.test(he.className))return;j=y(z.indicatorOpen)}}!j&&!he||E.setGutterMarker(M,z.gutter,j)})}function S(E){return new RegExp("(^|\\s)"+E+"(?:$|\\s)\\s*")}function x(E){var J=E.getViewport(),ee=E.state.foldGutter;!ee||(E.operation(function(){m(E,J.from,J.to)}),ee.from=J.from,ee.to=J.to)}function N(E,J,ee){var z=E.state.foldGutter;if(!!z){var X=z.options;if(ee==X.gutter){var te=g(E,J);te?te.clear():E.foldCode(_(J,0),X)}}}function D(E){var J=E.state.foldGutter;if(!!J){var ee=J.options;J.from=J.to=0,clearTimeout(J.changeUpdate),J.changeUpdate=setTimeout(function(){x(E)},ee.foldOnChangeTimeSpan||600)}}function R(E){var J=E.state.foldGutter;if(!!J){var ee=J.options;clearTimeout(J.changeUpdate),J.changeUpdate=setTimeout(function(){var z=E.getViewport();J.from==J.to||z.from-J.to>20||J.from-z.to>20?x(E):E.operation(function(){z.from<J.from&&(m(E,z.from,J.from),J.from=z.from),z.to>J.to&&(m(E,J.to,z.to),J.to=z.to)})},ee.updateViewportTimeSpan||400)}}function F(E,J){var ee=E.state.foldGutter;if(!!ee){var z=J.line;z>=ee.from&&z<ee.to&&m(E,z,z+1)}}})})();(function(W,O){(function(b){b(mi.exports)})(function(b){function _(A){return function(p,g){var y=g.line,m=p.getLine(y);function S(E){for(var J,ee=g.ch,z=0;;){var X=ee<=0?-1:m.lastIndexOf(E[0],ee-1);if(X==-1){if(z==1)break;z=1,ee=m.length;continue}if(z==1&&X<g.ch)break;if(J=p.getTokenTypeAt(b.Pos(y,X+1)),!/^(comment|string)/.test(J))return{ch:X+1,tokenType:J,pair:E};ee=X-1}}function x(E){var J=1,ee=p.lastLine(),z,X=E.ch,te;e:for(var V=y;V<=ee;++V)for(var le=p.getLine(V),ae=V==y?X:0;;){var M=le.indexOf(E.pair[0],ae),j=le.indexOf(E.pair[1],ae);if(M<0&&(M=le.length),j<0&&(j=le.length),ae=Math.min(M,j),ae==le.length)break;if(p.getTokenTypeAt(b.Pos(V,ae+1))==E.tokenType){if(ae==M)++J;else if(!--J){z=V,te=ae;break e}}++ae}return z==null||y==z?null:{from:b.Pos(y,X),to:b.Pos(z,te)}}for(var N=[],D=0;D<A.length;D++){var R=S(A[D]);R&&N.push(R)}N.sort(function(E,J){return E.ch-J.ch});for(var D=0;D<N.length;D++){var F=x(N[D]);if(F)return F}return null}}b.registerHelper("fold","brace",_([["{","}"],["[","]"]])),b.registerHelper("fold","brace-paren",_([["{","}"],["[","]"],["(",")"]])),b.registerHelper("fold","import",function(A,p){function g(D){if(D<A.firstLine()||D>A.lastLine())return null;var R=A.getTokenAt(b.Pos(D,1));if(/\S/.test(R.string)||(R=A.getTokenAt(b.Pos(D,R.end+1))),R.type!="keyword"||R.string!="import")return null;for(var F=D,E=Math.min(A.lastLine(),D+10);F<=E;++F){var J=A.getLine(F),ee=J.indexOf(";");if(ee!=-1)return{startCh:R.end,end:b.Pos(F,ee)}}}var y=p.line,m=g(y),S;if(!m||g(y-1)||(S=g(y-2))&&S.end.line==y-1)return null;for(var x=m.end;;){var N=g(x.line+1);if(N==null)break;x=N.end}return{from:A.clipPos(b.Pos(y,m.startCh+1)),to:x}}),b.registerHelper("fold","include",function(A,p){function g(N){if(N<A.firstLine()||N>A.lastLine())return null;var D=A.getTokenAt(b.Pos(N,1));if(/\S/.test(D.string)||(D=A.getTokenAt(b.Pos(N,D.end+1))),D.type=="meta"&&D.string.slice(0,8)=="#include")return D.start+8}var y=p.line,m=g(y);if(m==null||g(y-1)!=null)return null;for(var S=y;;){var x=g(S+1);if(x==null)break;++S}return{from:b.Pos(y,m+1),to:A.clipPos(b.Pos(S))}})})})();(function(W,O){(function(b){b(mi.exports)})(function(b){b.registerGlobalHelper("fold","comment",function(_){return _.blockCommentStart&&_.blockCommentEnd},function(_,A){var p=_.getModeAt(A),g=p.blockCommentStart,y=p.blockCommentEnd;if(!g||!y)return;for(var m=A.line,S=_.getLine(m),x,N=A.ch,D=0;;){var R=N<=0?-1:S.lastIndexOf(g,N-1);if(R==-1){if(D==1)return;D=1,N=S.length;continue}if(D==1&&R<A.ch)return;if(/comment/.test(_.getTokenTypeAt(b.Pos(m,R+1)))&&(R==0||S.slice(R-y.length,R)==y||!/comment/.test(_.getTokenTypeAt(b.Pos(m,R))))){x=R+g.length;break}N=R-1}var F=1,E=_.lastLine(),J,ee;e:for(var z=m;z<=E;++z)for(var X=_.getLine(z),te=z==m?x:0;;){var V=X.indexOf(g,te),le=X.indexOf(y,te);if(V<0&&(V=X.length),le<0&&(le=X.length),te=Math.min(V,le),te==X.length)break;if(te==V)++F;else if(!--F){J=z,ee=te;break e}++te}if(!(J==null||m==J&&ee==x))return{from:b.Pos(m,x),to:b.Pos(J,ee)}})})})();var Zf={exports:{}};(function(W,O){(function(b){b(mi.exports)})(function(b){function _(p,g,y){var m=p.getWrapperElement(),S;return S=m.appendChild(document.createElement("div")),y?S.className="CodeMirror-dialog CodeMirror-dialog-bottom":S.className="CodeMirror-dialog CodeMirror-dialog-top",typeof g=="string"?S.innerHTML=g:S.appendChild(g),b.addClass(m,"dialog-opened"),S}function A(p,g){p.state.currentNotificationClose&&p.state.currentNotificationClose(),p.state.currentNotificationClose=g}b.defineExtension("openDialog",function(p,g,y){y||(y={}),A(this,null);var m=_(this,p,y.bottom),S=!1,x=this;function N(F){if(typeof F=="string")D.value=F;else{if(S)return;S=!0,b.rmClass(m.parentNode,"dialog-opened"),m.parentNode.removeChild(m),x.focus(),y.onClose&&y.onClose(m)}}var D=m.getElementsByTagName("input")[0],R;return D?(D.focus(),y.value&&(D.value=y.value,y.selectValueOnOpen!==!1&&D.select()),y.onInput&&b.on(D,"input",function(F){y.onInput(F,D.value,N)}),y.onKeyUp&&b.on(D,"keyup",function(F){y.onKeyUp(F,D.value,N)}),b.on(D,"keydown",function(F){y&&y.onKeyDown&&y.onKeyDown(F,D.value,N)||((F.keyCode==27||y.closeOnEnter!==!1&&F.keyCode==13)&&(D.blur(),b.e_stop(F),N()),F.keyCode==13&&g(D.value,F))}),y.closeOnBlur!==!1&&b.on(m,"focusout",function(F){F.relatedTarget!==null&&N()})):(R=m.getElementsByTagName("button")[0])&&(b.on(R,"click",function(){N(),x.focus()}),y.closeOnBlur!==!1&&b.on(R,"blur",N),R.focus()),N}),b.defineExtension("openConfirm",function(p,g,y){A(this,null);var m=_(this,p,y&&y.bottom),S=m.getElementsByTagName("button"),x=!1,N=this,D=1;function R(){x||(x=!0,b.rmClass(m.parentNode,"dialog-opened"),m.parentNode.removeChild(m),N.focus())}S[0].focus();for(var F=0;F<S.length;++F){var E=S[F];(function(J){b.on(E,"click",function(ee){b.e_preventDefault(ee),R(),J&&J(N)})})(g[F]),b.on(E,"blur",function(){--D,setTimeout(function(){D<=0&&R()},200)}),b.on(E,"focus",function(){++D})}}),b.defineExtension("openNotification",function(p,g){A(this,N);var y=_(this,p,g&&g.bottom),m=!1,S,x=g&&typeof g.duration!="undefined"?g.duration:5e3;function N(){m||(m=!0,clearTimeout(S),b.rmClass(y.parentNode,"dialog-opened"),y.parentNode.removeChild(y))}return b.on(y,"click",function(D){b.e_preventDefault(D),N()}),x&&(S=setTimeout(N,x)),N})})})();var Qf={exports:{}};(function(W,O){(function(b){b(mi.exports)})(function(b){var _=b.Pos;function A(z){var X=z.flags;return X!=null?X:(z.ignoreCase?"i":"")+(z.global?"g":"")+(z.multiline?"m":"")}function p(z,X){for(var te=A(z),V=te,le=0;le<X.length;le++)V.indexOf(X.charAt(le))==-1&&(V+=X.charAt(le));return te==V?z:new RegExp(z.source,V)}function g(z){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(z.source)}function y(z,X,te){X=p(X,"g");for(var V=te.line,le=te.ch,ae=z.lastLine();V<=ae;V++,le=0){X.lastIndex=le;var M=z.getLine(V),j=X.exec(M);if(j)return{from:_(V,j.index),to:_(V,j.index+j[0].length),match:j}}}function m(z,X,te){if(!g(X))return y(z,X,te);X=p(X,"gm");for(var V,le=1,ae=te.line,M=z.lastLine();ae<=M;){for(var j=0;j<le&&!(ae>M);j++){var he=z.getLine(ae++);V=V==null?he:V+`
`+he}le=le*2,X.lastIndex=te.ch;var de=X.exec(V);if(de){var ue=V.slice(0,de.index).split(`
`),G=de[0].split(`
`),fe=te.line+ue.length-1,L=ue[ue.length-1].length;return{from:_(fe,L),to:_(fe+G.length-1,G.length==1?L+G[0].length:G[G.length-1].length),match:de}}}}function S(z,X,te){for(var V,le=0;le<=z.length;){X.lastIndex=le;var ae=X.exec(z);if(!ae)break;var M=ae.index+ae[0].length;if(M>z.length-te)break;(!V||M>V.index+V[0].length)&&(V=ae),le=ae.index+1}return V}function x(z,X,te){X=p(X,"g");for(var V=te.line,le=te.ch,ae=z.firstLine();V>=ae;V--,le=-1){var M=z.getLine(V),j=S(M,X,le<0?0:M.length-le);if(j)return{from:_(V,j.index),to:_(V,j.index+j[0].length),match:j}}}function N(z,X,te){if(!g(X))return x(z,X,te);X=p(X,"gm");for(var V,le=1,ae=z.getLine(te.line).length-te.ch,M=te.line,j=z.firstLine();M>=j;){for(var he=0;he<le&&M>=j;he++){var de=z.getLine(M--);V=V==null?de:de+`
`+V}le*=2;var ue=S(V,X,ae);if(ue){var G=V.slice(0,ue.index).split(`
`),fe=ue[0].split(`
`),L=M+G.length,Ae=G[G.length-1].length;return{from:_(L,Ae),to:_(L+fe.length-1,fe.length==1?Ae+fe[0].length:fe[fe.length-1].length),match:ue}}}}var D,R;String.prototype.normalize?(D=function(z){return z.normalize("NFD").toLowerCase()},R=function(z){return z.normalize("NFD")}):(D=function(z){return z.toLowerCase()},R=function(z){return z});function F(z,X,te,V){if(z.length==X.length)return te;for(var le=0,ae=te+Math.max(0,z.length-X.length);;){if(le==ae)return le;var M=le+ae>>1,j=V(z.slice(0,M)).length;if(j==te)return M;j>te?ae=M:le=M+1}}function E(z,X,te,V){if(!X.length)return null;var le=V?D:R,ae=le(X).split(/\r|\n\r?/);e:for(var M=te.line,j=te.ch,he=z.lastLine()+1-ae.length;M<=he;M++,j=0){var de=z.getLine(M).slice(j),ue=le(de);if(ae.length==1){var G=ue.indexOf(ae[0]);if(G==-1)continue e;var te=F(de,ue,G,le)+j;return{from:_(M,F(de,ue,G,le)+j),to:_(M,F(de,ue,G+ae[0].length,le)+j)}}else{var fe=ue.length-ae[0].length;if(ue.slice(fe)!=ae[0])continue e;for(var L=1;L<ae.length-1;L++)if(le(z.getLine(M+L))!=ae[L])continue e;var Ae=z.getLine(M+ae.length-1),Re=le(Ae),Je=ae[ae.length-1];if(Re.slice(0,Je.length)!=Je)continue e;return{from:_(M,F(de,ue,fe,le)+j),to:_(M+ae.length-1,F(Ae,Re,Je.length,le))}}}}function J(z,X,te,V){if(!X.length)return null;var le=V?D:R,ae=le(X).split(/\r|\n\r?/);e:for(var M=te.line,j=te.ch,he=z.firstLine()-1+ae.length;M>=he;M--,j=-1){var de=z.getLine(M);j>-1&&(de=de.slice(0,j));var ue=le(de);if(ae.length==1){var G=ue.lastIndexOf(ae[0]);if(G==-1)continue e;return{from:_(M,F(de,ue,G,le)),to:_(M,F(de,ue,G+ae[0].length,le))}}else{var fe=ae[ae.length-1];if(ue.slice(0,fe.length)!=fe)continue e;for(var L=1,te=M-ae.length+1;L<ae.length-1;L++)if(le(z.getLine(te+L))!=ae[L])continue e;var Ae=z.getLine(M+1-ae.length),Re=le(Ae);if(Re.slice(Re.length-ae[0].length)!=ae[0])continue e;return{from:_(M+1-ae.length,F(Ae,Re,Ae.length-ae[0].length,le)),to:_(M,F(de,ue,fe.length,le))}}}}function ee(z,X,te,V){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=z,te=te?z.clipPos(te):_(0,0),this.pos={from:te,to:te};var le;typeof V=="object"?le=V.caseFold:(le=V,V=null),typeof X=="string"?(le==null&&(le=!1),this.matches=function(ae,M){return(ae?J:E)(z,X,M,le)}):(X=p(X,"gm"),!V||V.multiline!==!1?this.matches=function(ae,M){return(ae?N:m)(z,X,M)}:this.matches=function(ae,M){return(ae?x:y)(z,X,M)})}ee.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(z){var X=this.doc.clipPos(z?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(X=_(X.line,X.ch),z?(X.ch--,X.ch<0&&(X.line--,X.ch=(this.doc.getLine(X.line)||"").length)):(X.ch++,X.ch>(this.doc.getLine(X.line)||"").length&&(X.ch=0,X.line++)),b.cmpPos(X,this.doc.clipPos(X))!=0))return this.atOccurrence=!1;var te=this.matches(z,X);if(this.afterEmptyMatch=te&&b.cmpPos(te.from,te.to)==0,te)return this.pos=te,this.atOccurrence=!0,this.pos.match||!0;var V=_(z?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:V,to:V},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(z,X){if(!!this.atOccurrence){var te=b.splitLines(z);this.doc.replaceRange(te,this.pos.from,this.pos.to,X),this.pos.to=_(this.pos.from.line+te.length-1,te[te.length-1].length+(te.length==1?this.pos.from.ch:0))}}},b.defineExtension("getSearchCursor",function(z,X,te){return new ee(this.doc,z,X,te)}),b.defineDocExtension("getSearchCursor",function(z,X,te){return new ee(this,z,X,te)}),b.defineExtension("selectMatches",function(z,X){for(var te=[],V=this.getSearchCursor(z,this.getCursor("from"),X);V.findNext()&&!(b.cmpPos(V.to(),this.getCursor("to"))>0);)te.push({anchor:V.from(),head:V.to()});te.length&&this.setSelections(te,0)})})})();(function(W,O){(function(b){b(mi.exports,Qf.exports,Zf.exports)})(function(b){b.defineOption("search",{bottom:!1});function _(M,j){return typeof M=="string"?M=new RegExp(M.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),j?"gi":"g"):M.global||(M=new RegExp(M.source,M.ignoreCase?"gi":"g")),{token:function(he){M.lastIndex=he.pos;var de=M.exec(he.string);if(de&&de.index==he.pos)return he.pos+=de[0].length||1,"searching";de?he.pos=de.index:he.skipToEnd()}}}function A(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function p(M){return M.state.search||(M.state.search=new A)}function g(M){return typeof M=="string"&&M==M.toLowerCase()}function y(M,j,he){return M.getSearchCursor(j,he,{caseFold:g(j),multiline:!0})}function m(M,j,he,de,ue){M.openDialog(j,de,{value:he,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){J(M)},onKeyDown:ue,bottom:M.options.search.bottom})}function S(M,j,he,de,ue){M.openDialog?M.openDialog(j,ue,{value:de,selectValueOnOpen:!0,bottom:M.options.search.bottom}):ue(prompt(he,de))}function x(M,j,he,de){M.openConfirm?M.openConfirm(j,de):confirm(he)&&de[0]()}function N(M){return M.replace(/\\([nrt\\])/g,function(j,he){return he=="n"?`
`:he=="r"?"\r":he=="t"?"	":he=="\\"?"\\":j})}function D(M){var j=M.match(/^\/(.*)\/([a-z]*)$/);if(j)try{M=new RegExp(j[1],j[2].indexOf("i")==-1?"":"i")}catch{}else M=N(M);return(typeof M=="string"?M=="":M.test(""))&&(M=/x^/),M}function R(M,j,he){j.queryText=he,j.query=D(he),M.removeOverlay(j.overlay,g(j.query)),j.overlay=_(j.query,g(j.query)),M.addOverlay(j.overlay),M.showMatchesOnScrollbar&&(j.annotate&&(j.annotate.clear(),j.annotate=null),j.annotate=M.showMatchesOnScrollbar(j.query,g(j.query)))}function F(M,j,he,de){var ue=p(M);if(ue.query)return E(M,j);var G=M.getSelection()||ue.lastQuery;if(G instanceof RegExp&&G.source=="x^"&&(G=null),he&&M.openDialog){var fe=null,L=function(Ae,Re){b.e_stop(Re),!!Ae&&(Ae!=ue.queryText&&(R(M,ue,Ae),ue.posFrom=ue.posTo=M.getCursor()),fe&&(fe.style.opacity=1),E(M,Re.shiftKey,function(Je,Fe){var je;Fe.line<3&&document.querySelector&&(je=M.display.wrapper.querySelector(".CodeMirror-dialog"))&&je.getBoundingClientRect().bottom-4>M.cursorCoords(Fe,"window").top&&((fe=je).style.opacity=.4)}))};m(M,z(M),G,L,function(Ae,Re){var Je=b.keyName(Ae),Fe=M.getOption("extraKeys"),je=Fe&&Fe[Je]||b.keyMap[M.getOption("keyMap")][Je];je=="findNext"||je=="findPrev"||je=="findPersistentNext"||je=="findPersistentPrev"?(b.e_stop(Ae),R(M,p(M),Re),M.execCommand(je)):(je=="find"||je=="findPersistent")&&(b.e_stop(Ae),L(Re,Ae))}),de&&G&&(R(M,ue,G),E(M,j))}else S(M,z(M),"Search for:",G,function(Ae){Ae&&!ue.query&&M.operation(function(){R(M,ue,Ae),ue.posFrom=ue.posTo=M.getCursor(),E(M,j)})})}function E(M,j,he){M.operation(function(){var de=p(M),ue=y(M,de.query,j?de.posFrom:de.posTo);!ue.find(j)&&(ue=y(M,de.query,j?b.Pos(M.lastLine()):b.Pos(M.firstLine(),0)),!ue.find(j))||(M.setSelection(ue.from(),ue.to()),M.scrollIntoView({from:ue.from(),to:ue.to()},20),de.posFrom=ue.from(),de.posTo=ue.to(),he&&he(ue.from(),ue.to()))})}function J(M){M.operation(function(){var j=p(M);j.lastQuery=j.query,!!j.query&&(j.query=j.queryText=null,M.removeOverlay(j.overlay),j.annotate&&(j.annotate.clear(),j.annotate=null))})}function ee(M,j){var he=M?document.createElement(M):document.createDocumentFragment();for(var de in j)he[de]=j[de];for(var ue=2;ue<arguments.length;ue++){var G=arguments[ue];he.appendChild(typeof G=="string"?document.createTextNode(G):G)}return he}function z(M){var j=ee("label",{className:"CodeMirror-search-label"},M.phrase("Search:"),ee("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field",id:"CodeMirror-search-field"}));return j.setAttribute("for","CodeMirror-search-field"),ee("",null,j," ",ee("span",{style:"color: #666",className:"CodeMirror-search-hint"},M.phrase("(Use /re/ syntax for regexp search)")))}function X(M){return ee("",null," ",ee("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",ee("span",{style:"color: #666",className:"CodeMirror-search-hint"},M.phrase("(Use /re/ syntax for regexp search)")))}function te(M){return ee("",null,ee("span",{className:"CodeMirror-search-label"},M.phrase("With:"))," ",ee("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}function V(M){return ee("",null,ee("span",{className:"CodeMirror-search-label"},M.phrase("Replace?"))," ",ee("button",{},M.phrase("Yes"))," ",ee("button",{},M.phrase("No"))," ",ee("button",{},M.phrase("All"))," ",ee("button",{},M.phrase("Stop")))}function le(M,j,he){M.operation(function(){for(var de=y(M,j);de.findNext();)if(typeof j!="string"){var ue=M.getRange(de.from(),de.to()).match(j);de.replace(he.replace(/\$(\d)/g,function(G,fe){return ue[fe]}))}else de.replace(he)})}function ae(M,j){if(!M.getOption("readOnly")){var he=M.getSelection()||p(M).lastQuery,de=j?M.phrase("Replace all:"):M.phrase("Replace:"),ue=ee("",null,ee("span",{className:"CodeMirror-search-label"},de),X(M));S(M,ue,de,he,function(G){!G||(G=D(G),S(M,te(M),M.phrase("Replace with:"),"",function(fe){if(fe=N(fe),j)le(M,G,fe);else{J(M);var L=y(M,G,M.getCursor("from")),Ae=function(){var Je=L.from(),Fe;!(Fe=L.findNext())&&(L=y(M,G),!(Fe=L.findNext())||Je&&L.from().line==Je.line&&L.from().ch==Je.ch)||(M.setSelection(L.from(),L.to()),M.scrollIntoView({from:L.from(),to:L.to()}),x(M,V(M),M.phrase("Replace?"),[function(){Re(Fe)},Ae,function(){le(M,G,fe)}]))},Re=function(Je){L.replace(typeof G=="string"?fe:fe.replace(/\$(\d)/g,function(Fe,je){return Je[je]})),Ae()};Ae()}}))})}}b.commands.find=function(M){J(M),F(M)},b.commands.findPersistent=function(M){J(M),F(M,!1,!0)},b.commands.findPersistentNext=function(M){F(M,!1,!0,!0)},b.commands.findPersistentPrev=function(M){F(M,!0,!0,!0)},b.commands.findNext=F,b.commands.findPrev=function(M){F(M,!0)},b.commands.clearSearch=J,b.commands.replace=ae,b.commands.replaceAll=function(M){ae(M,!0)}})})();const Jf={class:"code-mirror"},jf={class:"operator"},Vf=Bs(" JSON \u4E0B\u8F7D "),$f=Do({props:{code:null},setup(W){const O=W,b=zu({mode:"javascript",theme:"default",lineNumbers:!0,smartIndent:!0,indentUnit:2,tabSize:2,foldGutter:!0,lineWrapping:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}),_=Rs(()=>JSON.stringify(O.code,void 0,4)),A=()=>{const p=JSON.stringify(O.code,void 0,4);var g=new Blob([p],{type:"json/plain;charset=utf-8"});sf.exports.saveAs(g,`splitpanes${Date.now()}.json`)};return(p,g)=>{const y=tf;return Zi(),Mo("div",Jf,[Lu("div",jf,[jr(y,{type:"primary",onClick:A},{icon:Vr(()=>[]),default:Vr(()=>[Vf]),_:1})]),jr(Lt(Xf),{ref:"cmRefDom",value:Lt(_),"onUpdate:value":g[0]||(g[0]=m=>ef(_)?_.value=m:null),style:{height:"100%"},options:Lt(b),border:""},null,8,["value","options"])])}}});var eh=Iu($f,[["__scopeId","data-v-59a0e54c"]]);const th={class:"sider"},rh=Bs("\u9ED8\u8BA4\u5360\u6BD4\uFF08size\uFF09"),nh=Bs("\u6700\u5C0F\u5360\u6BD4\uFF08min-size\uFF09"),ih=Bs("\u6700\u5927\u5360\u6BD4\uFF08max-size\uFF09"),lh={class:"main"},oh=Do({setup(W){const O=zu({size:14,"min-size":14,"max-size":50});return(b,_)=>{const A=rf,p=nf,g=lf;return Zi(),Hu(Lt(vf),{class:"default-theme"},{default:Vr(()=>[jr(Lt(Nu),of(af(Lt(O))),{default:Vr(()=>[Lu("div",th,[jr(g,{layout:"vertical","label-position":"top"},{default:Vr(()=>[jr(p,null,{label:Vr(()=>[rh]),default:Vr(()=>[jr(A,{modelValue:Lt(O).size,"onUpdate:modelValue":_[0]||(_[0]=y=>Lt(O).size=y),min:10,max:50,"addon-after":"%"},null,8,["modelValue"])]),_:1}),jr(p,null,{label:Vr(()=>[nh]),default:Vr(()=>[jr(A,{modelValue:Lt(O).size,"onUpdate:modelValue":_[1]||(_[1]=y=>Lt(O).size=y),min:1,max:100,"addon-after":"%"},null,8,["modelValue"])]),_:1}),jr(p,null,{label:Vr(()=>[ih]),default:Vr(()=>[jr(A,{modelValue:Lt(O).size,"onUpdate:modelValue":_[2]||(_[2]=y=>Lt(O).size=y),min:1,max:100,"addon-after":"%"},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},16),jr(Lt(Nu),null,{default:Vr(()=>[Lu("div",lh,[jr(eh,{code:Lt(O)},null,8,["code"])])]),_:1})]),_:1})}}});var hh=Iu(oh,[["__scopeId","data-v-207ac5d5"]]);export{hh as default};
